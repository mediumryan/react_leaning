import{R as wh,a as fe,A as Om,p as Fo}from"./chunk-EPOLDU6W-K4piUF01.js";const _t={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCY074fG5q10VeGc-s_73uM1Ragklabl9U",VITE_FIREBASE_APP_ID:"1:146016822888:web:31c9c2a9b5c69723e67ddd",VITE_FIREBASE_AUTH_DOMAIN:"ryan-react-2ace0.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-0T67BPN7XT",VITE_FIREBASE_MESSAGING_SENDER_ID:"146016822888",VITE_FIREBASE_PROJECT_ID:"ryan-react-2ace0",VITE_FIREBASE_STORAGE_BUCKET:"ryan-react-2ace0.firebasestorage.app"};function Ih(n){return"init"in n}function Bo(n){return!!n.write}function Il(n){return"v"in n||"e"in n}function ei(n){if("e"in n)throw n.e;if((_t?"production":void 0)!=="production"&&!("v"in n))throw new Error("[Bug] atom state is not initialized");return n.v}const ti=new WeakMap;function Th(n){var e;return ni(n)&&!!((e=ti.get(n))!=null&&e[0])}function xm(n){const e=ti.get(n);e?.[0]&&(e[0]=!1,e[1].forEach(t=>t()))}function jo(n,e){let t=ti.get(n);if(!t){t=[!0,new Set],ti.set(n,t);const r=()=>{t[0]=!1};n.then(r,r)}t[1].add(e)}function ni(n){return typeof n?.then=="function"}function vh(n,e,t){if(!t.p.has(n)){t.p.add(n);const r=()=>t.p.delete(n);e.then(r,r)}}function Ah(n,e,t){var r;const s=new Set;for(const i of((r=t.get(n))==null?void 0:r.t)||[])s.add(i);for(const i of e.p)s.add(i);return s}const Lm=(n,e,...t)=>e.read(...t),Mm=(n,e,...t)=>e.write(...t),Um=(n,e)=>{if(e.INTERNAL_onInit)return e.INTERNAL_onInit(n);if(e.unstable_onInit)return console.warn("[DEPRECATED] atom.unstable_onInit is renamed to atom.INTERNAL_onInit."),e.unstable_onInit(n)},Fm=(n,e,t)=>{var r;return(r=e.onMount)==null?void 0:r.call(e,t)},Bm=(n,e)=>{var t;const r=Ve(n),s=r[0],i=r[6],a=r[9];if((_t?"production":void 0)!=="production"&&!e)throw new Error("Atom is undefined or null");let c=s.get(e);return c||(c={d:new Map,p:new Set,n:0},s.set(e,c),(t=i.i)==null||t.call(i,e),a?.(n,e)),c},jm=n=>{const e=Ve(n),t=e[1],r=e[3],s=e[4],i=e[5],a=e[6],c=e[13],u=[],h=f=>{try{f()}catch(g){u.push(g)}};do{a.f&&h(a.f);const f=new Set,g=f.add.bind(f);r.forEach(_=>{var b;return(b=t.get(_))==null?void 0:b.l.forEach(g)}),r.clear(),i.forEach(g),i.clear(),s.forEach(g),s.clear(),f.forEach(h),r.size&&c(n)}while(r.size||i.size||s.size);if(u.length)throw new AggregateError(u)},$m=n=>{const e=Ve(n),t=e[1],r=e[2],s=e[3],i=e[11],a=e[14],c=e[17],u=[],h=new WeakSet,f=new WeakSet,g=Array.from(s);for(;g.length;){const _=g[g.length-1],b=i(n,_);if(f.has(_)){g.pop();continue}if(h.has(_)){if(r.get(_)===b.n)u.push([_,b]);else if((_t?"production":void 0)!=="production"&&r.has(_))throw new Error("[Bug] invalidated atom exists");f.add(_),g.pop();continue}h.add(_);for(const P of Ah(_,b,t))h.has(P)||g.push(P)}for(let _=u.length-1;_>=0;--_){const[b,P]=u[_];let D=!1;for(const k of P.d.keys())if(k!==b&&s.has(k)){D=!0;break}D&&(a(n,b),c(n,b)),r.delete(b)}},$o=new WeakSet,qm=(n,e)=>{var t,r;const s=Ve(n),i=s[1],a=s[2],c=s[3],u=s[6],h=s[7],f=s[11],g=s[12],_=s[13],b=s[14],P=s[16],D=s[17],k=s[20],V=f(n,e);if(Il(V)){if(i.has(e)&&a.get(e)!==V.n)return V;let y=!1;for(const[T,w]of V.d)if(b(n,T).n!==w){y=!0;break}if(!y)return V}V.d.clear();let U=!0;function F(){i.has(e)&&(D(n,e),_(n),g(n))}function W(y){var T;if(y===e){const v=f(n,y);if(!Il(v))if(Ih(y))k(n,y,y.init);else throw new Error("no atom init");return ei(v)}const w=b(n,y);try{return ei(w)}finally{V.d.set(y,w.n),Th(V.v)&&vh(e,V.v,w),i.has(e)&&((T=i.get(y))==null||T.t.add(e)),U||F()}}let ee,X;const I={get signal(){return ee||(ee=new AbortController),ee.signal},get setSelf(){return(_t?"production":void 0)!=="production"&&!Bo(e)&&console.warn("setSelf function cannot be used with read-only atom"),!X&&Bo(e)&&(X=(...y)=>{if((_t?"production":void 0)!=="production"&&U&&console.warn("setSelf function cannot be called in sync"),!U)try{return P(n,e,...y)}finally{_(n),g(n)}}),X}},m=V.n;try{(_t?"production":void 0)!=="production"&&$o.delete(n);const y=h(n,e,W,I);return(_t?"production":void 0)!=="production"&&$o.has(n)&&console.warn("Detected store mutation during atom read. This is not supported."),k(n,e,y),ni(y)&&(jo(y,()=>ee?.abort()),y.then(F,F)),(t=u.r)==null||t.call(u,e),V}catch(y){return delete V.v,V.e=y,++V.n,V}finally{U=!1,m!==V.n&&a.get(e)===m&&(a.set(e,V.n),c.add(e),(r=u.c)==null||r.call(u,e))}},zm=(n,e)=>{const t=Ve(n),r=t[1],s=t[2],i=t[11],a=[e];for(;a.length;){const c=a.pop(),u=i(n,c);for(const h of Ah(c,u,r)){const f=i(n,h);s.set(h,f.n),a.push(h)}}},Gm=(n,e,...t)=>{const r=Ve(n),s=r[3],i=r[6],a=r[8],c=r[11],u=r[12],h=r[13],f=r[14],g=r[15],_=r[16],b=r[17],P=r[20];let D=!0;const k=U=>ei(f(n,U)),V=(U,...F)=>{var W;const ee=c(n,U);try{if(U===e){if(!Ih(U))throw new Error("atom not writable");(_t?"production":void 0)!=="production"&&$o.add(n);const X=ee.n,I=F[0];P(n,U,I),b(n,U),X!==ee.n&&(s.add(U),g(n,U),(W=i.c)==null||W.call(i,U));return}else return _(n,U,...F)}finally{D||(h(n),u(n))}};try{return a(n,e,k,V,...t)}finally{D=!1}},Wm=(n,e)=>{var t;const r=Ve(n),s=r[1],i=r[3],a=r[6],c=r[11],u=r[15],h=r[18],f=r[19],g=c(n,e),_=s.get(e);if(_&&!Th(g.v)){for(const[b,P]of g.d)if(!_.d.has(b)){const D=c(n,b);h(n,b).t.add(e),_.d.add(b),P!==D.n&&(i.add(b),u(n,b),(t=a.c)==null||t.call(a,b))}for(const b of _.d)if(!g.d.has(b)){_.d.delete(b);const P=f(n,b);P?.t.delete(e)}}},Hm=(n,e)=>{var t;const r=Ve(n),s=r[1],i=r[4],a=r[6],c=r[10],u=r[11],h=r[12],f=r[13],g=r[14],_=r[16],b=r[18],P=u(n,e);let D=s.get(e);if(!D){g(n,e);for(const k of P.d.keys())b(n,k).t.add(e);if(D={l:new Set,d:new Set(P.d.keys()),t:new Set},s.set(e,D),Bo(e)){const k=()=>{let V=!0;const U=(...F)=>{try{return _(n,e,...F)}finally{V||(f(n),h(n))}};try{const F=c(n,e,U);F&&(D.u=()=>{V=!0;try{F()}finally{V=!1}})}finally{V=!1}};i.add(k)}(t=a.m)==null||t.call(a,e)}return D},Km=(n,e)=>{var t,r;const s=Ve(n),i=s[1],a=s[5],c=s[6],u=s[11],h=s[19],f=u(n,e);let g=i.get(e);if(!g||g.l.size)return g;let _=!1;for(const b of g.t)if((t=i.get(b))!=null&&t.d.has(e)){_=!0;break}if(!_){g.u&&a.add(g.u),g=void 0,i.delete(e);for(const b of f.d.keys()){const P=h(n,b);P?.t.delete(e)}(r=c.u)==null||r.call(c,e);return}return g},Qm=(n,e,t)=>{const r=Ve(n)[11],s=r(n,e),i="v"in s,a=s.v;if(ni(t))for(const c of s.d.keys())vh(e,t,r(n,c));s.v=t,delete s.e,(!i||!Object.is(a,s.v))&&(++s.n,ni(a)&&xm(a))},Ym=(n,e)=>{const t=Ve(n)[14];return ei(t(n,e))},Jm=(n,e,...t)=>{const r=Ve(n),s=r[12],i=r[13],a=r[16];try{return a(n,e,...t)}finally{i(n),s(n)}},Xm=(n,e,t)=>{const r=Ve(n),s=r[12],i=r[18],a=r[19],u=i(n,e).l;return u.add(t),s(n),()=>{u.delete(t),a(n,e),s(n)}},bh=new WeakMap,Ve=n=>{const e=bh.get(n);if((_t?"production":void 0)!=="production"&&!e)throw new Error("Store must be created by buildStore to read its building blocks");return e};function Zm(...n){const e={get(r){const s=Ve(e)[21];return s(e,r)},set(r,...s){const i=Ve(e)[22];return i(e,r,...s)},sub(r,s){const i=Ve(e)[23];return i(e,r,s)}},t=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},Lm,Mm,Um,Fm,Bm,jm,$m,qm,zm,Gm,Wm,Hm,Km,Qm,Ym,Jm,Xm,void 0].map((r,s)=>n[s]||r);return bh.set(e,Object.freeze(t)),e}const Rh={};let eg=0;function wa(n,e){const t=`atom${++eg}`,r={toString(){return(Rh?"production":void 0)!=="production"&&this.debugLabel?t+":"+this.debugLabel:t}};return typeof n=="function"?r.read=n:(r.init=n,r.read=tg,r.write=ng),e&&(r.write=e),r}function tg(n){return n(this)}function ng(n,e,t){return e(this,typeof t=="function"?t(n(this)):t)}function rg(){return Zm()}let Nr;function sg(){return Nr||(Nr=rg(),(Rh?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Nr),globalThis.__JOTAI_DEFAULT_STORE__!==Nr&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Nr}const ig={},og=fe.createContext(void 0);function Sh(n){return fe.useContext(og)||sg()}const qo=n=>typeof n?.then=="function",zo=n=>{n.status||(n.status="pending",n.then(e=>{n.status="fulfilled",n.value=e},e=>{n.status="rejected",n.reason=e}))},ag=wh.use||(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(zo(n),n)}),yo=new WeakMap,Tl=(n,e)=>{let t=yo.get(n);return t||(t=new Promise((r,s)=>{let i=n;const a=h=>f=>{i===h&&r(f)},c=h=>f=>{i===h&&s(f)},u=()=>{try{const h=e();qo(h)?(yo.set(h,t),i=h,h.then(a(h),c(h)),jo(h,u)):r(h)}catch(h){s(h)}};n.then(a(n),c(n)),jo(n,u)}),yo.set(n,t)),t};function cg(n,e){const{delay:t,unstable_promiseStatus:r=!wh.use}={},s=Sh(),[[i,a,c],u]=fe.useReducer(f=>{const g=s.get(n);return Object.is(f[0],g)&&f[1]===s&&f[2]===n?f:[g,s,n]},void 0,()=>[s.get(n),s,n]);let h=i;if((a!==s||c!==n)&&(u(),h=s.get(n)),fe.useEffect(()=>{const f=s.sub(n,()=>{if(r)try{const g=s.get(n);qo(g)&&zo(Tl(g,()=>s.get(n)))}catch{}if(typeof t=="number"){setTimeout(u,t);return}u()});return u(),f},[s,n,t,r]),fe.useDebugValue(h),qo(h)){const f=Tl(h,()=>s.get(n));return r&&zo(f),ag(f)}return h}function lg(n,e){const t=Sh();return fe.useCallback((...s)=>{if((ig?"production":void 0)!=="production"&&!("write"in n))throw new Error("not writable atom");return t.set(n,...s)},[t,n])}function oS(n,e){return[cg(n),lg(n)]}const aS=wa(!0),cS=wa(null),lS=wa(null),ug=()=>{};var vl={};const Ch=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},hg=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],a=n[t++],c=n[t++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=n[t++],a=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Ph={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],a=s+1<n.length,c=a?n[s+1]:0,u=s+2<n.length,h=u?n[s+2]:0,f=i>>2,g=(i&3)<<4|c>>4;let _=(c&15)<<2|h>>6,b=h&63;u||(b=64,a||(_=64)),r.push(t[f],t[g],t[_],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ch(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hg(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const h=s<n.length?t[n.charAt(s)]:64;++s;const g=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||c==null||h==null||g==null)throw new dg;const _=i<<2|c>>4;if(r.push(_),h!==64){const b=c<<4&240|h>>2;if(r.push(b),g!==64){const P=h<<6&192|g;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class dg extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fg=function(n){const e=Ch(n);return Ph.encodeByteArray(e,!0)},ri=function(n){return fg(n).replace(/\./g,"")},kh=function(n){try{return Ph.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const mg=()=>pg().__FIREBASE_DEFAULTS__,gg=()=>{if(typeof process>"u"||typeof vl>"u")return;const n=vl.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_g=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&kh(n[1]);return e&&JSON.parse(e)},Ai=()=>{try{return ug()||mg()||gg()||_g()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Dh=n=>Ai()?.emulatorHosts?.[n],Nh=n=>{const e=Dh(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Vh=()=>Ai()?.config,Oh=n=>Ai()?.[`_${n}`];class yg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Xt(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ia(n){return(await fetch(n,{credentials:"include"})).ok}function xh(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ri(JSON.stringify(t)),ri(JSON.stringify(a)),""].join(".")}const $r={};function Eg(){const n={prod:[],emulator:[]};for(const e of Object.keys($r))$r[e]?n.emulator.push(e):n.prod.push(e);return n}function wg(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Al=!1;function Ta(n,e){if(typeof window>"u"||typeof document>"u"||!Xt(window.location.host)||$r[n]===e||$r[n]||Al)return;$r[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",i=Eg().prod.length>0;function a(){const _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,b){_.setAttribute("width","24"),_.setAttribute("id",b),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Al=!0,a()},_}function f(_,b){_.setAttribute("id",b),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=wg(r),b=t("text"),P=document.getElementById(b)||document.createElement("span"),D=t("learnmore"),k=document.getElementById(D)||document.createElement("a"),V=t("preprendIcon"),U=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const F=_.element;c(F),f(k,D);const W=h();u(U,V),F.append(U,P,k,W),document.body.appendChild(F)}i?(P.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Oe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ig(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function Tg(){const n=Ai()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vg(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lh(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ag(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bg(){const n=Oe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Rg(){return!Tg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mh(){try{return typeof indexedDB=="object"}catch{return!1}}function Uh(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}function Sg(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Cg="FirebaseError";class Xe extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Cg,Object.setPrototypeOf(this,Xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sn.prototype.create)}}class Sn{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Pg(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Xe(s,c,r)}}function Pg(n,e){return n.replace(kg,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const kg=/\{\$([^}]+)}/g;function Dg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gt(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],a=e[s];if(bl(i)&&bl(a)){if(!Gt(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function bl(n){return n!==null&&typeof n=="object"}function as(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lr(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Mr(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Ng(n,e){const t=new Vg(n,e);return t.subscribe.bind(t)}class Vg{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Og(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Eo),s.error===void 0&&(s.error=Eo),s.complete===void 0&&(s.complete=Eo);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Og(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Eo(){}const xg=1e3,Lg=2,Mg=14400*1e3,Ug=.5;function Rl(n,e=xg,t=Lg){const r=e*Math.pow(t,n),s=Math.round(Ug*r*(Math.random()-.5)*2);return Math.min(Mg,r+s)}function ne(n){return n&&n._delegate?n._delegate:n}class Ye{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mn="[DEFAULT]";class Fg{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new yg;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jg(e))try{this.getOrInitializeService({instanceIdentifier:mn})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=mn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mn){return this.instances.has(e)}getOptions(e=mn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bg(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mn){return this.component?this.component.multipleInstances?e:mn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bg(n){return n===mn?void 0:n}function jg(n){return n.instantiationMode==="EAGER"}class $g{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Fg(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Q;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Q||(Q={}));const qg={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},zg=Q.INFO,Gg={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},Wg=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Gg[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bi{constructor(e){this.name=e,this._logLevel=zg,this._logHandler=Wg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...e),this._logHandler(this,Q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...e),this._logHandler(this,Q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...e),this._logHandler(this,Q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...e),this._logHandler(this,Q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...e),this._logHandler(this,Q.ERROR,...e)}}const Hg=(n,e)=>e.some(t=>n instanceof t);let Sl,Cl;function Kg(){return Sl||(Sl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qg(){return Cl||(Cl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fh=new WeakMap,Go=new WeakMap,Bh=new WeakMap,wo=new WeakMap,va=new WeakMap;function Yg(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",a)},i=()=>{t(jt(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Fh.set(t,n)}).catch(()=>{}),va.set(e,n),e}function Jg(n){if(Go.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",a),n.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",a),n.addEventListener("abort",a)});Go.set(n,e)}let Wo={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Go.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Bh.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Xg(n){Wo=n(Wo)}function Zg(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Io(this),e,...t);return Bh.set(r,e.sort?e.sort():[e]),jt(r)}:Qg().includes(n)?function(...e){return n.apply(Io(this),e),jt(Fh.get(this))}:function(...e){return jt(n.apply(Io(this),e))}}function e_(n){return typeof n=="function"?Zg(n):(n instanceof IDBTransaction&&Jg(n),Hg(n,Kg())?new Proxy(n,Wo):n)}function jt(n){if(n instanceof IDBRequest)return Yg(n);if(wo.has(n))return wo.get(n);const e=e_(n);return e!==n&&(wo.set(n,e),va.set(e,n)),e}const Io=n=>va.get(n);function jh(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(n,e),c=jt(a);return r&&a.addEventListener("upgradeneeded",u=>{r(jt(a.result),u.oldVersion,u.newVersion,jt(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const t_=["get","getKey","getAll","getAllKeys","count"],n_=["put","add","delete","clear"],To=new Map;function Pl(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(To.get(e))return To.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=n_.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||t_.includes(t)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),s&&u.done]))[0]};return To.set(e,i),i}Xg(n=>({...n,get:(e,t,r)=>Pl(e,t)||n.get(e,t,r),has:(e,t)=>!!Pl(e,t)||n.has(e,t)}));class r_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(s_(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function s_(n){return n.getComponent()?.type==="VERSION"}const Ho="@firebase/app",kl="0.14.7";const Tt=new bi("@firebase/app"),i_="@firebase/app-compat",o_="@firebase/analytics-compat",a_="@firebase/analytics",c_="@firebase/app-check-compat",l_="@firebase/app-check",u_="@firebase/auth",h_="@firebase/auth-compat",d_="@firebase/database",f_="@firebase/data-connect",p_="@firebase/database-compat",m_="@firebase/functions",g_="@firebase/functions-compat",__="@firebase/installations",y_="@firebase/installations-compat",E_="@firebase/messaging",w_="@firebase/messaging-compat",I_="@firebase/performance",T_="@firebase/performance-compat",v_="@firebase/remote-config",A_="@firebase/remote-config-compat",b_="@firebase/storage",R_="@firebase/storage-compat",S_="@firebase/firestore",C_="@firebase/ai",P_="@firebase/firestore-compat",k_="firebase",D_="12.8.0";const Ko="[DEFAULT]",N_={[Ho]:"fire-core",[i_]:"fire-core-compat",[a_]:"fire-analytics",[o_]:"fire-analytics-compat",[l_]:"fire-app-check",[c_]:"fire-app-check-compat",[u_]:"fire-auth",[h_]:"fire-auth-compat",[d_]:"fire-rtdb",[f_]:"fire-data-connect",[p_]:"fire-rtdb-compat",[m_]:"fire-fn",[g_]:"fire-fn-compat",[__]:"fire-iid",[y_]:"fire-iid-compat",[E_]:"fire-fcm",[w_]:"fire-fcm-compat",[I_]:"fire-perf",[T_]:"fire-perf-compat",[v_]:"fire-rc",[A_]:"fire-rc-compat",[b_]:"fire-gcs",[R_]:"fire-gcs-compat",[S_]:"fire-fst",[P_]:"fire-fst-compat",[C_]:"fire-vertex","fire-js":"fire-js",[k_]:"fire-js-all"};const Qr=new Map,V_=new Map,Qo=new Map;function Dl(n,e){try{n.container.addComponent(e)}catch(t){Tt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function nt(n){const e=n.name;if(Qo.has(e))return Tt.debug(`There were multiple attempts to register component ${e}.`),!1;Qo.set(e,n);for(const t of Qr.values())Dl(t,n);for(const t of V_.values())Dl(t,n);return!0}function Zt(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ge(n){return n==null?!1:n.settings!==void 0}const O_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$t=new Sn("app","Firebase",O_);class x_{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ye("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $t.create("app-deleted",{appName:this._name})}}const Cn=D_;function $h(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Ko,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw $t.create("bad-app-name",{appName:String(s)});if(t||(t=Vh()),!t)throw $t.create("no-options");const i=Qr.get(s);if(i){if(Gt(t,i.options)&&Gt(r,i.config))return i;throw $t.create("duplicate-app",{appName:s})}const a=new $g(s);for(const u of Qo.values())a.addComponent(u);const c=new x_(t,r,a);return Qr.set(s,c),c}function cs(n=Ko){const e=Qr.get(n);if(!e&&n===Ko&&Vh())return $h();if(!e)throw $t.create("no-app",{appName:n});return e}function L_(){return Array.from(Qr.values())}function qe(n,e,t){let r=N_[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tt.warn(a.join(" "));return}nt(new Ye(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const M_="firebase-heartbeat-database",U_=1,Yr="firebase-heartbeat-store";let vo=null;function qh(){return vo||(vo=jh(M_,U_,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yr)}catch(t){console.warn(t)}}}}).catch(n=>{throw $t.create("idb-open",{originalErrorMessage:n.message})})),vo}async function F_(n){try{const t=(await qh()).transaction(Yr),r=await t.objectStore(Yr).get(zh(n));return await t.done,r}catch(e){if(e instanceof Xe)Tt.warn(e.message);else{const t=$t.create("idb-get",{originalErrorMessage:e?.message});Tt.warn(t.message)}}}async function Nl(n,e){try{const r=(await qh()).transaction(Yr,"readwrite");await r.objectStore(Yr).put(e,zh(n)),await r.done}catch(t){if(t instanceof Xe)Tt.warn(t.message);else{const r=$t.create("idb-set",{originalErrorMessage:t?.message});Tt.warn(r.message)}}}function zh(n){return`${n.name}!${n.options.appId}`}const B_=1024,j_=30;class $_{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new z_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Vl();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>j_){const s=G_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Tt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Vl(),{heartbeatsToSend:t,unsentEntries:r}=q_(this._heartbeatsCache.heartbeats),s=ri(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Tt.warn(e),""}}}function Vl(){return new Date().toISOString().substring(0,10)}function q_(n,e=B_){const t=[];let r=n.slice();for(const s of n){const i=t.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Ol(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Ol(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class z_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mh()?Uh().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await F_(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Nl(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Nl(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ol(n){return ri(JSON.stringify({version:2,heartbeats:n})).length}function G_(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function W_(n){nt(new Ye("platform-logger",e=>new r_(e),"PRIVATE")),nt(new Ye("heartbeat",e=>new $_(e),"PRIVATE")),qe(Ho,kl,n),qe(Ho,kl,"esm2020"),qe("fire-js","")}W_("");var H_="firebase",K_="12.8.0";qe(H_,K_,"app");const Gh="@firebase/installations",Aa="0.6.19";const Wh=1e4,Hh=`w:${Aa}`,Kh="FIS_v2",Q_="https://firebaseinstallations.googleapis.com/v1",Y_=3600*1e3,J_="installations",X_="Installations";const Z_={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wn=new Sn(J_,X_,Z_);function Qh(n){return n instanceof Xe&&n.code.includes("request-failed")}function Yh({projectId:n}){return`${Q_}/projects/${n}/installations`}function Jh(n){return{token:n.token,requestStatus:2,expiresIn:ty(n.expiresIn),creationTime:Date.now()}}async function Xh(n,e){const r=(await e.json()).error;return wn.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Zh({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function ey(n,{refreshToken:e}){const t=Zh(n);return t.append("Authorization",ny(e)),t}async function ed(n){const e=await n();return e.status>=500&&e.status<600?n():e}function ty(n){return Number(n.replace("s","000"))}function ny(n){return`${Kh} ${n}`}async function ry({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Yh(n),s=Zh(n),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={fid:t,authVersion:Kh,appId:n.appId,sdkVersion:Hh},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await ed(()=>fetch(r,c));if(u.ok){const h=await u.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:Jh(h.authToken)}}else throw await Xh("Create Installation",u)}function td(n){return new Promise(e=>{setTimeout(e,n)})}function sy(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const iy=/^[cdef][\w-]{21}$/,Yo="";function oy(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=ay(n);return iy.test(t)?t:Yo}catch{return Yo}}function ay(n){return sy(n).substr(0,22)}function Ri(n){return`${n.appName}!${n.appId}`}const nd=new Map;function rd(n,e){const t=Ri(n);sd(t,e),cy(t,e)}function sd(n,e){const t=nd.get(n);if(t)for(const r of t)r(e)}function cy(n,e){const t=ly();t&&t.postMessage({key:n,fid:e}),uy()}let gn=null;function ly(){return!gn&&"BroadcastChannel"in self&&(gn=new BroadcastChannel("[Firebase] FID Change"),gn.onmessage=n=>{sd(n.data.key,n.data.fid)}),gn}function uy(){nd.size===0&&gn&&(gn.close(),gn=null)}const hy="firebase-installations-database",dy=1,In="firebase-installations-store";let Ao=null;function ba(){return Ao||(Ao=jh(hy,dy,{upgrade:(n,e)=>{e===0&&n.createObjectStore(In)}})),Ao}async function si(n,e){const t=Ri(n),s=(await ba()).transaction(In,"readwrite"),i=s.objectStore(In),a=await i.get(t);return await i.put(e,t),await s.done,(!a||a.fid!==e.fid)&&rd(n,e.fid),e}async function id(n){const e=Ri(n),r=(await ba()).transaction(In,"readwrite");await r.objectStore(In).delete(e),await r.done}async function Si(n,e){const t=Ri(n),s=(await ba()).transaction(In,"readwrite"),i=s.objectStore(In),a=await i.get(t),c=e(a);return c===void 0?await i.delete(t):await i.put(c,t),await s.done,c&&(!a||a.fid!==c.fid)&&rd(n,c.fid),c}async function Ra(n){let e;const t=await Si(n.appConfig,r=>{const s=fy(r),i=py(n,s);return e=i.registrationPromise,i.installationEntry});return t.fid===Yo?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function fy(n){const e=n||{fid:oy(),registrationStatus:0};return od(e)}function py(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(wn.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=my(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:gy(n)}:{installationEntry:e}}async function my(n,e){try{const t=await ry(n,e);return si(n.appConfig,t)}catch(t){throw Qh(t)&&t.customData.serverCode===409?await id(n.appConfig):await si(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function gy(n){let e=await xl(n.appConfig);for(;e.registrationStatus===1;)await td(100),e=await xl(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Ra(n);return r||t}return e}function xl(n){return Si(n,e=>{if(!e)throw wn.create("installation-not-found");return od(e)})}function od(n){return _y(n)?{fid:n.fid,registrationStatus:0}:n}function _y(n){return n.registrationStatus===1&&n.registrationTime+Wh<Date.now()}async function yy({appConfig:n,heartbeatServiceProvider:e},t){const r=Ey(n,t),s=ey(n,t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={installation:{sdkVersion:Hh,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await ed(()=>fetch(r,c));if(u.ok){const h=await u.json();return Jh(h)}else throw await Xh("Generate Auth Token",u)}function Ey(n,{fid:e}){return`${Yh(n)}/${e}/authTokens:generate`}async function Sa(n,e=!1){let t;const r=await Si(n.appConfig,i=>{if(!ad(i))throw wn.create("not-registered");const a=i.authToken;if(!e&&Ty(a))return i;if(a.requestStatus===1)return t=wy(n,e),i;{if(!navigator.onLine)throw wn.create("app-offline");const c=Ay(i);return t=Iy(n,c),c}});return t?await t:r.authToken}async function wy(n,e){let t=await Ll(n.appConfig);for(;t.authToken.requestStatus===1;)await td(100),t=await Ll(n.appConfig);const r=t.authToken;return r.requestStatus===0?Sa(n,e):r}function Ll(n){return Si(n,e=>{if(!ad(e))throw wn.create("not-registered");const t=e.authToken;return by(t)?{...e,authToken:{requestStatus:0}}:e})}async function Iy(n,e){try{const t=await yy(n,e),r={...e,authToken:t};return await si(n.appConfig,r),t}catch(t){if(Qh(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await id(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await si(n.appConfig,r)}throw t}}function ad(n){return n!==void 0&&n.registrationStatus===2}function Ty(n){return n.requestStatus===2&&!vy(n)}function vy(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Y_}function Ay(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function by(n){return n.requestStatus===1&&n.requestTime+Wh<Date.now()}async function Ry(n){const e=n,{installationEntry:t,registrationPromise:r}=await Ra(e);return r?r.catch(console.error):Sa(e).catch(console.error),t.fid}async function Sy(n,e=!1){const t=n;return await Cy(t),(await Sa(t,e)).token}async function Cy(n){const{registrationPromise:e}=await Ra(n);e&&await e}function Py(n){if(!n||!n.options)throw bo("App Configuration");if(!n.name)throw bo("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw bo(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function bo(n){return wn.create("missing-app-config-values",{valueName:n})}const cd="installations",ky="installations-internal",Dy=n=>{const e=n.getProvider("app").getImmediate(),t=Py(e),r=Zt(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Ny=n=>{const e=n.getProvider("app").getImmediate(),t=Zt(e,cd).getImmediate();return{getId:()=>Ry(t),getToken:s=>Sy(t,s)}};function Vy(){nt(new Ye(cd,Dy,"PUBLIC")),nt(new Ye(ky,Ny,"PRIVATE"))}Vy();qe(Gh,Aa);qe(Gh,Aa,"esm2020");const ii="analytics",Oy="firebase_id",xy="origin",Ly=60*1e3,My="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ca="https://www.googletagmanager.com/gtag/js";const Ue=new bi("@firebase/analytics");const Uy={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ke=new Sn("analytics","Analytics",Uy);function Fy(n){if(!n.startsWith(Ca)){const e=Ke.create("invalid-gtag-resource",{gtagURL:n});return Ue.warn(e.message),""}return n}function ld(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function By(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function jy(n,e){const t=By("firebase-js-sdk-policy",{createScriptURL:Fy}),r=document.createElement("script"),s=`${Ca}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function $y(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function qy(n,e,t,r,s,i){const a=r[s];try{if(a)await e[a];else{const u=(await ld(t)).find(h=>h.measurementId===s);u&&await e[u.appId]}}catch(c){Ue.error(c)}n("config",s,i)}async function zy(n,e,t,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await ld(t);for(const u of a){const h=c.find(g=>g.measurementId===u),f=h&&e[h.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),n("event",r,s||{})}catch(i){Ue.error(i)}}function Gy(n,e,t,r){async function s(i,...a){try{if(i==="event"){const[c,u]=a;await zy(n,e,t,c,u)}else if(i==="config"){const[c,u]=a;await qy(n,e,t,r,c,u)}else if(i==="consent"){const[c,u]=a;n("consent",c,u)}else if(i==="get"){const[c,u,h]=a;n("get",c,u,h)}else if(i==="set"){const[c]=a;n("set",c)}else n(i,...a)}catch(c){Ue.error(c)}}return s}function Wy(n,e,t,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=Gy(i,n,e,t),{gtagCore:i,wrappedGtag:window[s]}}function Hy(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ca)&&t.src.includes(n))return t;return null}const Ky=30,Qy=1e3;class Yy{constructor(e={},t=Qy){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ud=new Yy;function Jy(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Xy(n){const{appId:e,apiKey:t}=n,r={method:"GET",headers:Jy(t)},s=My.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let a="";try{const c=await i.json();c.error?.message&&(a=c.error.message)}catch{}throw Ke.create("config-fetch-failed",{httpStatus:i.status,responseMessage:a})}return i.json()}async function Zy(n,e=ud,t){const{appId:r,apiKey:s,measurementId:i}=n.options;if(!r)throw Ke.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Ke.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new nE;return setTimeout(async()=>{c.abort()},Ly),hd({appId:r,apiKey:s,measurementId:i},a,c,e)}async function hd(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=ud){const{appId:i,measurementId:a}=n;try{await eE(r,e)}catch(c){if(a)return Ue.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:a};throw c}try{const c=await Xy(n);return s.deleteThrottleMetadata(i),c}catch(c){const u=c;if(!tE(u)){if(s.deleteThrottleMetadata(i),a)return Ue.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:i,measurementId:a};throw c}const h=Number(u?.customData?.httpStatus)===503?Rl(t,s.intervalMillis,Ky):Rl(t,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:t+1};return s.setThrottleMetadata(i,f),Ue.debug(`Calling attemptFetch again in ${h} millis`),hd(n,f,r,s)}}function eE(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(i),r(Ke.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function tE(n){if(!(n instanceof Xe)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class nE{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function rE(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const i=await e,a={...r,send_to:i};n("event",t,a)}}async function sE(n,e,t,r){if(r&&r.global){const s={};for(const i of Object.keys(t))s[`user_properties.${i}`]=t[i];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:t})}}async function iE(){if(Mh())try{await Uh()}catch(n){return Ue.warn(Ke.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Ue.warn(Ke.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function oE(n,e,t,r,s,i,a){const c=Zy(n);c.then(_=>{t[_.measurementId]=_.appId,n.options.measurementId&&_.measurementId!==n.options.measurementId&&Ue.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>Ue.error(_)),e.push(c);const u=iE().then(_=>{if(_)return r.getId()}),[h,f]=await Promise.all([c,u]);Hy(i)||jy(i,h.measurementId),s("js",new Date);const g=a?.config??{};return g[xy]="firebase",g.update=!0,f!=null&&(g[Oy]=f),s("config",h.measurementId,g),h.measurementId}class aE{constructor(e){this.app=e}_delete(){return delete Wn[this.app.options.appId],Promise.resolve()}}let Wn={},Ml=[];const Ul={};let Ro="dataLayer",cE="gtag",Fl,Pa,Bl=!1;function lE(){const n=[];if(Lh()&&n.push("This is a browser extension environment."),Sg()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=Ke.create("invalid-analytics-context",{errorInfo:e});Ue.warn(t.message)}}function uE(n,e,t){lE();const r=n.options.appId;if(!r)throw Ke.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ue.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ke.create("no-api-key");if(Wn[r]!=null)throw Ke.create("already-exists",{id:r});if(!Bl){$y(Ro);const{wrappedGtag:i,gtagCore:a}=Wy(Wn,Ml,Ul,Ro,cE);Pa=i,Fl=a,Bl=!0}return Wn[r]=oE(n,Ml,Ul,e,Fl,Ro,t),new aE(n)}function hE(n=cs()){n=ne(n);const e=Zt(n,ii);return e.isInitialized()?e.getImmediate():dE(n)}function dE(n,e={}){const t=Zt(n,ii);if(t.isInitialized()){const s=t.getImmediate();if(Gt(e,t.getOptions()))return s;throw Ke.create("already-initialized")}return t.initialize({options:e})}function fE(n,e,t){n=ne(n),sE(Pa,Wn[n.app.options.appId],e,t).catch(r=>Ue.error(r))}function pE(n,e,t,r){n=ne(n),rE(Pa,Wn[n.app.options.appId],e,t,r).catch(s=>Ue.error(s))}const jl="@firebase/analytics",$l="0.10.19";function mE(){nt(new Ye(ii,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return uE(r,s,t)},"PUBLIC")),nt(new Ye("analytics-internal",n,"PRIVATE")),qe(jl,$l),qe(jl,$l,"esm2020");function n(e){try{const t=e.getProvider(ii).getImmediate();return{logEvent:(r,s,i)=>pE(t,r,s,i),setUserProperties:(r,s)=>fE(t,r,s)}}catch(t){throw Ke.create("interop-component-reg-failed",{reason:t})}}}mE();function dd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gE=dd,fd=new Sn("auth","Firebase",dd());const oi=new bi("@firebase/auth");function _E(n,...e){oi.logLevel<=Q.WARN&&oi.warn(`Auth (${Cn}): ${n}`,...e)}function zs(n,...e){oi.logLevel<=Q.ERROR&&oi.error(`Auth (${Cn}): ${n}`,...e)}function rt(n,...e){throw ka(n,...e)}function lt(n,...e){return ka(n,...e)}function pd(n,e,t){const r={...gE(),[e]:t};return new Sn("auth","Firebase",r).create(e,{appName:n.name})}function wt(n){return pd(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ka(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return fd.create(n,...e)}function $(n,e,...t){if(!n)throw ka(e,...t)}function yt(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zs(e),new Error(e)}function vt(n,e){n||yt(e)}function Jo(){return typeof self<"u"&&self.location?.href||""}function yE(){return ql()==="http:"||ql()==="https:"}function ql(){return typeof self<"u"&&self.location?.protocol||null}function EE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yE()||Lh()||"connection"in navigator)?navigator.onLine:!0}function wE(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class ls{constructor(e,t){this.shortDelay=e,this.longDelay=t,vt(t>e,"Short delay should be less than long delay!"),this.isMobile=Ig()||Ag()}get(){return EE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Da(n,e){vt(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class md{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const IE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const TE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vE=new ls(3e4,6e4);function en(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function tn(n,e,t,r,s={}){return gd(n,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=as({key:n.config.apiKey,...a}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:u,...i};return vg()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Xt(n.emulatorConfig.host)&&(h.credentials="include"),md.fetch()(await _d(n,n.config.apiHost,t,c),h)})}async function gd(n,e,t){n._canInitEmulator=!1;const r={...IE,...e};try{const s=new bE(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Os(n,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Os(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Os(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw Os(n,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw pd(n,f,h);rt(n,f)}}catch(s){if(s instanceof Xe)throw s;rt(n,"network-request-failed",{message:String(s)})}}async function us(n,e,t,r,s={}){const i=await tn(n,e,t,r,s);return"mfaPendingCredential"in i&&rt(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function _d(n,e,t,r){const s=`${e}${t}?${r}`,i=n,a=i.config.emulator?Da(n.config,s):`${n.config.apiScheme}://${s}`;return TE.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function AE(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(lt(this.auth,"network-request-failed")),vE.get())})}}function Os(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=lt(n,e,r);return s.customData._tokenResponse=t,s}function zl(n){return n!==void 0&&n.enterprise!==void 0}class RE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return AE(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SE(n,e){return tn(n,"GET","/v2/recaptchaConfig",en(n,e))}async function CE(n,e){return tn(n,"POST","/v1/accounts:delete",e)}async function ai(n,e){return tn(n,"POST","/v1/accounts:lookup",e)}function qr(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PE(n,e=!1){const t=ne(n),r=await t.getIdToken(e),s=Na(r);$(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i?.sign_in_provider;return{claims:s,token:r,authTime:qr(So(s.auth_time)),issuedAtTime:qr(So(s.iat)),expirationTime:qr(So(s.exp)),signInProvider:a||null,signInSecondFactor:i?.sign_in_second_factor||null}}function So(n){return Number(n)*1e3}function Na(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return zs("JWT malformed, contained fewer than 3 sections"),null;try{const s=kh(t);return s?JSON.parse(s):(zs("Failed to decode base64 JWT payload"),null)}catch(s){return zs("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Gl(n){const e=Na(n);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Jr(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Xe&&kE(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function kE({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class DE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Xo{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qr(this.lastLoginAt),this.creationTime=qr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ci(n){const e=n.auth,t=await n.getIdToken(),r=await Jr(n,ai(e,{idToken:t}));$(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=s.providerUserInfo?.length?yd(s.providerUserInfo):[],a=VE(n.providerData,i),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!a?.length,h=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xo(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function NE(n){const e=ne(n);await ci(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VE(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function yd(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function OE(n,e){const t=await gd(n,{},async()=>{const r=as({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,a=await _d(n,s,"/v1/token",`key=${i}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return n.emulatorConfig&&Xt(n.emulatorConfig.host)&&(u.credentials="include"),md.fetch()(a,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xE(n,e){return tn(n,"POST","/v2/accounts:revokeToken",en(n,e))}class Hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gl(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$(e.length!==0,"internal-error");const t=Gl(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await OE(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,a=new Hn;return r&&($(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&($(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&($(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hn,this.toJSON())}_performRefresh(){return yt("not implemented")}}function Vt(n,e){$(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class et{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new DE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xo(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Jr(this,this.stsTokenManager.getToken(this.auth,e));return $(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PE(this,e)}reload(){return NE(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new et({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ci(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ge(this.auth.app))return Promise.reject(wt(this.auth));const e=await this.getIdToken();return await Jr(this,CE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,a=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,h=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:b,providerData:P,stsTokenManager:D}=t;$(g&&D,e,"internal-error");const k=Hn.fromJSON(this.name,D);$(typeof g=="string",e,"internal-error"),Vt(r,e.name),Vt(s,e.name),$(typeof _=="boolean",e,"internal-error"),$(typeof b=="boolean",e,"internal-error"),Vt(i,e.name),Vt(a,e.name),Vt(c,e.name),Vt(u,e.name),Vt(h,e.name),Vt(f,e.name);const V=new et({uid:g,auth:e,email:s,emailVerified:_,displayName:r,isAnonymous:b,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:k,createdAt:h,lastLoginAt:f});return P&&Array.isArray(P)&&(V.providerData=P.map(U=>({...U}))),u&&(V._redirectEventId=u),V}static async _fromIdTokenResponse(e,t,r=!1){const s=new Hn;s.updateFromServerResponse(t);const i=new et({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ci(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];$(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?yd(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!i?.length,c=new Hn;c.updateFromIdToken(r);const u=new et({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Xo(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(u,h),u}}const Wl=new Map;function Et(n){vt(n instanceof Function,"Expected a class definition");let e=Wl.get(n);return e?(vt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Wl.set(n,e),e)}class Ed{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ed.type="NONE";const Hl=Ed;function Gs(n,e,t){return`firebase:${n}:${e}:${t}`}class Kn{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Gs(this.userKey,s.apiKey,i),this.fullPersistenceKey=Gs("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ai(this.auth,{idToken:e}).catch(()=>{});return t?et._fromGetAccountInfoResponse(this.auth,t,e):null}return et._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Kn(Et(Hl),e,r);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Et(Hl);const a=Gs(r,e.config.apiKey,e.name);let c=null;for(const h of t)try{const f=await h._get(a);if(f){let g;if(typeof f=="string"){const _=await ai(e,{idToken:f}).catch(()=>{});if(!_)break;g=await et._fromGetAccountInfoResponse(e,_,f)}else g=et._fromJSON(e,f);h!==i&&(c=g),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Kn(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==i)try{await h._remove(a)}catch{}})),new Kn(i,e,r))}}function Kl(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vd(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wd(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bd(e))return"Blackberry";if(Rd(e))return"Webos";if(Id(e))return"Safari";if((e.includes("chrome/")||Td(e))&&!e.includes("edge/"))return"Chrome";if(Ad(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function wd(n=Oe()){return/firefox\//i.test(n)}function Id(n=Oe()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Td(n=Oe()){return/crios\//i.test(n)}function vd(n=Oe()){return/iemobile/i.test(n)}function Ad(n=Oe()){return/android/i.test(n)}function bd(n=Oe()){return/blackberry/i.test(n)}function Rd(n=Oe()){return/webos/i.test(n)}function Va(n=Oe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function LE(n=Oe()){return Va(n)&&!!window.navigator?.standalone}function ME(){return bg()&&document.documentMode===10}function Sd(n=Oe()){return Va(n)||Ad(n)||Rd(n)||bd(n)||/windows phone/i.test(n)||vd(n)}function Cd(n,e=[]){let t;switch(n){case"Browser":t=Kl(Oe());break;case"Worker":t=`${Kl(Oe())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cn}/${r}`}class UE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function FE(n,e={}){return tn(n,"GET","/v2/passwordPolicy",en(n,e))}const BE=6;class jE{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??BE,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class $E{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ql(this),this.idTokenSubscription=new Ql(this),this.beforeStateQueue=new UE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Et(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Kn.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ai(this,{idToken:e}),r=await et._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ge(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,a=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ci(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ge(this.app))return Promise.reject(wt(this));const t=e?ne(e):null;return t&&$(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ge(this.app)?Promise.reject(wt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ge(this.app)?Promise.reject(wt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Et(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FE(this),t=new jE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await xE(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Et(e)||this._popupRedirectResolver;$(t,this,"argument-error"),this.redirectPersistenceManager=await Kn.create(this,[Et(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if($(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(t);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ge(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_E(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Pn(n){return ne(n)}class Ql{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ng(t=>this.observer=t)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ci={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qE(n){Ci=n}function Pd(n){return Ci.loadJS(n)}function zE(){return Ci.recaptchaEnterpriseScript}function GE(){return Ci.gapiScript}function WE(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class HE{constructor(){this.enterprise=new KE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class KE{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const QE="recaptcha-enterprise",kd="NO_RECAPTCHA";class YE{constructor(e){this.type=QE,this.auth=Pn(e)}async verify(e="verify",t=!1){async function r(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{SE(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new RE(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,a(h.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;zl(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{a(h)}).catch(()=>{a(kd)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HE().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!t&&zl(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=zE();u.length!==0&&(u+=c),Pd(u).then(()=>{s(c,i,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}async function Yl(n,e,t,r=!1,s=!1){const i=new YE(n);let a;if(s)a=kd;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Zo(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Yl(n,e,t,t==="getOobCode");return r(n,i)}else return r(n,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Yl(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(i)})}function JE(n,e){const t=Zt(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Gt(i,e??{}))return s;rt(s,"already-initialized")}return t.initialize({options:e})}function XE(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Et);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ZE(n,e,t){const r=Pn(n);$(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Dd(e),{host:a,port:c}=ew(e),u=c===null?"":`:${c}`,h={url:`${i}//${a}${u}/`},f=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){$(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),$(Gt(h,r.config.emulator)&&Gt(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Xt(a)?(Ia(`${i}//${a}${u}`),Ta("Auth",!0)):tw()}function Dd(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ew(n){const e=Dd(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Jl(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Jl(a)}}}function Jl(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function tw(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Oa{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yt("not implemented")}_getIdTokenResponse(e){return yt("not implemented")}_linkToIdToken(e,t){return yt("not implemented")}_getReauthenticationResolver(e){return yt("not implemented")}}async function nw(n,e){return tn(n,"POST","/v1/accounts:signUp",e)}async function rw(n,e){return us(n,"POST","/v1/accounts:signInWithPassword",en(n,e))}async function sw(n,e){return us(n,"POST","/v1/accounts:signInWithEmailLink",en(n,e))}async function iw(n,e){return us(n,"POST","/v1/accounts:signInWithEmailLink",en(n,e))}class Xr extends Oa{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Xr(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Xr(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zo(e,t,"signInWithPassword",rw);case"emailLink":return sw(e,{email:this._email,oobCode:this._password});default:rt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zo(e,r,"signUpPassword",nw);case"emailLink":return iw(e,{idToken:t,email:this._email,oobCode:this._password});default:rt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qn(n,e){return us(n,"POST","/v1/accounts:signInWithIdp",en(n,e))}const ow="http://localhost";class Tn extends Oa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Tn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const a=new Tn(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Qn(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Qn(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qn(e,t)}buildRequest(){const e={requestUri:ow,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=as(t)}return e}}function aw(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cw(n){const e=Lr(Mr(n)).link,t=e?Lr(Mr(e)).deep_link_id:null,r=Lr(Mr(n)).deep_link_id;return(r?Lr(Mr(r)).link:null)||r||t||e||n}class xa{constructor(e){const t=Lr(Mr(e)),r=t.apiKey??null,s=t.oobCode??null,i=aw(t.mode??null);$(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=cw(e);try{return new xa(t)}catch{return null}}}class or{constructor(){this.providerId=or.PROVIDER_ID}static credential(e,t){return Xr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=xa.parseLink(t);return $(r,"argument-error"),Xr._fromEmailAndCode(e,r.code,r.tenantId)}}or.PROVIDER_ID="password";or.EMAIL_PASSWORD_SIGN_IN_METHOD="password";or.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Nd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class hs extends Nd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xt extends hs{constructor(){super("facebook.com")}static credential(e){return Tn._fromParams({providerId:xt.PROVIDER_ID,signInMethod:xt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xt.credentialFromTaggedObject(e)}static credentialFromError(e){return xt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xt.credential(e.oauthAccessToken)}catch{return null}}}xt.FACEBOOK_SIGN_IN_METHOD="facebook.com";xt.PROVIDER_ID="facebook.com";class Lt extends hs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Tn._fromParams({providerId:Lt.PROVIDER_ID,signInMethod:Lt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Lt.credentialFromTaggedObject(e)}static credentialFromError(e){return Lt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Lt.credential(t,r)}catch{return null}}}Lt.GOOGLE_SIGN_IN_METHOD="google.com";Lt.PROVIDER_ID="google.com";class Mt extends hs{constructor(){super("github.com")}static credential(e){return Tn._fromParams({providerId:Mt.PROVIDER_ID,signInMethod:Mt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mt.credentialFromTaggedObject(e)}static credentialFromError(e){return Mt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mt.credential(e.oauthAccessToken)}catch{return null}}}Mt.GITHUB_SIGN_IN_METHOD="github.com";Mt.PROVIDER_ID="github.com";class Ut extends hs{constructor(){super("twitter.com")}static credential(e,t){return Tn._fromParams({providerId:Ut.PROVIDER_ID,signInMethod:Ut.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ut.credentialFromTaggedObject(e)}static credentialFromError(e){return Ut.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ut.credential(t,r)}catch{return null}}}Ut.TWITTER_SIGN_IN_METHOD="twitter.com";Ut.PROVIDER_ID="twitter.com";async function lw(n,e){return us(n,"POST","/v1/accounts:signUp",en(n,e))}class vn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await et._fromIdTokenResponse(e,r,s),a=Xl(r);return new vn({user:i,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Xl(r);return new vn({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Xl(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class li extends Xe{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,li.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new li(e,t,r,s)}}function Vd(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?li._fromErrorAndOperation(n,i,e,r):i})}async function uw(n,e,t=!1){const r=await Jr(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return vn._forOperation(n,"link",r)}async function hw(n,e,t=!1){const{auth:r}=n;if(Ge(r.app))return Promise.reject(wt(r));const s="reauthenticate";try{const i=await Jr(n,Vd(r,s,e,n),t);$(i.idToken,r,"internal-error");const a=Na(i.idToken);$(a,r,"internal-error");const{sub:c}=a;return $(n.uid===c,r,"user-mismatch"),vn._forOperation(n,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&rt(r,"user-mismatch"),i}}async function Od(n,e,t=!1){if(Ge(n.app))return Promise.reject(wt(n));const r="signIn",s=await Vd(n,r,e),i=await vn._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}async function dw(n,e){return Od(Pn(n),e)}async function xd(n){const e=Pn(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function uS(n,e,t){if(Ge(n.app))return Promise.reject(wt(n));const r=Pn(n),a=await Zo(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lw).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&xd(n),u}),c=await vn._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function hS(n,e,t){return Ge(n.app)?Promise.reject(wt(n)):dw(ne(n),or.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xd(n),r})}function fw(n,e,t,r){return ne(n).onIdTokenChanged(e,t,r)}function pw(n,e,t){return ne(n).beforeAuthStateChanged(e,t)}function dS(n,e,t,r){return ne(n).onAuthStateChanged(e,t,r)}function fS(n){return ne(n).signOut()}const ui="__sak";class Ld{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ui,"1"),this.storage.removeItem(ui),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const mw=1e3,gw=10;class Md extends Ld{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);ME()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,gw):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},mw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Md.type="LOCAL";const _w=Md;class Ud extends Ld{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ud.type="SESSION";const Fd=Ud;function yw(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Pi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Pi(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,a=this.handlersMap[s];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async h=>h(t.origin,i)),u=await yw(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pi.receivers=[];function La(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class Ew{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const h=La("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(_.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function ut(){return window}function ww(n){ut().location.href=n}function Bd(){return typeof ut().WorkerGlobalScope<"u"&&typeof ut().importScripts=="function"}async function Iw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tw(){return navigator?.serviceWorker?.controller||null}function vw(){return Bd()?self:null}const jd="firebaseLocalStorageDb",Aw=1,hi="firebaseLocalStorage",$d="fbase_key";class ds{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ki(n,e){return n.transaction([hi],e?"readwrite":"readonly").objectStore(hi)}function bw(){const n=indexedDB.deleteDatabase(jd);return new ds(n).toPromise()}function ea(){const n=indexedDB.open(jd,Aw);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(hi,{keyPath:$d})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(hi)?e(r):(r.close(),await bw(),e(await ea()))})})}async function Zl(n,e,t){const r=ki(n,!0).put({[$d]:e,value:t});return new ds(r).toPromise()}async function Rw(n,e){const t=ki(n,!1).get(e),r=await new ds(t).toPromise();return r===void 0?null:r.value}function eu(n,e){const t=ki(n,!0).delete(e);return new ds(t).toPromise()}const Sw=800,Cw=3;class qd{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ea(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Cw)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pi._getInstance(vw()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Iw(),!this.activeServiceWorker)return;this.sender=new Ew(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Tw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ea();return await Zl(e,ui,"1"),await eu(e,ui),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zl(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Rw(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>eu(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ki(s,!1).getAll();return new ds(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Sw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qd.type="LOCAL";const Pw=qd;new ls(3e4,6e4);function kw(n,e){return e?Et(e):($(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Ma extends Oa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Dw(n){return Od(n.auth,new Ma(n),n.bypassAuthState)}function Nw(n){const{auth:e,user:t}=n;return $(t,e,"internal-error"),hw(t,new Ma(n),n.bypassAuthState)}async function Vw(n){const{auth:e,user:t}=n;return $(t,e,"internal-error"),uw(t,new Ma(n),n.bypassAuthState)}class zd{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dw;case"linkViaPopup":case"linkViaRedirect":return Vw;case"reauthViaPopup":case"reauthViaRedirect":return Nw;default:rt(this.auth,"internal-error")}}resolve(e){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ow=new ls(2e3,1e4);class Gn extends zd{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Gn.currentPopupAction&&Gn.currentPopupAction.cancel(),Gn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $(e,this.auth,"internal-error"),e}async onExecution(){vt(this.filter.length===1,"Popup operations only handle one event");const e=La();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gn.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ow.get())};e()}}Gn.currentPopupAction=null;const xw="pendingRedirect",Ws=new Map;class Lw extends zd{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ws.get(this.auth._key());if(!e){try{const r=await Mw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ws.set(this.auth._key(),e)}return this.bypassAuthState||Ws.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Mw(n,e){const t=Bw(e),r=Fw(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function Uw(n,e){Ws.set(n._key(),e)}function Fw(n){return Et(n._redirectPersistence)}function Bw(n){return Gs(xw,n.config.apiKey,n.name)}async function jw(n,e,t=!1){if(Ge(n.app))return Promise.reject(wt(n));const r=Pn(n),s=kw(r,e),a=await new Lw(r,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const $w=600*1e3;class qw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zw(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Gd(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(lt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$w&&this.cachedEventUids.clear(),this.cachedEventUids.has(tu(e))}saveEventToCache(e){this.cachedEventUids.add(tu(e)),this.lastProcessedEventTime=Date.now()}}function tu(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Gd({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function zw(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gd(n);default:return!1}}async function Gw(n,e={}){return tn(n,"GET","/v1/projects",e)}const Ww=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hw=/^https?/;async function Kw(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Gw(n);for(const t of e)try{if(Qw(t))return}catch{}rt(n,"unauthorized-domain")}function Qw(n){const e=Jo(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Hw.test(t))return!1;if(Ww.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Yw=new ls(3e4,6e4);function nu(){const n=ut().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Jw(n){return new Promise((e,t)=>{function r(){nu(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nu(),t(lt(n,"network-request-failed"))},timeout:Yw.get()})}if(ut().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ut().gapi?.load)r();else{const s=WE("iframefcb");return ut()[s]=()=>{gapi.load?r():t(lt(n,"network-request-failed"))},Pd(`${GE()}?onload=${s}`).catch(i=>t(i))}}).catch(e=>{throw Hs=null,e})}let Hs=null;function Xw(n){return Hs=Hs||Jw(n),Hs}const Zw=new ls(5e3,15e3),eI="__/auth/iframe",tI="emulator/auth/iframe",nI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sI(n){const e=n.config;$(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Da(e,tI):`https://${n.config.authDomain}/${eI}`,r={apiKey:e.apiKey,appName:n.name,v:Cn},s=rI.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${as(r).slice(1)}`}async function iI(n){const e=await Xw(n),t=ut().gapi;return $(t,n,"internal-error"),e.open({where:document.body,url:sI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nI,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=lt(n,"network-request-failed"),c=ut().setTimeout(()=>{i(a)},Zw.get());function u(){ut().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}const oI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aI=500,cI=600,lI="_blank",uI="http://localhost";class ru{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hI(n,e,t,r=aI,s=cI){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...oI,width:r.toString(),height:s.toString(),top:i,left:a},h=Oe().toLowerCase();t&&(c=Td(h)?lI:t),wd(h)&&(e=e||uI,u.scrollbars="yes");const f=Object.entries(u).reduce((_,[b,P])=>`${_}${b}=${P},`,"");if(LE(h)&&c!=="_self")return dI(e||"",c),new ru(null);const g=window.open(e||"",c,f);$(g,n,"popup-blocked");try{g.focus()}catch{}return new ru(g)}function dI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const fI="__/auth/handler",pI="emulator/auth/handler",mI=encodeURIComponent("fac");async function su(n,e,t,r,s,i){$(n.config.authDomain,n,"auth-domain-config-required"),$(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Cn,eventId:s};if(e instanceof Nd){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Dg(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))a[f]=g}if(e instanceof hs){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await n._getAppCheckToken(),h=u?`#${mI}=${encodeURIComponent(u)}`:"";return`${gI(n)}?${as(c).slice(1)}${h}`}function gI({config:n}){return n.emulator?Da(n,pI):`https://${n.authDomain}/${fI}`}const Co="webStorageSupport";class _I{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fd,this._completeRedirectFn=jw,this._overrideRedirectResult=Uw}async _openPopup(e,t,r,s){vt(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await su(e,t,r,Jo(),s);return hI(e,i,La())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await su(e,t,r,Jo(),s);return ww(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(vt(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await iI(e),r=new qw(e);return t.register("authEvent",s=>($(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Co,{type:Co},s=>{const i=s?.[0]?.[Co];i!==void 0&&t(!!i),rt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Kw(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Sd()||Id()||Va()}}const yI=_I;var iu="@firebase/auth",ou="1.12.0";class EI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function II(n){nt(new Ye("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;$(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cd(n)},h=new $E(r,s,i,u);return XE(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),nt(new Ye("auth-internal",e=>{const t=Pn(e.getProvider("auth").getImmediate());return(r=>new EI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qe(iu,ou,wI(n)),qe(iu,ou,"esm2020")}const TI=300,vI=Oh("authIdTokenMaxAge")||TI;let au=null;const AI=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>vI)return;const s=t?.token;au!==s&&(au=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bI(n=cs()){const e=Zt(n,"auth");if(e.isInitialized())return e.getImmediate();const t=JE(n,{popupRedirectResolver:yI,persistence:[Pw,_w,Fd]}),r=Oh("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=AI(i.toString());pw(t,a,()=>a(t.currentUser)),fw(t,c=>a(c))}}const s=Dh("auth");return s&&ZE(t,`http://${s}`),t}function RI(){return document.getElementsByTagName("head")?.[0]??document}qE({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=lt("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",RI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});II("Browser");var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qt,Wd;(function(){var n;function e(I,m){function y(){}y.prototype=m.prototype,I.F=m.prototype,I.prototype=new y,I.prototype.constructor=I,I.D=function(T,w,v){for(var E=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)E[Ie-2]=arguments[Ie];return m.prototype[w].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,m,y){y||(y=0);const T=Array(16);if(typeof m=="string")for(var w=0;w<16;++w)T[w]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(w=0;w<16;++w)T[w]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=I.g[0],y=I.g[1],w=I.g[2];let v=I.g[3],E;E=m+(v^y&(w^v))+T[0]+3614090360&4294967295,m=y+(E<<7&4294967295|E>>>25),E=v+(w^m&(y^w))+T[1]+3905402710&4294967295,v=m+(E<<12&4294967295|E>>>20),E=w+(y^v&(m^y))+T[2]+606105819&4294967295,w=v+(E<<17&4294967295|E>>>15),E=y+(m^w&(v^m))+T[3]+3250441966&4294967295,y=w+(E<<22&4294967295|E>>>10),E=m+(v^y&(w^v))+T[4]+4118548399&4294967295,m=y+(E<<7&4294967295|E>>>25),E=v+(w^m&(y^w))+T[5]+1200080426&4294967295,v=m+(E<<12&4294967295|E>>>20),E=w+(y^v&(m^y))+T[6]+2821735955&4294967295,w=v+(E<<17&4294967295|E>>>15),E=y+(m^w&(v^m))+T[7]+4249261313&4294967295,y=w+(E<<22&4294967295|E>>>10),E=m+(v^y&(w^v))+T[8]+1770035416&4294967295,m=y+(E<<7&4294967295|E>>>25),E=v+(w^m&(y^w))+T[9]+2336552879&4294967295,v=m+(E<<12&4294967295|E>>>20),E=w+(y^v&(m^y))+T[10]+4294925233&4294967295,w=v+(E<<17&4294967295|E>>>15),E=y+(m^w&(v^m))+T[11]+2304563134&4294967295,y=w+(E<<22&4294967295|E>>>10),E=m+(v^y&(w^v))+T[12]+1804603682&4294967295,m=y+(E<<7&4294967295|E>>>25),E=v+(w^m&(y^w))+T[13]+4254626195&4294967295,v=m+(E<<12&4294967295|E>>>20),E=w+(y^v&(m^y))+T[14]+2792965006&4294967295,w=v+(E<<17&4294967295|E>>>15),E=y+(m^w&(v^m))+T[15]+1236535329&4294967295,y=w+(E<<22&4294967295|E>>>10),E=m+(w^v&(y^w))+T[1]+4129170786&4294967295,m=y+(E<<5&4294967295|E>>>27),E=v+(y^w&(m^y))+T[6]+3225465664&4294967295,v=m+(E<<9&4294967295|E>>>23),E=w+(m^y&(v^m))+T[11]+643717713&4294967295,w=v+(E<<14&4294967295|E>>>18),E=y+(v^m&(w^v))+T[0]+3921069994&4294967295,y=w+(E<<20&4294967295|E>>>12),E=m+(w^v&(y^w))+T[5]+3593408605&4294967295,m=y+(E<<5&4294967295|E>>>27),E=v+(y^w&(m^y))+T[10]+38016083&4294967295,v=m+(E<<9&4294967295|E>>>23),E=w+(m^y&(v^m))+T[15]+3634488961&4294967295,w=v+(E<<14&4294967295|E>>>18),E=y+(v^m&(w^v))+T[4]+3889429448&4294967295,y=w+(E<<20&4294967295|E>>>12),E=m+(w^v&(y^w))+T[9]+568446438&4294967295,m=y+(E<<5&4294967295|E>>>27),E=v+(y^w&(m^y))+T[14]+3275163606&4294967295,v=m+(E<<9&4294967295|E>>>23),E=w+(m^y&(v^m))+T[3]+4107603335&4294967295,w=v+(E<<14&4294967295|E>>>18),E=y+(v^m&(w^v))+T[8]+1163531501&4294967295,y=w+(E<<20&4294967295|E>>>12),E=m+(w^v&(y^w))+T[13]+2850285829&4294967295,m=y+(E<<5&4294967295|E>>>27),E=v+(y^w&(m^y))+T[2]+4243563512&4294967295,v=m+(E<<9&4294967295|E>>>23),E=w+(m^y&(v^m))+T[7]+1735328473&4294967295,w=v+(E<<14&4294967295|E>>>18),E=y+(v^m&(w^v))+T[12]+2368359562&4294967295,y=w+(E<<20&4294967295|E>>>12),E=m+(y^w^v)+T[5]+4294588738&4294967295,m=y+(E<<4&4294967295|E>>>28),E=v+(m^y^w)+T[8]+2272392833&4294967295,v=m+(E<<11&4294967295|E>>>21),E=w+(v^m^y)+T[11]+1839030562&4294967295,w=v+(E<<16&4294967295|E>>>16),E=y+(w^v^m)+T[14]+4259657740&4294967295,y=w+(E<<23&4294967295|E>>>9),E=m+(y^w^v)+T[1]+2763975236&4294967295,m=y+(E<<4&4294967295|E>>>28),E=v+(m^y^w)+T[4]+1272893353&4294967295,v=m+(E<<11&4294967295|E>>>21),E=w+(v^m^y)+T[7]+4139469664&4294967295,w=v+(E<<16&4294967295|E>>>16),E=y+(w^v^m)+T[10]+3200236656&4294967295,y=w+(E<<23&4294967295|E>>>9),E=m+(y^w^v)+T[13]+681279174&4294967295,m=y+(E<<4&4294967295|E>>>28),E=v+(m^y^w)+T[0]+3936430074&4294967295,v=m+(E<<11&4294967295|E>>>21),E=w+(v^m^y)+T[3]+3572445317&4294967295,w=v+(E<<16&4294967295|E>>>16),E=y+(w^v^m)+T[6]+76029189&4294967295,y=w+(E<<23&4294967295|E>>>9),E=m+(y^w^v)+T[9]+3654602809&4294967295,m=y+(E<<4&4294967295|E>>>28),E=v+(m^y^w)+T[12]+3873151461&4294967295,v=m+(E<<11&4294967295|E>>>21),E=w+(v^m^y)+T[15]+530742520&4294967295,w=v+(E<<16&4294967295|E>>>16),E=y+(w^v^m)+T[2]+3299628645&4294967295,y=w+(E<<23&4294967295|E>>>9),E=m+(w^(y|~v))+T[0]+4096336452&4294967295,m=y+(E<<6&4294967295|E>>>26),E=v+(y^(m|~w))+T[7]+1126891415&4294967295,v=m+(E<<10&4294967295|E>>>22),E=w+(m^(v|~y))+T[14]+2878612391&4294967295,w=v+(E<<15&4294967295|E>>>17),E=y+(v^(w|~m))+T[5]+4237533241&4294967295,y=w+(E<<21&4294967295|E>>>11),E=m+(w^(y|~v))+T[12]+1700485571&4294967295,m=y+(E<<6&4294967295|E>>>26),E=v+(y^(m|~w))+T[3]+2399980690&4294967295,v=m+(E<<10&4294967295|E>>>22),E=w+(m^(v|~y))+T[10]+4293915773&4294967295,w=v+(E<<15&4294967295|E>>>17),E=y+(v^(w|~m))+T[1]+2240044497&4294967295,y=w+(E<<21&4294967295|E>>>11),E=m+(w^(y|~v))+T[8]+1873313359&4294967295,m=y+(E<<6&4294967295|E>>>26),E=v+(y^(m|~w))+T[15]+4264355552&4294967295,v=m+(E<<10&4294967295|E>>>22),E=w+(m^(v|~y))+T[6]+2734768916&4294967295,w=v+(E<<15&4294967295|E>>>17),E=y+(v^(w|~m))+T[13]+1309151649&4294967295,y=w+(E<<21&4294967295|E>>>11),E=m+(w^(y|~v))+T[4]+4149444226&4294967295,m=y+(E<<6&4294967295|E>>>26),E=v+(y^(m|~w))+T[11]+3174756917&4294967295,v=m+(E<<10&4294967295|E>>>22),E=w+(m^(v|~y))+T[2]+718787259&4294967295,w=v+(E<<15&4294967295|E>>>17),E=y+(v^(w|~m))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+m&4294967295,I.g[1]=I.g[1]+(w+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+v&4294967295}r.prototype.v=function(I,m){m===void 0&&(m=I.length);const y=m-this.blockSize,T=this.C;let w=this.h,v=0;for(;v<m;){if(w==0)for(;v<=y;)s(this,I,v),v+=this.blockSize;if(typeof I=="string"){for(;v<m;)if(T[w++]=I.charCodeAt(v++),w==this.blockSize){s(this,T),w=0;break}}else for(;v<m;)if(T[w++]=I[v++],w==this.blockSize){s(this,T),w=0;break}}this.h=w,this.o+=m},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var m=1;m<I.length-8;++m)I[m]=0;m=this.o*8;for(var y=I.length-8;y<I.length;++y)I[y]=m&255,m/=256;for(this.v(I),I=Array(16),m=0,y=0;y<4;++y)for(let T=0;T<32;T+=8)I[m++]=this.g[y]>>>T&255;return I};function i(I,m){var y=c;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=m(I)}function a(I,m){this.h=m;const y=[];let T=!0;for(let w=I.length-1;w>=0;w--){const v=I[w]|0;T&&v==m||(y[w]=v,T=!1)}this.g=y}var c={};function u(I){return-128<=I&&I<128?i(I,function(m){return new a([m|0],m<0?-1:0)}):new a([I|0],I<0?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return g;if(I<0)return k(h(-I));const m=[];let y=1;for(let T=0;I>=y;T++)m[T]=I/y|0,y*=4294967296;return new a(m,0)}function f(I,m){if(I.length==0)throw Error("number format error: empty string");if(m=m||10,m<2||36<m)throw Error("radix out of range: "+m);if(I.charAt(0)=="-")return k(f(I.substring(1),m));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=h(Math.pow(m,8));let T=g;for(let v=0;v<I.length;v+=8){var w=Math.min(8,I.length-v);const E=parseInt(I.substring(v,v+w),m);w<8?(w=h(Math.pow(m,w)),T=T.j(w).add(h(E))):(T=T.j(y),T=T.add(h(E)))}return T}var g=u(0),_=u(1),b=u(16777216);n=a.prototype,n.m=function(){if(D(this))return-k(this).m();let I=0,m=1;for(let y=0;y<this.g.length;y++){const T=this.i(y);I+=(T>=0?T:4294967296+T)*m,m*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(P(this))return"0";if(D(this))return"-"+k(this).toString(I);const m=h(Math.pow(I,6));var y=this;let T="";for(;;){const w=W(y,m).g;y=V(y,w.j(m));let v=((y.g.length>0?y.g[0]:y.h)>>>0).toString(I);if(y=w,P(y))return v+T;for(;v.length<6;)v="0"+v;T=v+T}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function P(I){if(I.h!=0)return!1;for(let m=0;m<I.g.length;m++)if(I.g[m]!=0)return!1;return!0}function D(I){return I.h==-1}n.l=function(I){return I=V(this,I),D(I)?-1:P(I)?0:1};function k(I){const m=I.g.length,y=[];for(let T=0;T<m;T++)y[T]=~I.g[T];return new a(y,~I.h).add(_)}n.abs=function(){return D(this)?k(this):this},n.add=function(I){const m=Math.max(this.g.length,I.g.length),y=[];let T=0;for(let w=0;w<=m;w++){let v=T+(this.i(w)&65535)+(I.i(w)&65535),E=(v>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);T=E>>>16,v&=65535,E&=65535,y[w]=E<<16|v}return new a(y,y[y.length-1]&-2147483648?-1:0)};function V(I,m){return I.add(k(m))}n.j=function(I){if(P(this)||P(I))return g;if(D(this))return D(I)?k(this).j(k(I)):k(k(this).j(I));if(D(I))return k(this.j(k(I)));if(this.l(b)<0&&I.l(b)<0)return h(this.m()*I.m());const m=this.g.length+I.g.length,y=[];for(var T=0;T<2*m;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(let w=0;w<I.g.length;w++){const v=this.i(T)>>>16,E=this.i(T)&65535,Ie=I.i(w)>>>16,Be=I.i(w)&65535;y[2*T+2*w]+=E*Be,U(y,2*T+2*w),y[2*T+2*w+1]+=v*Be,U(y,2*T+2*w+1),y[2*T+2*w+1]+=E*Ie,U(y,2*T+2*w+1),y[2*T+2*w+2]+=v*Ie,U(y,2*T+2*w+2)}for(I=0;I<m;I++)y[I]=y[2*I+1]<<16|y[2*I];for(I=m;I<2*m;I++)y[I]=0;return new a(y,0)};function U(I,m){for(;(I[m]&65535)!=I[m];)I[m+1]+=I[m]>>>16,I[m]&=65535,m++}function F(I,m){this.g=I,this.h=m}function W(I,m){if(P(m))throw Error("division by zero");if(P(I))return new F(g,g);if(D(I))return m=W(k(I),m),new F(k(m.g),k(m.h));if(D(m))return m=W(I,k(m)),new F(k(m.g),m.h);if(I.g.length>30){if(D(I)||D(m))throw Error("slowDivide_ only works with positive integers.");for(var y=_,T=m;T.l(I)<=0;)y=ee(y),T=ee(T);var w=X(y,1),v=X(T,1);for(T=X(T,2),y=X(y,2);!P(T);){var E=v.add(T);E.l(I)<=0&&(w=w.add(y),v=E),T=X(T,1),y=X(y,1)}return m=V(I,w.j(m)),new F(w,m)}for(w=g;I.l(m)>=0;){for(y=Math.max(1,Math.floor(I.m()/m.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),v=h(y),E=v.j(m);D(E)||E.l(I)>0;)y-=T,v=h(y),E=v.j(m);P(v)&&(v=_),w=w.add(v),I=V(I,E)}return new F(w,I)}n.B=function(I){return W(this,I).h},n.and=function(I){const m=Math.max(this.g.length,I.g.length),y=[];for(let T=0;T<m;T++)y[T]=this.i(T)&I.i(T);return new a(y,this.h&I.h)},n.or=function(I){const m=Math.max(this.g.length,I.g.length),y=[];for(let T=0;T<m;T++)y[T]=this.i(T)|I.i(T);return new a(y,this.h|I.h)},n.xor=function(I){const m=Math.max(this.g.length,I.g.length),y=[];for(let T=0;T<m;T++)y[T]=this.i(T)^I.i(T);return new a(y,this.h^I.h)};function ee(I){const m=I.g.length+1,y=[];for(let T=0;T<m;T++)y[T]=I.i(T)<<1|I.i(T-1)>>>31;return new a(y,I.h)}function X(I,m){const y=m>>5;m%=32;const T=I.g.length-y,w=[];for(let v=0;v<T;v++)w[v]=m>0?I.i(v+y)>>>m|I.i(v+y+1)<<32-m:I.i(v+y);return new a(w,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Wd=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,qt=a}).apply(typeof cu<"u"?cu:typeof self<"u"?self:typeof window<"u"?window:{});var xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Hd,Ur,Kd,Ks,ta,Qd,Yd,Jd;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof xs=="object"&&xs];for(var l=0;l<o.length;++l){var d=o[l];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function s(o,l){if(l)e:{var d=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var A=o[p];if(!(A in d))break e;d=d[A]}o=o[o.length-1],p=d[o],l=l(p),l!=p&&l!=null&&e(d,o,{configurable:!0,writable:!0,value:l})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(l){var d=[],p;for(p in l)Object.prototype.hasOwnProperty.call(l,p)&&d.push([p,l[p]]);return d}});var i=i||{},a=this||self;function c(o){var l=typeof o;return l=="object"&&o!=null||l=="function"}function u(o,l,d){return o.call.apply(o.bind,arguments)}function h(o,l,d){return h=u,h.apply(null,arguments)}function f(o,l){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function g(o,l){function d(){}d.prototype=l.prototype,o.Z=l.prototype,o.prototype=new d,o.prototype.constructor=o,o.Ob=function(p,A,R){for(var N=Array(arguments.length-2),H=2;H<arguments.length;H++)N[H-2]=arguments[H];return l.prototype[A].apply(p,N)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function b(o){const l=o.length;if(l>0){const d=Array(l);for(let p=0;p<l;p++)d[p]=o[p];return d}return[]}function P(o,l){for(let p=1;p<arguments.length;p++){const A=arguments[p];var d=typeof A;if(d=d!="object"?d:A?Array.isArray(A)?"array":d:"null",d=="array"||d=="object"&&typeof A.length=="number"){d=o.length||0;const R=A.length||0;o.length=d+R;for(let N=0;N<R;N++)o[d+N]=A[N]}else o.push(A)}}class D{constructor(l,d){this.i=l,this.j=d,this.h=0,this.g=null}get(){let l;return this.h>0?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function k(o){a.setTimeout(()=>{throw o},0)}function V(){var o=I;let l=null;return o.g&&(l=o.g,o.g=o.g.next,o.g||(o.h=null),l.next=null),l}class U{constructor(){this.h=this.g=null}add(l,d){const p=F.get();p.set(l,d),this.h?this.h.next=p:this.g=p,this.h=p}}var F=new D(()=>new W,o=>o.reset());class W{constructor(){this.next=this.g=this.h=null}set(l,d){this.h=l,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,X=!1,I=new U,m=()=>{const o=Promise.resolve(void 0);ee=()=>{o.then(y)}};function y(){for(var o;o=V();){try{o.h.call(o.g)}catch(d){k(d)}var l=F;l.j(o),l.h<100&&(l.h++,o.next=l.g,l.g=o)}X=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(o,l){this.type=o,this.g=this.target=l,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var v=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,l=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};a.addEventListener("test",d,l),a.removeEventListener("test",d,l)}catch{}return o})();function E(o){return/^[\s\xa0]*$/.test(o)}function Ie(o,l){w.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,l)}g(Ie,w),Ie.prototype.init=function(o,l){const d=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=l,l=o.relatedTarget,l||(d=="mouseover"?l=o.fromElement:d=="mouseout"&&(l=o.toElement)),this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Be="closure_listenable_"+(Math.random()*1e6|0),Ze=0;function mt(o,l,d,p,A){this.listener=o,this.proxy=null,this.src=l,this.type=d,this.capture=!!p,this.ha=A,this.key=++Ze,this.da=this.fa=!1}function j(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function on(o,l,d){for(const p in o)l.call(d,o[p],p,o)}function Is(o,l){for(const d in o)l.call(void 0,o[d],d,o)}function pr(o){const l={};for(const d in o)l[d]=o[d];return l}const Vn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(o,l){let d,p;for(let A=1;A<arguments.length;A++){p=arguments[A];for(d in p)o[d]=p[d];for(let R=0;R<Vn.length;R++)d=Vn[R],Object.prototype.hasOwnProperty.call(p,d)&&(o[d]=p[d])}}function ve(o){this.src=o,this.g={},this.h=0}ve.prototype.add=function(o,l,d,p,A){const R=o.toString();o=this.g[R],o||(o=this.g[R]=[],this.h++);const N=On(o,l,p,A);return N>-1?(l=o[N],d||(l.fa=!1)):(l=new mt(l,this.src,R,!!p,A),l.fa=d,o.push(l)),l};function Rt(o,l){const d=l.type;if(d in o.g){var p=o.g[d],A=Array.prototype.indexOf.call(p,l,void 0),R;(R=A>=0)&&Array.prototype.splice.call(p,A,1),R&&(j(l),o.g[d].length==0&&(delete o.g[d],o.h--))}}function On(o,l,d,p){for(let A=0;A<o.length;++A){const R=o[A];if(!R.da&&R.listener==l&&R.capture==!!d&&R.ha==p)return A}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),xn={};function an(o,l,d,p,A){if(Array.isArray(l)){for(let R=0;R<l.length;R++)an(o,l[R],d,p,A);return null}return d=Rc(d),o&&o[Be]?o.J(l,d,c(p)?!!p.capture:!1,A):Ln(o,l,d,!1,p,A)}function Ln(o,l,d,p,A,R){if(!l)throw Error("Invalid event type");const N=c(A)?!!A.capture:!!A;let H=Xi(o);if(H||(o[ce]=H=new ve(o)),d=H.add(l,d,p,N,R),d.proxy)return d;if(p=mr(),d.proxy=p,p.src=o,p.listener=d,o.addEventListener)v||(A=N),A===void 0&&(A=!1),o.addEventListener(l.toString(),p,A);else if(o.attachEvent)o.attachEvent(bc(l.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function mr(){function o(d){return l.call(o.src,o.listener,d)}const l=am;return o}function cn(o,l,d,p,A){if(Array.isArray(l))for(var R=0;R<l.length;R++)cn(o,l[R],d,p,A);else p=c(p)?!!p.capture:!!p,d=Rc(d),o&&o[Be]?(o=o.i,R=String(l).toString(),R in o.g&&(l=o.g[R],d=On(l,d,p,A),d>-1&&(j(l[d]),Array.prototype.splice.call(l,d,1),l.length==0&&(delete o.g[R],o.h--)))):o&&(o=Xi(o))&&(l=o.g[l.toString()],o=-1,l&&(o=On(l,d,p,A)),(d=o>-1?l[o]:null)&&Ji(d))}function Ji(o){if(typeof o!="number"&&o&&!o.da){var l=o.src;if(l&&l[Be])Rt(l.i,o);else{var d=o.type,p=o.proxy;l.removeEventListener?l.removeEventListener(d,p,o.capture):l.detachEvent?l.detachEvent(bc(d),p):l.addListener&&l.removeListener&&l.removeListener(p),(d=Xi(l))?(Rt(d,o),d.h==0&&(d.src=null,l[ce]=null)):j(o)}}}function bc(o){return o in xn?xn[o]:xn[o]="on"+o}function am(o,l){if(o.da)o=!0;else{l=new Ie(l,this);const d=o.listener,p=o.ha||o.src;o.fa&&Ji(o),o=d.call(p,l)}return o}function Xi(o){return o=o[ce],o instanceof ve?o:null}var Zi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rc(o){return typeof o=="function"?o:(o[Zi]||(o[Zi]=function(l){return o.handleEvent(l)}),o[Zi])}function Pe(){T.call(this),this.i=new ve(this),this.M=this,this.G=null}g(Pe,T),Pe.prototype[Be]=!0,Pe.prototype.removeEventListener=function(o,l,d,p){cn(this,o,l,d,p)};function xe(o,l){var d,p=o.G;if(p)for(d=[];p;p=p.G)d.push(p);if(o=o.M,p=l.type||l,typeof l=="string")l=new w(l,o);else if(l instanceof w)l.target=l.target||o;else{var A=l;l=new w(p,o),Te(l,A)}A=!0;let R,N;if(d)for(N=d.length-1;N>=0;N--)R=l.g=d[N],A=Ts(R,p,!0,l)&&A;if(R=l.g=o,A=Ts(R,p,!0,l)&&A,A=Ts(R,p,!1,l)&&A,d)for(N=0;N<d.length;N++)R=l.g=d[N],A=Ts(R,p,!1,l)&&A}Pe.prototype.N=function(){if(Pe.Z.N.call(this),this.i){var o=this.i;for(const l in o.g){const d=o.g[l];for(let p=0;p<d.length;p++)j(d[p]);delete o.g[l],o.h--}}this.G=null},Pe.prototype.J=function(o,l,d,p){return this.i.add(String(o),l,!1,d,p)},Pe.prototype.K=function(o,l,d,p){return this.i.add(String(o),l,!0,d,p)};function Ts(o,l,d,p){if(l=o.i.g[String(l)],!l)return!0;l=l.concat();let A=!0;for(let R=0;R<l.length;++R){const N=l[R];if(N&&!N.da&&N.capture==d){const H=N.listener,ye=N.ha||N.src;N.fa&&Rt(o.i,N),A=H.call(ye,p)!==!1&&A}}return A&&!p.defaultPrevented}function cm(o,l){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(l)>2147483647?-1:a.setTimeout(o,l||0)}function Sc(o){o.g=cm(()=>{o.g=null,o.i&&(o.i=!1,Sc(o))},o.l);const l=o.h;o.h=null,o.m.apply(null,l)}class lm extends T{constructor(l,d){super(),this.m=l,this.l=d,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:Sc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(o){T.call(this),this.h=o,this.g={}}g(gr,T);var Cc=[];function Pc(o){on(o.g,function(l,d){this.g.hasOwnProperty(d)&&Ji(l)},o),o.g={}}gr.prototype.N=function(){gr.Z.N.call(this),Pc(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var eo=a.JSON.stringify,um=a.JSON.parse,hm=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function kc(){}function Dc(){}var _r={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function to(){w.call(this,"d")}g(to,w);function no(){w.call(this,"c")}g(no,w);var ln={},Nc=null;function vs(){return Nc=Nc||new Pe}ln.Ia="serverreachability";function Vc(o){w.call(this,ln.Ia,o)}g(Vc,w);function yr(o){const l=vs();xe(l,new Vc(l))}ln.STAT_EVENT="statevent";function Oc(o,l){w.call(this,ln.STAT_EVENT,o),this.stat=l}g(Oc,w);function Le(o){const l=vs();xe(l,new Oc(l,o))}ln.Ja="timingevent";function xc(o,l){w.call(this,ln.Ja,o),this.size=l}g(xc,w);function Er(o,l){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},l)}function wr(){this.g=!0}wr.prototype.ua=function(){this.g=!1};function dm(o,l,d,p,A,R){o.info(function(){if(o.g)if(R){var N="",H=R.split("&");for(let re=0;re<H.length;re++){var ye=H[re].split("=");if(ye.length>1){const Ae=ye[0];ye=ye[1];const ot=Ae.split("_");N=ot.length>=2&&ot[1]=="type"?N+(Ae+"="+ye+"&"):N+(Ae+"=redacted&")}}}else N=null;else N=R;return"XMLHTTP REQ ("+p+") [attempt "+A+"]: "+l+`
`+d+`
`+N})}function fm(o,l,d,p,A,R,N){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+A+"]: "+l+`
`+d+`
`+R+" "+N})}function Mn(o,l,d,p){o.info(function(){return"XMLHTTP TEXT ("+l+"): "+mm(o,d)+(p?" "+p:"")})}function pm(o,l){o.info(function(){return"TIMEOUT: "+l})}wr.prototype.info=function(){};function mm(o,l){if(!o.g)return l;if(!l)return null;try{const R=JSON.parse(l);if(R){for(o=0;o<R.length;o++)if(Array.isArray(R[o])){var d=R[o];if(!(d.length<2)){var p=d[1];if(Array.isArray(p)&&!(p.length<1)){var A=p[0];if(A!="noop"&&A!="stop"&&A!="close")for(let N=1;N<p.length;N++)p[N]=""}}}}return eo(R)}catch{return l}}var As={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mc;function ro(){}g(ro,kc),ro.prototype.g=function(){return new XMLHttpRequest},Mc=new ro;function Ir(o){return encodeURIComponent(String(o))}function gm(o){var l=1;o=o.split(":");const d=[];for(;l>0&&o.length;)d.push(o.shift()),l--;return o.length&&d.push(o.join(":")),d}function St(o,l,d,p){this.j=o,this.i=l,this.l=d,this.S=p||1,this.V=new gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Uc}function Uc(){this.i=null,this.g="",this.h=!1}var Fc={},so={};function io(o,l,d){o.M=1,o.A=Rs(it(l)),o.u=d,o.R=!0,Bc(o,null)}function Bc(o,l){o.F=Date.now(),bs(o),o.B=it(o.A);var d=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),Zc(d.i,"t",p),o.C=0,d=o.j.L,o.h=new Uc,o.g=_l(o.j,d?l:null,!o.u),o.P>0&&(o.O=new lm(h(o.Y,o,o.g),o.P)),l=o.V,d=o.g,p=o.ba;var A="readystatechange";Array.isArray(A)||(A&&(Cc[0]=A.toString()),A=Cc);for(let R=0;R<A.length;R++){const N=an(d,A[R],p||l.handleEvent,!1,l.h||l);if(!N)break;l.g[N.key]=N}l=o.J?pr(o.J):{},o.u?(o.v||(o.v="POST"),l["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,l)):(o.v="GET",o.g.ea(o.B,o.v,null,l)),yr(),dm(o.i,o.v,o.B,o.l,o.S,o.u)}St.prototype.ba=function(o){o=o.target;const l=this.O;l&&kt(o)==3?l.j():this.Y(o)},St.prototype.Y=function(o){try{if(o==this.g)e:{const H=kt(this.g),ye=this.g.ya(),re=this.g.ca();if(!(H<3)&&(H!=3||this.g&&(this.h.h||this.g.la()||ol(this.g)))){this.K||H!=4||ye==7||(ye==8||re<=0?yr(3):yr(2)),oo(this);var l=this.g.ca();this.X=l;var d=_m(this);if(this.o=l==200,fm(this.i,this.v,this.B,this.l,this.S,H,l),this.o){if(this.U&&!this.L){t:{if(this.g){var p,A=this.g;if((p=A.g?A.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(p)){var R=p;break t}}R=null}if(o=R)Mn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ao(this,o);else{this.o=!1,this.m=3,Le(12),un(this),Tr(this);break e}}if(this.R){o=!0;let Ae;for(;!this.K&&this.C<d.length;)if(Ae=ym(this,d),Ae==so){H==4&&(this.m=4,Le(14),o=!1),Mn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ae==Fc){this.m=4,Le(15),Mn(this.i,this.l,d,"[Invalid Chunk]"),o=!1;break}else Mn(this.i,this.l,Ae,null),ao(this,Ae);if(jc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),H!=4||d.length!=0||this.h.h||(this.m=1,Le(16),o=!1),this.o=this.o&&o,!o)Mn(this.i,this.l,d,"[Invalid Chunked Response]"),un(this),Tr(this);else if(d.length>0&&!this.W){this.W=!0;var N=this.j;N.g==this&&N.aa&&!N.P&&(N.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),go(N),N.P=!0,Le(11))}}else Mn(this.i,this.l,d,null),ao(this,d);H==4&&un(this),this.o&&!this.K&&(H==4?fl(this.j,this):(this.o=!1,bs(this)))}else Nm(this.g),l==400&&d.indexOf("Unknown SID")>0?(this.m=3,Le(12)):(this.m=0,Le(13)),un(this),Tr(this)}}}catch{}};function _m(o){if(!jc(o))return o.g.la();const l=ol(o.g);if(l==="")return"";let d="";const p=l.length,A=kt(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return un(o),Tr(o),"";o.h.i=new a.TextDecoder}for(let R=0;R<p;R++)o.h.h=!0,d+=o.h.i.decode(l[R],{stream:!(A&&R==p-1)});return l.length=0,o.h.g+=d,o.C=0,o.h.g}function jc(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function ym(o,l){var d=o.C,p=l.indexOf(`
`,d);return p==-1?so:(d=Number(l.substring(d,p)),isNaN(d)?Fc:(p+=1,p+d>l.length?so:(l=l.slice(p,p+d),o.C=p+d,l)))}St.prototype.cancel=function(){this.K=!0,un(this)};function bs(o){o.T=Date.now()+o.H,$c(o,o.H)}function $c(o,l){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Er(h(o.aa,o),l)}function oo(o){o.D&&(a.clearTimeout(o.D),o.D=null)}St.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(pm(this.i,this.B),this.M!=2&&(yr(),Le(17)),un(this),this.m=2,Tr(this)):$c(this,this.T-o)};function Tr(o){o.j.I==0||o.K||fl(o.j,o)}function un(o){oo(o);var l=o.O;l&&typeof l.dispose=="function"&&l.dispose(),o.O=null,Pc(o.V),o.g&&(l=o.g,o.g=null,l.abort(),l.dispose())}function ao(o,l){try{var d=o.j;if(d.I!=0&&(d.g==o||co(d.h,o))){if(!o.L&&co(d.h,o)&&d.I==3){try{var p=d.Ba.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var A=p;if(A[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<o.F)Ds(d),Ps(d);else break e;mo(d),Le(18)}}else d.xa=A[1],0<d.xa-d.K&&A[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Er(h(d.Va,d),6e3));Gc(d.h)<=1&&d.ta&&(d.ta=void 0)}else dn(d,11)}else if((o.L||d.g==o)&&Ds(d),!E(l))for(A=d.Ba.g.parse(l),l=0;l<A.length;l++){let re=A[l];const Ae=re[0];if(!(Ae<=d.K))if(d.K=Ae,re=re[1],d.I==2)if(re[0]=="c"){d.M=re[1],d.ba=re[2];const ot=re[3];ot!=null&&(d.ka=ot,d.j.info("VER="+d.ka));const fn=re[4];fn!=null&&(d.za=fn,d.j.info("SVER="+d.za));const Dt=re[5];Dt!=null&&typeof Dt=="number"&&Dt>0&&(p=1.5*Dt,d.O=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;const Nt=o.g;if(Nt){const Vs=Nt.g?Nt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vs){var R=p.h;R.g||Vs.indexOf("spdy")==-1&&Vs.indexOf("quic")==-1&&Vs.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(lo(R,R.h),R.h=null))}if(p.G){const _o=Nt.g?Nt.g.getResponseHeader("X-HTTP-Session-Id"):null;_o&&(p.wa=_o,ie(p.J,p.G,_o))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-o.F,d.j.info("Handshake RTT: "+d.T+"ms")),p=d;var N=o;if(p.na=gl(p,p.L?p.ba:null,p.W),N.L){Wc(p.h,N);var H=N,ye=p.O;ye&&(H.H=ye),H.D&&(oo(H),bs(H)),p.g=N}else hl(p);d.i.length>0&&ks(d)}else re[0]!="stop"&&re[0]!="close"||dn(d,7);else d.I==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?dn(d,7):po(d):re[0]!="noop"&&d.l&&d.l.qa(re),d.A=0)}}yr(4)}catch{}}var Em=class{constructor(o,l){this.g=o,this.map=l}};function qc(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zc(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Gc(o){return o.h?1:o.g?o.g.size:0}function co(o,l){return o.h?o.h==l:o.g?o.g.has(l):!1}function lo(o,l){o.g?o.g.add(l):o.h=l}function Wc(o,l){o.h&&o.h==l?o.h=null:o.g&&o.g.has(l)&&o.g.delete(l)}qc.prototype.cancel=function(){if(this.i=Hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Hc(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let l=o.i;for(const d of o.g.values())l=l.concat(d.G);return l}return b(o.i)}var Kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wm(o,l){if(o){o=o.split("&");for(let d=0;d<o.length;d++){const p=o[d].indexOf("=");let A,R=null;p>=0?(A=o[d].substring(0,p),R=o[d].substring(p+1)):A=o[d],l(A,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Ct(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let l;o instanceof Ct?(this.l=o.l,vr(this,o.j),this.o=o.o,this.g=o.g,Ar(this,o.u),this.h=o.h,uo(this,el(o.i)),this.m=o.m):o&&(l=String(o).match(Kc))?(this.l=!1,vr(this,l[1]||"",!0),this.o=br(l[2]||""),this.g=br(l[3]||"",!0),Ar(this,l[4]),this.h=br(l[5]||"",!0),uo(this,l[6]||"",!0),this.m=br(l[7]||"")):(this.l=!1,this.i=new Sr(null,this.l))}Ct.prototype.toString=function(){const o=[];var l=this.j;l&&o.push(Rr(l,Qc,!0),":");var d=this.g;return(d||l=="file")&&(o.push("//"),(l=this.o)&&o.push(Rr(l,Qc,!0),"@"),o.push(Ir(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&o.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Rr(d,d.charAt(0)=="/"?vm:Tm,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Rr(d,bm)),o.join("")},Ct.prototype.resolve=function(o){const l=it(this);let d=!!o.j;d?vr(l,o.j):d=!!o.o,d?l.o=o.o:d=!!o.g,d?l.g=o.g:d=o.u!=null;var p=o.h;if(d)Ar(l,o.u);else if(d=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var A=l.h.lastIndexOf("/");A!=-1&&(p=l.h.slice(0,A+1)+p)}if(A=p,A==".."||A==".")p="";else if(A.indexOf("./")!=-1||A.indexOf("/.")!=-1){p=A.lastIndexOf("/",0)==0,A=A.split("/");const R=[];for(let N=0;N<A.length;){const H=A[N++];H=="."?p&&N==A.length&&R.push(""):H==".."?((R.length>1||R.length==1&&R[0]!="")&&R.pop(),p&&N==A.length&&R.push("")):(R.push(H),p=!0)}p=R.join("/")}else p=A}return d?l.h=p:d=o.i.toString()!=="",d?uo(l,el(o.i)):d=!!o.m,d&&(l.m=o.m),l};function it(o){return new Ct(o)}function vr(o,l,d){o.j=d?br(l,!0):l,o.j&&(o.j=o.j.replace(/:$/,""))}function Ar(o,l){if(l){if(l=Number(l),isNaN(l)||l<0)throw Error("Bad port number "+l);o.u=l}else o.u=null}function uo(o,l,d){l instanceof Sr?(o.i=l,Rm(o.i,o.l)):(d||(l=Rr(l,Am)),o.i=new Sr(l,o.l))}function ie(o,l,d){o.i.set(l,d)}function Rs(o){return ie(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function br(o,l){return o?l?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Rr(o,l,d){return typeof o=="string"?(o=encodeURI(o).replace(l,Im),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Im(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Qc=/[#\/\?@]/g,Tm=/[#\?:]/g,vm=/[#\?]/g,Am=/[#\?@]/g,bm=/#/g;function Sr(o,l){this.h=this.g=null,this.i=o||null,this.j=!!l}function hn(o){o.g||(o.g=new Map,o.h=0,o.i&&wm(o.i,function(l,d){o.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}n=Sr.prototype,n.add=function(o,l){hn(this),this.i=null,o=Un(this,o);let d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(l),this.h+=1,this};function Yc(o,l){hn(o),l=Un(o,l),o.g.has(l)&&(o.i=null,o.h-=o.g.get(l).length,o.g.delete(l))}function Jc(o,l){return hn(o),l=Un(o,l),o.g.has(l)}n.forEach=function(o,l){hn(this),this.g.forEach(function(d,p){d.forEach(function(A){o.call(l,A,p,this)},this)},this)};function Xc(o,l){hn(o);let d=[];if(typeof l=="string")Jc(o,l)&&(d=d.concat(o.g.get(Un(o,l))));else for(o=Array.from(o.g.values()),l=0;l<o.length;l++)d=d.concat(o[l]);return d}n.set=function(o,l){return hn(this),this.i=null,o=Un(this,o),Jc(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[l]),this.h+=1,this},n.get=function(o,l){return o?(o=Xc(this,o),o.length>0?String(o[0]):l):l};function Zc(o,l,d){Yc(o,l),d.length>0&&(o.i=null,o.g.set(Un(o,l),b(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],l=Array.from(this.g.keys());for(let p=0;p<l.length;p++){var d=l[p];const A=Ir(d);d=Xc(this,d);for(let R=0;R<d.length;R++){let N=A;d[R]!==""&&(N+="="+Ir(d[R])),o.push(N)}}return this.i=o.join("&")};function el(o){const l=new Sr;return l.i=o.i,o.g&&(l.g=new Map(o.g),l.h=o.h),l}function Un(o,l){return l=String(l),o.j&&(l=l.toLowerCase()),l}function Rm(o,l){l&&!o.j&&(hn(o),o.i=null,o.g.forEach(function(d,p){const A=p.toLowerCase();p!=A&&(Yc(this,p),Zc(this,A,d))},o)),o.j=l}function Sm(o,l){const d=new wr;if(a.Image){const p=new Image;p.onload=f(Pt,d,"TestLoadImage: loaded",!0,l,p),p.onerror=f(Pt,d,"TestLoadImage: error",!1,l,p),p.onabort=f(Pt,d,"TestLoadImage: abort",!1,l,p),p.ontimeout=f(Pt,d,"TestLoadImage: timeout",!1,l,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else l(!1)}function Cm(o,l){const d=new wr,p=new AbortController,A=setTimeout(()=>{p.abort(),Pt(d,"TestPingServer: timeout",!1,l)},1e4);fetch(o,{signal:p.signal}).then(R=>{clearTimeout(A),R.ok?Pt(d,"TestPingServer: ok",!0,l):Pt(d,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(A),Pt(d,"TestPingServer: error",!1,l)})}function Pt(o,l,d,p,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),p(d)}catch{}}function Pm(){this.g=new hm}function ho(o){this.i=o.Sb||null,this.h=o.ab||!1}g(ho,kc),ho.prototype.g=function(){return new Ss(this.i,this.h)};function Ss(o,l){Pe.call(this),this.H=o,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Ss,Pe),n=Ss.prototype,n.open=function(o,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=l,this.readyState=1,Pr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const l={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(l.body=o),(this.H||a).fetch(new Request(this.D,l)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Pr(this)),this.g&&(this.readyState=3,Pr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tl(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function tl(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var l=o.value?o.value:new Uint8Array(0);(l=this.B.decode(l,{stream:!o.done}))&&(this.response=this.responseText+=l)}o.done?Cr(this):Pr(this),this.readyState==3&&tl(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,Cr(this))},n.Na=function(o){this.g&&(this.response=o,Cr(this))},n.ga=function(){this.g&&Cr(this)};function Cr(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Pr(o)}n.setRequestHeader=function(o,l){this.A.append(o,l)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],l=this.h.entries();for(var d=l.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=l.next();return o.join(`\r
`)};function Pr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function nl(o){let l="";return on(o,function(d,p){l+=p,l+=":",l+=d,l+=`\r
`}),l}function fo(o,l,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=nl(d),typeof o=="string"?d!=null&&Ir(d):ie(o,l,d))}function le(o){Pe.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(le,Pe);var km=/^https?$/i,Dm=["POST","PUT"];n=le.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,l,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);l=l?l.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mc.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(l,String(o),!0),this.B=!1}catch(R){rl(this,R);return}if(o=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var A in p)d.set(A,p[A]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const R of p.keys())d.set(R,p.get(R));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(R=>R.toLowerCase()=="content-type"),A=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Dm,l,void 0)>=0)||p||A||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,N]of d)this.g.setRequestHeader(R,N);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(R){rl(this,R)}};function rl(o,l){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=l,o.o=5,sl(o),Cs(o)}function sl(o){o.A||(o.A=!0,xe(o,"complete"),xe(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,xe(this,"complete"),xe(this,"abort"),Cs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cs(this,!0)),le.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?il(this):this.Xa())},n.Xa=function(){il(this)};function il(o){if(o.h&&typeof i<"u"){if(o.v&&kt(o)==4)setTimeout(o.Ca.bind(o),0);else if(xe(o,"readystatechange"),kt(o)==4){o.h=!1;try{const R=o.ca();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var d;if(!(d=l)){var p;if(p=R===0){let N=String(o.D).match(Kc)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),p=!km.test(N?N.toLowerCase():"")}d=p}if(d)xe(o,"complete"),xe(o,"success");else{o.o=6;try{var A=kt(o)>2?o.g.statusText:""}catch{A=""}o.l=A+" ["+o.ca()+"]",sl(o)}}finally{Cs(o)}}}}function Cs(o,l){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const d=o.g;o.g=null,l||xe(o,"ready");try{d.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function kt(o){return o.g?o.g.readyState:0}n.ca=function(){try{return kt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var l=this.g.responseText;return o&&l.indexOf(o)==0&&(l=l.substring(o.length)),um(l)}};function ol(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Nm(o){const l={};o=(o.g&&kt(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(E(o[p]))continue;var d=gm(o[p]);const A=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const R=l[A]||[];l[A]=R,R.push(d)}Is(l,function(p){return p.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function kr(o,l,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||l}function al(o){this.za=0,this.i=[],this.j=new wr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kr("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kr("baseRetryDelayMs",5e3,o),this.Za=kr("retryDelaySeedMs",1e4,o),this.Ta=kr("forwardChannelMaxRetries",2,o),this.va=kr("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new qc(o&&o.concurrentRequestLimit),this.Ba=new Pm,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=al.prototype,n.ka=8,n.I=1,n.connect=function(o,l,d,p){Le(0),this.W=o,this.H=l||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.J=gl(this,null,this.W),ks(this)};function po(o){if(cl(o),o.I==3){var l=o.V++,d=it(o.J);if(ie(d,"SID",o.M),ie(d,"RID",l),ie(d,"TYPE","terminate"),Dr(o,d),l=new St(o,o.j,l),l.M=2,l.A=Rs(it(d)),d=!1,a.navigator&&a.navigator.sendBeacon)try{d=a.navigator.sendBeacon(l.A.toString(),"")}catch{}!d&&a.Image&&(new Image().src=l.A,d=!0),d||(l.g=_l(l.j,null),l.g.ea(l.A)),l.F=Date.now(),bs(l)}ml(o)}function Ps(o){o.g&&(go(o),o.g.cancel(),o.g=null)}function cl(o){Ps(o),o.v&&(a.clearTimeout(o.v),o.v=null),Ds(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function ks(o){if(!zc(o.h)&&!o.m){o.m=!0;var l=o.Ea;ee||m(),X||(ee(),X=!0),I.add(l,o),o.D=0}}function Vm(o,l){return Gc(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=l.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Er(h(o.Ea,o,l),pl(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const A=new St(this,this.j,o);let R=this.o;if(this.U&&(R?(R=pr(R),Te(R,this.U)):R=this.U),this.u!==null||this.R||(A.J=R,R=null),this.S)e:{for(var l=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,l>4096){l=d;break e}if(l===4096||d===this.i.length-1){l=d+1;break e}}l=1e3}else l=1e3;l=ul(this,A,l),d=it(this.J),ie(d,"RID",o),ie(d,"CVER",22),this.G&&ie(d,"X-HTTP-Session-Id",this.G),Dr(this,d),R&&(this.R?l="headers="+Ir(nl(R))+"&"+l:this.u&&fo(d,this.u,R)),lo(this.h,A),this.Ra&&ie(d,"TYPE","init"),this.S?(ie(d,"$req",l),ie(d,"SID","null"),A.U=!0,io(A,d,null)):io(A,d,l),this.I=2}}else this.I==3&&(o?ll(this,o):this.i.length==0||zc(this.h)||ll(this))};function ll(o,l){var d;l?d=l.l:d=o.V++;const p=it(o.J);ie(p,"SID",o.M),ie(p,"RID",d),ie(p,"AID",o.K),Dr(o,p),o.u&&o.o&&fo(p,o.u,o.o),d=new St(o,o.j,d,o.D+1),o.u===null&&(d.J=o.o),l&&(o.i=l.G.concat(o.i)),l=ul(o,d,1e3),d.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),lo(o.h,d),io(d,p,l)}function Dr(o,l){o.H&&on(o.H,function(d,p){ie(l,p,d)}),o.l&&on({},function(d,p){ie(l,p,d)})}function ul(o,l,d){d=Math.min(o.i.length,d);const p=o.l?h(o.l.Ka,o.l,o):null;e:{var A=o.i;let H=-1;for(;;){const ye=["count="+d];H==-1?d>0?(H=A[0].g,ye.push("ofs="+H)):H=0:ye.push("ofs="+H);let re=!0;for(let Ae=0;Ae<d;Ae++){var R=A[Ae].g;const ot=A[Ae].map;if(R-=H,R<0)H=Math.max(0,A[Ae].g-100),re=!1;else try{R="req"+R+"_"||"";try{var N=ot instanceof Map?ot:Object.entries(ot);for(const[fn,Dt]of N){let Nt=Dt;c(Dt)&&(Nt=eo(Dt)),ye.push(R+fn+"="+encodeURIComponent(Nt))}}catch(fn){throw ye.push(R+"type="+encodeURIComponent("_badmap")),fn}}catch{p&&p(ot)}}if(re){N=ye.join("&");break e}}N=void 0}return o=o.i.splice(0,d),l.G=o,N}function hl(o){if(!o.g&&!o.v){o.Y=1;var l=o.Da;ee||m(),X||(ee(),X=!0),I.add(l,o),o.A=0}}function mo(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Er(h(o.Da,o),pl(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,dl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Er(h(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Le(10),Ps(this),dl(this))};function go(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function dl(o){o.g=new St(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var l=it(o.na);ie(l,"RID","rpc"),ie(l,"SID",o.M),ie(l,"AID",o.K),ie(l,"CI",o.F?"0":"1"),!o.F&&o.ia&&ie(l,"TO",o.ia),ie(l,"TYPE","xmlhttp"),Dr(o,l),o.u&&o.o&&fo(l,o.u,o.o),o.O&&(o.g.H=o.O);var d=o.g;o=o.ba,d.M=1,d.A=Rs(it(l)),d.u=null,d.R=!0,Bc(d,o)}n.Va=function(){this.C!=null&&(this.C=null,Ps(this),mo(this),Le(19))};function Ds(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function fl(o,l){var d=null;if(o.g==l){Ds(o),go(o),o.g=null;var p=2}else if(co(o.h,l))d=l.G,Wc(o.h,l),p=1;else return;if(o.I!=0){if(l.o)if(p==1){d=l.u?l.u.length:0,l=Date.now()-l.F;var A=o.D;p=vs(),xe(p,new xc(p,d)),ks(o)}else hl(o);else if(A=l.m,A==3||A==0&&l.X>0||!(p==1&&Vm(o,l)||p==2&&mo(o)))switch(d&&d.length>0&&(l=o.h,l.i=l.i.concat(d)),A){case 1:dn(o,5);break;case 4:dn(o,10);break;case 3:dn(o,6);break;default:dn(o,2)}}}function pl(o,l){let d=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(d*=2),d*l}function dn(o,l){if(o.j.info("Error code "+l),l==2){var d=h(o.bb,o),p=o.Ua;const A=!p;p=new Ct(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vr(p,"https"),Rs(p),A?Sm(p.toString(),d):Cm(p.toString(),d)}else Le(2);o.I=0,o.l&&o.l.pa(l),ml(o),cl(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function ml(o){if(o.I=0,o.ja=[],o.l){const l=Hc(o.h);(l.length!=0||o.i.length!=0)&&(P(o.ja,l),P(o.ja,o.i),o.h.i.length=0,b(o.i),o.i.length=0),o.l.oa()}}function gl(o,l,d){var p=d instanceof Ct?it(d):new Ct(d);if(p.g!="")l&&(p.g=l+"."+p.g),Ar(p,p.u);else{var A=a.location;p=A.protocol,l=l?l+"."+A.hostname:A.hostname,A=+A.port;const R=new Ct(null);p&&vr(R,p),l&&(R.g=l),A&&Ar(R,A),d&&(R.h=d),p=R}return d=o.G,l=o.wa,d&&l&&ie(p,d,l),ie(p,"VER",o.ka),Dr(o,p),p}function _l(o,l,d){if(l&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return l=o.Aa&&!o.ma?new le(new ho({ab:d})):new le(o.ma),l.Fa(o.L),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function yl(){}n=yl.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ns(){}Ns.prototype.g=function(o,l){return new ze(o,l)};function ze(o,l){Pe.call(this),this.g=new al(l),this.l=o,this.h=l&&l.messageUrlParams||null,o=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(o?o["X-WebChannel-Content-Type"]=l.messageContentType:o={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.sa&&(o?o["X-WebChannel-Client-Profile"]=l.sa:o={"X-WebChannel-Client-Profile":l.sa}),this.g.U=o,(o=l&&l.Qb)&&!E(o)&&(this.g.u=o),this.A=l&&l.supportsCrossDomainXhr||!1,this.v=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!E(l)&&(this.g.G=l,o=this.h,o!==null&&l in o&&(o=this.h,l in o&&delete o[l])),this.j=new Fn(this)}g(ze,Pe),ze.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ze.prototype.close=function(){po(this.g)},ze.prototype.o=function(o){var l=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.v&&(d={},d.__data__=eo(o),o=d);l.i.push(new Em(l.Ya++,o)),l.I==3&&ks(l)},ze.prototype.N=function(){this.g.l=null,delete this.j,po(this.g),delete this.g,ze.Z.N.call(this)};function El(o){to.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var l=o.__sm__;if(l){e:{for(const d in l){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,l=l!==null&&o in l?l[o]:void 0),this.data=l}else this.data=o}g(El,to);function wl(){no.call(this),this.status=1}g(wl,no);function Fn(o){this.g=o}g(Fn,yl),Fn.prototype.ra=function(){xe(this.g,"a")},Fn.prototype.qa=function(o){xe(this.g,new El(o))},Fn.prototype.pa=function(o){xe(this.g,new wl)},Fn.prototype.oa=function(){xe(this.g,"b")},Ns.prototype.createWebChannel=Ns.prototype.g,ze.prototype.send=ze.prototype.o,ze.prototype.open=ze.prototype.m,ze.prototype.close=ze.prototype.close,Jd=function(){return new Ns},Yd=function(){return vs()},Qd=ln,ta={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,Ks=As,Lc.COMPLETE="complete",Kd=Lc,Dc.EventType=_r,_r.OPEN="a",_r.CLOSE="b",_r.ERROR="c",_r.MESSAGE="d",Pe.prototype.listen=Pe.prototype.J,Ur=Dc,le.prototype.listenOnce=le.prototype.K,le.prototype.getLastError=le.prototype.Ha,le.prototype.getLastErrorCode=le.prototype.ya,le.prototype.getStatus=le.prototype.ca,le.prototype.getResponseJson=le.prototype.La,le.prototype.getResponseText=le.prototype.la,le.prototype.send=le.prototype.ea,le.prototype.setWithCredentials=le.prototype.Fa,Hd=le}).apply(typeof xs<"u"?xs:typeof self<"u"?self:typeof window<"u"?window:{});class De{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}De.UNAUTHENTICATED=new De(null),De.GOOGLE_CREDENTIALS=new De("google-credentials-uid"),De.FIRST_PARTY=new De("first-party-uid"),De.MOCK_USER=new De("mock-user");let ar="12.8.0";function SI(n){ar=n}const An=new bi("@firebase/firestore");function jn(){return An.logLevel}function x(n,...e){if(An.logLevel<=Q.DEBUG){const t=e.map(Ua);An.debug(`Firestore (${ar}): ${n}`,...t)}}function At(n,...e){if(An.logLevel<=Q.ERROR){const t=e.map(Ua);An.error(`Firestore (${ar}): ${n}`,...t)}}function Zn(n,...e){if(An.logLevel<=Q.WARN){const t=e.map(Ua);An.warn(`Firestore (${ar}): ${n}`,...t)}}function Ua(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Xd(n,r,t)}function Xd(n,e,t){let r=`FIRESTORE (${ar}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw At(r),new Error(r)}function te(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Xd(e,s,r)}function G(n,e){return n}const S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends Xe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class It{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Zd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(De.UNAUTHENTICATED)))}shutdown(){}}class PI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kI{constructor(e){this.t=e,this.currentUser=De.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){te(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let i=new It;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new It,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const u=i;e.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},c=u=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new It)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string",31837,{l:r}),new Zd(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string",2055,{h:e}),new De(e)}}class DI{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=De.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class NI{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new DI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(De.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ge(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){te(this.o===void 0,3512);const r=i=>{i.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,x("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lu(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new lu(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function OI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Fa{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=OI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function Y(n,e){return n<e?-1:n>e?1:0}function na(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return Po(s)===Po(i)?Y(s,i):Po(s)?1:-1}return Y(n.length,e.length)}const xI=55296,LI=57343;function Po(n){const e=n.charCodeAt(0);return e>=xI&&e<=LI}function er(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}const uu="__name__";class at{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return at.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof at?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=at.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return Y(e.length,t.length)}static compareSegments(e,t){const r=at.isNumericId(e),s=at.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?at.extractNumericId(e).compare(at.extractNumericId(t)):na(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qt.fromString(e.substring(4,e.length-2))}}class se extends at{construct(e,t,r){return new se(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new O(S.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new se(t)}static emptyPath(){return new se([])}}const MI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Se extends at{construct(e,t,r){return new Se(e,t,r)}static isValidIdentifier(e){return MI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Se.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uu}static keyField(){return new Se([uu])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new O(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new O(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new O(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Se(t)}static emptyPath(){return new Se([])}}class B{constructor(e){this.path=e}static fromPath(e){return new B(se.fromString(e))}static fromName(e){return new B(se.fromString(e).popFirst(5))}static empty(){return new B(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new B(new se(e.slice()))}}function ef(n,e,t){if(!t)throw new O(S.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function UI(n,e,t,r){if(e===!0&&r===!0)throw new O(S.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hu(n){if(!B.isDocumentKey(n))throw new O(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function du(n){if(B.isDocumentKey(n))throw new O(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tf(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Di(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q(12329,{type:typeof n})}function Je(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Di(n);throw new O(S.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _e(n,e){const t={typeString:n};return e&&(t.value=e),t}function fs(n,e){if(!tf(n))throw new O(S.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(s&&typeof a!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new O(S.INVALID_ARGUMENT,t);return!0}const fu=-62135596800,pu=1e6;class oe{static now(){return oe.fromMillis(Date.now())}static fromDate(e){return oe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*pu);return new oe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fu)throw new O(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pu}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fs(e,oe._jsonSchema))return new oe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}oe._jsonSchemaVersion="firestore/timestamp/1.0",oe._jsonSchema={type:_e("string",oe._jsonSchemaVersion),seconds:_e("number"),nanoseconds:_e("number")};class z{static fromTimestamp(e){return new z(e)}static min(){return new z(new oe(0,0))}static max(){return new z(new oe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Zr=-1;function FI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=z.fromTimestamp(r===1e9?new oe(t+1,0):new oe(t,r));return new Wt(s,B.empty(),e)}function BI(n){return new Wt(n.readTime,n.key,Zr)}class Wt{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Wt(z.min(),B.empty(),Zr)}static max(){return new Wt(z.max(),B.empty(),Zr)}}function jI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:Y(n.largestBatchId,e.largestBatchId))}const $I="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function cr(n){if(n.code!==S.FAILED_PRECONDITION||n.message!==$I)throw n;x("LocalStore","Unexpectedly lost primary lease")}class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new C(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof C?t:C.resolve(t)}catch(t){return C.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):C.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):C.reject(t)}static resolve(e){return new C(((t,r)=>{t(e)}))}static reject(e){return new C(((t,r)=>{r(e)}))}static waitFor(e){return new C(((t,r)=>{let s=0,i=0,a=!1;e.forEach((c=>{++s,c.next((()=>{++i,a&&i===s&&t()}),(u=>r(u)))})),a=!0,i===s&&t()}))}static or(e){let t=C.resolve(!1);for(const r of e)t=t.next((s=>s?C.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,i)=>{r.push(t.call(this,s,i))})),this.waitFor(r)}static mapArray(e,t){return new C(((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const h=u;t(e[h]).next((f=>{a[h]=f,++c,c===i&&r(a)}),(f=>s(f)))}}))}static doWhile(e,t){return new C(((r,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):r()};i()}))}}function zI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function lr(n){return n.name==="IndexedDbTransactionError"}class Ni{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ni.ce=-1;const Ba=-1;function Vi(n){return n==null}function di(n){return n===0&&1/n==-1/0}function GI(n){return typeof n=="number"&&Number.isInteger(n)&&!di(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const nf="";function WI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mu(e)),e=HI(n.get(t),e);return mu(e)}function HI(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case nf:t+="";break;default:t+=i}}return t}function mu(n){return n+nf+""}function gu(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function nn(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rf(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ae{constructor(e,t){this.comparator=e,this.root=t||Re.EMPTY}insert(e,t){return new ae(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Re.BLACK,null,null))}remove(e){return new ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Re.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ls(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ls(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ls(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ls(this.root,e,this.comparator,!0)}}class Ls{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Re{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??Re.RED,this.left=s??Re.EMPTY,this.right=i??Re.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new Re(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Re.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Re.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Re.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Re.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}}Re.EMPTY=null,Re.RED=!0,Re.BLACK=!1;Re.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new Re(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class we{constructor(e){this.comparator=e,this.data=new ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _u(this.data.getIterator())}getIteratorFrom(e){return new _u(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof we)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new we(this.comparator);return t.data=e,t}}class _u{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class We{constructor(e){this.fields=e,e.sort(Se.comparator)}static empty(){return new We([])}unionWith(e){let t=new we(Se.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new We(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return er(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class sf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ce{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sf("Invalid base64 string: "+i):i}})(e);return new Ce(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new Ce(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ce.EMPTY_BYTE_STRING=new Ce("");const KI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ht(n){if(te(!!n,39018),typeof n=="string"){let e=0;const t=KI.exec(n);if(te(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:de(n.seconds),nanos:de(n.nanos)}}function de(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Kt(n){return typeof n=="string"?Ce.fromBase64String(n):Ce.fromUint8Array(n)}const of="server_timestamp",af="__type__",cf="__previous_value__",lf="__local_write_time__";function ja(n){return(n?.mapValue?.fields||{})[af]?.stringValue===of}function Oi(n){const e=n.mapValue.fields[cf];return ja(e)?Oi(e):e}function es(n){const e=Ht(n.mapValue.fields[lf].timestampValue);return new oe(e.seconds,e.nanos)}class QI{constructor(e,t,r,s,i,a,c,u,h,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f,this.apiKey=g}}const fi="(default)";class ts{constructor(e,t){this.projectId=e,this.database=t||fi}static empty(){return new ts("","")}get isDefaultDatabase(){return this.database===fi}isEqual(e){return e instanceof ts&&e.projectId===this.projectId&&e.database===this.database}}function YI(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new O(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ts(n.options.projectId,e)}const uf="__type__",JI="__max__",Ms={mapValue:{}},hf="__vector__",pi="value";function Qt(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ja(n)?4:ZI(n)?9007199254740991:XI(n)?10:11:q(28295,{value:n})}function pt(n,e){if(n===e)return!0;const t=Qt(n);if(t!==Qt(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return es(n).isEqual(es(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ht(s.timestampValue),c=Ht(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return Kt(s.bytesValue).isEqual(Kt(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return de(s.geoPointValue.latitude)===de(i.geoPointValue.latitude)&&de(s.geoPointValue.longitude)===de(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return de(s.integerValue)===de(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=de(s.doubleValue),c=de(i.doubleValue);return a===c?di(a)===di(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return er(n.arrayValue.values||[],e.arrayValue.values||[],pt);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(gu(a)!==gu(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!pt(a[u],c[u])))return!1;return!0})(n,e);default:return q(52216,{left:n})}}function ns(n,e){return(n.values||[]).find((t=>pt(t,e)))!==void 0}function tr(n,e){if(n===e)return 0;const t=Qt(n),r=Qt(e);if(t!==r)return Y(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Y(n.booleanValue,e.booleanValue);case 2:return(function(i,a){const c=de(i.integerValue||i.doubleValue),u=de(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return yu(n.timestampValue,e.timestampValue);case 4:return yu(es(n),es(e));case 5:return na(n.stringValue,e.stringValue);case 6:return(function(i,a){const c=Kt(i),u=Kt(a);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(i,a){const c=i.split("/"),u=a.split("/");for(let h=0;h<c.length&&h<u.length;h++){const f=Y(c[h],u[h]);if(f!==0)return f}return Y(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,a){const c=Y(de(i.latitude),de(a.latitude));return c!==0?c:Y(de(i.longitude),de(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Eu(n.arrayValue,e.arrayValue);case 10:return(function(i,a){const c=i.fields||{},u=a.fields||{},h=c[pi]?.arrayValue,f=u[pi]?.arrayValue,g=Y(h?.values?.length||0,f?.values?.length||0);return g!==0?g:Eu(h,f)})(n.mapValue,e.mapValue);case 11:return(function(i,a){if(i===Ms.mapValue&&a===Ms.mapValue)return 0;if(i===Ms.mapValue)return 1;if(a===Ms.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const _=na(u[g],f[g]);if(_!==0)return _;const b=tr(c[u[g]],h[f[g]]);if(b!==0)return b}return Y(u.length,f.length)})(n.mapValue,e.mapValue);default:throw q(23264,{he:t})}}function yu(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Y(n,e);const t=Ht(n),r=Ht(e),s=Y(t.seconds,r.seconds);return s!==0?s:Y(t.nanos,r.nanos)}function Eu(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=tr(t[s],r[s]);if(i)return i}return Y(t.length,r.length)}function nr(n){return ra(n)}function ra(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ht(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Kt(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return B.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=ra(i);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${ra(t.fields[a])}`;return s+"}"})(n.mapValue):q(61005,{value:n})}function Qs(n){switch(Qt(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Oi(n);return e?16+Qs(e):16;case 5:return 2*n.stringValue.length;case 6:return Kt(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Qs(i)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return nn(r.fields,((i,a)=>{s+=i.length+Qs(a)})),s})(n.mapValue);default:throw q(13486,{value:n})}}function wu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sa(n){return!!n&&"integerValue"in n}function $a(n){return!!n&&"arrayValue"in n}function Iu(n){return!!n&&"nullValue"in n}function Tu(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ys(n){return!!n&&"mapValue"in n}function XI(n){return(n?.mapValue?.fields||{})[uf]?.stringValue===hf}function zr(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return nn(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=zr(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zr(n.arrayValue.values[t]);return e}return{...n}}function ZI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===JI}class $e{constructor(e){this.value=e}static empty(){return new $e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ys(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zr(t)}setAll(e){let t=Se.emptyPath(),r={},s=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,s),r={},s=[],t=c.popLast()}a?r[c.lastSegment()]=zr(a):s.push(c.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());Ys(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Ys(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){nn(t,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new $e(zr(this.value))}}function df(n){const e=[];return nn(n.fields,((t,r)=>{const s=new Se([t]);if(Ys(r)){const i=df(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)})),new We(e)}class Ne{constructor(e,t,r,s,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Ne(e,0,z.min(),z.min(),z.min(),$e.empty(),0)}static newFoundDocument(e,t,r,s){return new Ne(e,1,t,z.min(),r,s,0)}static newNoDocument(e,t){return new Ne(e,2,t,z.min(),z.min(),$e.empty(),0)}static newUnknownDocument(e,t){return new Ne(e,3,t,z.min(),z.min(),$e.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$e.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$e.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ne&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ne(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mi{constructor(e,t){this.position=e,this.inclusive=t}}function vu(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],a=n.position[s];if(i.field.isKeyField()?r=B.comparator(B.fromName(a.referenceValue),t.key):r=tr(a,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Au(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pt(n.position[t],e.position[t]))return!1;return!0}class rs{constructor(e,t="asc"){this.field=e,this.dir=t}}function eT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class ff{}class ge extends ff{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new nT(e,t,r):t==="array-contains"?new iT(e,r):t==="in"?new oT(e,r):t==="not-in"?new aT(e,r):t==="array-contains-any"?new cT(e,r):new ge(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new rT(e,r):new sT(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(tr(t,this.value)):t!==null&&Qt(this.value)===Qt(t)&&this.matchesComparison(tr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class st extends ff{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new st(e,t)}matches(e){return pf(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pf(n){return n.op==="and"}function mf(n){return tT(n)&&pf(n)}function tT(n){for(const e of n.filters)if(e instanceof st)return!1;return!0}function ia(n){if(n instanceof ge)return n.field.canonicalString()+n.op.toString()+nr(n.value);if(mf(n))return n.filters.map((e=>ia(e))).join(",");{const e=n.filters.map((t=>ia(t))).join(",");return`${n.op}(${e})`}}function gf(n,e){return n instanceof ge?(function(r,s){return s instanceof ge&&r.op===s.op&&r.field.isEqual(s.field)&&pt(r.value,s.value)})(n,e):n instanceof st?(function(r,s){return s instanceof st&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,c)=>i&&gf(a,s.filters[c])),!0):!1})(n,e):void q(19439)}function _f(n){return n instanceof ge?(function(t){return`${t.field.canonicalString()} ${t.op} ${nr(t.value)}`})(n):n instanceof st?(function(t){return t.op.toString()+" {"+t.getFilters().map(_f).join(" ,")+"}"})(n):"Filter"}class nT extends ge{constructor(e,t,r){super(e,t,r),this.key=B.fromName(r.referenceValue)}matches(e){const t=B.comparator(e.key,this.key);return this.matchesComparison(t)}}class rT extends ge{constructor(e,t){super(e,"in",t),this.keys=yf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class sT extends ge{constructor(e,t){super(e,"not-in",t),this.keys=yf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yf(n,e){return(e.arrayValue?.values||[]).map((t=>B.fromName(t.referenceValue)))}class iT extends ge{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $a(t)&&ns(t.arrayValue,this.value)}}class oT extends ge{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ns(this.value.arrayValue,t)}}class aT extends ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(ns(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ns(this.value.arrayValue,t)}}class cT extends ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$a(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ns(this.value.arrayValue,r)))}}class lT{constructor(e,t=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function bu(n,e=null,t=[],r=[],s=null,i=null,a=null){return new lT(n,e,t,r,s,i,a)}function qa(n){const e=G(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>ia(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Vi(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>nr(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>nr(r))).join(",")),e.Te=t}return e.Te}function za(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!eT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Au(n.startAt,e.startAt)&&Au(n.endAt,e.endAt)}function oa(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class ur{constructor(e,t=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function uT(n,e,t,r,s,i,a,c){return new ur(n,e,t,r,s,i,a,c)}function Ga(n){return new ur(n)}function Ru(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function hT(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ef(n){return n.collectionGroup!==null}function Gr(n){const e=G(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new we(Se.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new rs(i,r))})),t.has(Se.keyField().canonicalString())||e.Ie.push(new rs(Se.keyField(),r))}return e.Ie}function ht(n){const e=G(n);return e.Ee||(e.Ee=dT(e,Gr(n))),e.Ee}function dT(n,e){if(n.limitType==="F")return bu(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new rs(s.field,i)}));const t=n.endAt?new mi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new mi(n.startAt.position,n.startAt.inclusive):null;return bu(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function aa(n,e){const t=n.filters.concat([e]);return new ur(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fT(n,e){const t=n.explicitOrderBy.concat([e]);return new ur(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function ca(n,e,t){return new ur(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xi(n,e){return za(ht(n),ht(e))&&n.limitType===e.limitType}function wf(n){return`${qa(ht(n))}|lt:${n.limitType}`}function $n(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>_f(s))).join(", ")}]`),Vi(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>nr(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>nr(s))).join(",")),`Target(${r})`})(ht(n))}; limitType=${n.limitType})`}function Li(n,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):B.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(n,e)&&(function(r,s){for(const i of Gr(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(a,c,u){const h=vu(a,c,u);return a.inclusive?h<=0:h<0})(r.startAt,Gr(r),s)||r.endAt&&!(function(a,c,u){const h=vu(a,c,u);return a.inclusive?h>=0:h>0})(r.endAt,Gr(r),s))})(n,e)}function pT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function If(n){return(e,t)=>{let r=!1;for(const s of Gr(n)){const i=mT(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function mT(n,e,t){const r=n.field.isKeyField()?B.comparator(e.key,t.key):(function(i,a,c){const u=a.data.field(i),h=c.data.field(i);return u!==null&&h!==null?tr(u,h):q(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:n.dir})}}class kn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){nn(this.inner,((t,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return rf(this.inner)}size(){return this.innerSize}}const gT=new ae(B.comparator);function bt(){return gT}const Tf=new ae(B.comparator);function Fr(...n){let e=Tf;for(const t of n)e=e.insert(t.key,t);return e}function vf(n){let e=Tf;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function _n(){return Wr()}function Af(){return Wr()}function Wr(){return new kn((n=>n.toString()),((n,e)=>n.isEqual(e)))}const _T=new ae(B.comparator),yT=new we(B.comparator);function J(...n){let e=yT;for(const t of n)e=e.add(t);return e}const ET=new we(Y);function wT(){return ET}function Wa(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:di(e)?"-0":e}}function bf(n){return{integerValue:""+n}}function IT(n,e){return GI(e)?bf(e):Wa(n,e)}class Mi{constructor(){this._=void 0}}function TT(n,e,t){return n instanceof ss?(function(s,i){const a={fields:{[af]:{stringValue:of},[lf]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ja(i)&&(i=Oi(i)),i&&(a.fields[cf]=i),{mapValue:a}})(t,e):n instanceof is?Sf(n,e):n instanceof os?Cf(n,e):(function(s,i){const a=Rf(s,i),c=Su(a)+Su(s.Ae);return sa(a)&&sa(s.Ae)?bf(c):Wa(s.serializer,c)})(n,e)}function vT(n,e,t){return n instanceof is?Sf(n,e):n instanceof os?Cf(n,e):t}function Rf(n,e){return n instanceof gi?(function(r){return sa(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class ss extends Mi{}class is extends Mi{constructor(e){super(),this.elements=e}}function Sf(n,e){const t=Pf(e);for(const r of n.elements)t.some((s=>pt(s,r)))||t.push(r);return{arrayValue:{values:t}}}class os extends Mi{constructor(e){super(),this.elements=e}}function Cf(n,e){let t=Pf(e);for(const r of n.elements)t=t.filter((s=>!pt(s,r)));return{arrayValue:{values:t}}}class gi extends Mi{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Su(n){return de(n.integerValue||n.doubleValue)}function Pf(n){return $a(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class AT{constructor(e,t){this.field=e,this.transform=t}}function bT(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof is&&s instanceof is||r instanceof os&&s instanceof os?er(r.elements,s.elements,pt):r instanceof gi&&s instanceof gi?pt(r.Ae,s.Ae):r instanceof ss&&s instanceof ss})(n.transform,e.transform)}class RT{constructor(e,t){this.version=e,this.transformResults=t}}class Fe{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fe}static exists(e){return new Fe(void 0,e)}static updateTime(e){return new Fe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Js(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ui{}function kf(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fi(n.key,Fe.none()):new ps(n.key,n.data,Fe.none());{const t=n.data,r=$e.empty();let s=new we(Se.comparator);for(let i of e.fields)if(!s.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new rn(n.key,r,new We(s.toArray()),Fe.none())}}function ST(n,e,t){n instanceof ps?(function(s,i,a){const c=s.value.clone(),u=Pu(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof rn?(function(s,i,a){if(!Js(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Pu(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Df(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Hr(n,e,t,r){return n instanceof ps?(function(i,a,c,u){if(!Js(i.precondition,a))return c;const h=i.value.clone(),f=ku(i.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof rn?(function(i,a,c,u){if(!Js(i.precondition,a))return c;const h=ku(i.fieldTransforms,u,a),f=a.data;return f.setAll(Df(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(i,a,c){return Js(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function CT(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=Rf(r.transform,s||null);i!=null&&(t===null&&(t=$e.empty()),t.set(r.field,i))}return t||null}function Cu(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&er(r,s,((i,a)=>bT(i,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ps extends Ui{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class rn extends Ui{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Df(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Pu(n,e,t){const r=new Map;te(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const i=n[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,vT(a,c,t[s]))}return r}function ku(n,e,t){const r=new Map;for(const s of n){const i=s.transform,a=t.data.field(s.field);r.set(s.field,TT(i,a,e))}return r}class Fi extends Ui{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PT extends Ui{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kT{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ST(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hr(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Hr(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Af();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=t.has(s.key)?null:c;const u=kf(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(z.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),J())}isEqual(e){return this.batchId===e.batchId&&er(this.mutations,e.mutations,((t,r)=>Cu(t,r)))&&er(this.baseMutations,e.baseMutations,((t,r)=>Cu(t,r)))}}class Ha{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return _T})();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Ha(e,t,r,s)}}class DT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class NT{constructor(e,t){this.count=e,this.unchangedNames=t}}var me,Z;function VT(n){switch(n){case S.OK:return q(64938);case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return q(15467,{code:n})}}function Nf(n){if(n===void 0)return At("GRPC error has no .code"),S.UNKNOWN;switch(n){case me.OK:return S.OK;case me.CANCELLED:return S.CANCELLED;case me.UNKNOWN:return S.UNKNOWN;case me.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case me.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case me.INTERNAL:return S.INTERNAL;case me.UNAVAILABLE:return S.UNAVAILABLE;case me.UNAUTHENTICATED:return S.UNAUTHENTICATED;case me.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case me.NOT_FOUND:return S.NOT_FOUND;case me.ALREADY_EXISTS:return S.ALREADY_EXISTS;case me.PERMISSION_DENIED:return S.PERMISSION_DENIED;case me.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case me.ABORTED:return S.ABORTED;case me.OUT_OF_RANGE:return S.OUT_OF_RANGE;case me.UNIMPLEMENTED:return S.UNIMPLEMENTED;case me.DATA_LOSS:return S.DATA_LOSS;default:return q(39323,{code:n})}}(Z=me||(me={}))[Z.OK=0]="OK",Z[Z.CANCELLED=1]="CANCELLED",Z[Z.UNKNOWN=2]="UNKNOWN",Z[Z.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Z[Z.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Z[Z.NOT_FOUND=5]="NOT_FOUND",Z[Z.ALREADY_EXISTS=6]="ALREADY_EXISTS",Z[Z.PERMISSION_DENIED=7]="PERMISSION_DENIED",Z[Z.UNAUTHENTICATED=16]="UNAUTHENTICATED",Z[Z.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Z[Z.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Z[Z.ABORTED=10]="ABORTED",Z[Z.OUT_OF_RANGE=11]="OUT_OF_RANGE",Z[Z.UNIMPLEMENTED=12]="UNIMPLEMENTED",Z[Z.INTERNAL=13]="INTERNAL",Z[Z.UNAVAILABLE=14]="UNAVAILABLE",Z[Z.DATA_LOSS=15]="DATA_LOSS";function OT(){return new TextEncoder}const xT=new qt([4294967295,4294967295],0);function Du(n){const e=OT().encode(n),t=new Wd;return t.update(e),new Uint8Array(t.digest())}function Nu(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qt([t,r],0),new qt([s,i],0)]}class Ka{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Br(`Invalid padding: ${t}`);if(r<0)throw new Br(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Br(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Br(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qt.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(qt.fromNumber(r)));return s.compare(xT)===1&&(s=new qt([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Du(e),[r,s]=Nu(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Ka(i,s,t);return r.forEach((c=>a.insert(c))),a}insert(e){if(this.ge===0)return;const t=Du(e),[r,s]=Nu(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.be(a)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Br extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bi{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,ms.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Bi(z.min(),s,new ae(Y),bt(),J())}}class ms{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ms(r,t,J(),J(),J())}}class Xs{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class Vf{constructor(e,t){this.targetId=e,this.Ce=t}}class Of{constructor(e,t,r=Ce.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Vu{constructor(){this.ve=0,this.Fe=Ou(),this.Me=Ce.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=J(),t=J(),r=J();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:q(38017,{changeType:i})}})),new ms(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=Ou()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,te(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class LT{constructor(e){this.Ge=e,this.ze=new Map,this.je=bt(),this.He=Us(),this.Je=Us(),this.Ze=new ae(Y)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:q(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(oa(i))if(r===0){const a=new B(i.path);this.et(t,a,Ne.newNoDocument(a,z.min()))}else te(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(t);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let a,c;try{a=Kt(r).toUint8Array()}catch(u){if(u instanceof sf)return Zn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ka(a,s,i)}catch(u){return Zn(u instanceof Br?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(t,i,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((i,a)=>{const c=this.ot(a);if(c){if(i.current&&oa(c.target)){const u=new B(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Ne.newNoDocument(u,e))}i.Be&&(t.set(a,i.ke()),i.Ke())}}));let r=J();this.Je.forEach(((i,a)=>{let c=!0;a.forEachWhile((u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(e)));const s=new Bi(e,t,this.Ze,this.je,r);return this.je=bt(),this.He=Us(),this.Je=Us(),this.Ze=new ae(Y),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Vu,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new we(Y),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new we(Y),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||x("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vu),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Us(){return new ae(B.comparator)}function Ou(){return new ae(B.comparator)}const MT={asc:"ASCENDING",desc:"DESCENDING"},UT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FT={and:"AND",or:"OR"};class BT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function la(n,e){return n.useProto3Json||Vi(e)?e:{value:e}}function _i(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xf(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function jT(n,e){return _i(n,e.toTimestamp())}function dt(n){return te(!!n,49232),z.fromTimestamp((function(t){const r=Ht(t);return new oe(r.seconds,r.nanos)})(n))}function Qa(n,e){return ua(n,e).canonicalString()}function ua(n,e){const t=(function(s){return new se(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Lf(n){const e=se.fromString(n);return te(jf(e),10190,{key:e.toString()}),e}function ha(n,e){return Qa(n.databaseId,e.path)}function ko(n,e){const t=Lf(e);if(t.get(1)!==n.databaseId.projectId)throw new O(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(Uf(t))}function Mf(n,e){return Qa(n.databaseId,e)}function $T(n){const e=Lf(n);return e.length===4?se.emptyPath():Uf(e)}function da(n){return new se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Uf(n){return te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function xu(n,e,t){return{name:ha(n,e),fields:t.value.mapValue.fields}}function qT(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:q(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(te(f===void 0||typeof f=="string",58123),Ce.fromBase64String(f||"")):(te(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ce.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){const f=h.code===void 0?S.UNKNOWN:Nf(h.code);return new O(f,h.message||"")})(a);t=new Of(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ko(n,r.document.name),i=dt(r.document.updateTime),a=r.document.createTime?dt(r.document.createTime):z.min(),c=new $e({mapValue:{fields:r.document.fields}}),u=Ne.newFoundDocument(s,i,a,c),h=r.targetIds||[],f=r.removedTargetIds||[];t=new Xs(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ko(n,r.document),i=r.readTime?dt(r.readTime):z.min(),a=Ne.newNoDocument(s,i),c=r.removedTargetIds||[];t=new Xs([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ko(n,r.document),i=r.removedTargetIds||[];t=new Xs([],i,s,null)}else{if(!("filter"in e))return q(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new NT(s,i),c=r.targetId;t=new Vf(c,a)}}return t}function zT(n,e){let t;if(e instanceof ps)t={update:xu(n,e.key,e.value)};else if(e instanceof Fi)t={delete:ha(n,e.key)};else if(e instanceof rn)t={update:xu(n,e.key,e.data),updateMask:ZT(e.fieldMask)};else{if(!(e instanceof PT))return q(16599,{dt:e.type});t={verify:ha(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(i,a){const c=a.transform;if(c instanceof ss)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof is)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof os)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof gi)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw q(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:jT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:q(27497)})(n,e.precondition)),t}function GT(n,e){return n&&n.length>0?(te(e!==void 0,14353),n.map((t=>(function(s,i){let a=s.updateTime?dt(s.updateTime):dt(i);return a.isEqual(z.min())&&(a=dt(i)),new RT(a,s.transformResults||[])})(t,e)))):[]}function WT(n,e){return{documents:[Mf(n,e.path)]}}function HT(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Mf(n,s);const i=(function(h){if(h.length!==0)return Bf(st.create(h,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const a=(function(h){if(h.length!==0)return h.map((f=>(function(_){return{field:qn(_.field),direction:YT(_.dir)}})(f)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=la(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:s}}function KT(n){let e=$T(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){te(r===1,65062);const f=t.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=(function(g){const _=Ff(g);return _ instanceof st&&mf(_)?_.getFilters():[_]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map((_=>(function(P){return new rs(zn(P.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(_)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let _;return _=typeof g=="object"?g.value:g,Vi(_)?null:_})(t.limit));let u=null;t.startAt&&(u=(function(g){const _=!!g.before,b=g.values||[];return new mi(b,_)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const _=!g.before,b=g.values||[];return new mi(b,_)})(t.endAt)),uT(e,s,a,i,c,"F",u,h)}function QT(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ff(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=zn(t.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zn(t.unaryFilter.field);return ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zn(t.unaryFilter.field);return ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=zn(t.unaryFilter.field);return ge.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ge.create(zn(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return st.create(t.compositeFilter.filters.map((r=>Ff(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(t.compositeFilter.op))})(n):q(30097,{filter:n})}function YT(n){return MT[n]}function JT(n){return UT[n]}function XT(n){return FT[n]}function qn(n){return{fieldPath:n.canonicalString()}}function zn(n){return Se.fromServerFormat(n.fieldPath)}function Bf(n){return n instanceof ge?(function(t){if(t.op==="=="){if(Tu(t.value))return{unaryFilter:{field:qn(t.field),op:"IS_NAN"}};if(Iu(t.value))return{unaryFilter:{field:qn(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Tu(t.value))return{unaryFilter:{field:qn(t.field),op:"IS_NOT_NAN"}};if(Iu(t.value))return{unaryFilter:{field:qn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qn(t.field),op:JT(t.op),value:t.value}}})(n):n instanceof st?(function(t){const r=t.getFilters().map((s=>Bf(s)));return r.length===1?r[0]:{compositeFilter:{op:XT(t.op),filters:r}}})(n):q(54877,{filter:n})}function ZT(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function jf(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function $f(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class Bt{constructor(e,t,r,s,i=z.min(),a=z.min(),c=Ce.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Bt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bt(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ev{constructor(e){this.yt=e}}function tv(n){const e=KT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ca(e,e.limit,"L"):e}class nv{constructor(){this.Sn=new rv}addToCollectionParentIndex(e,t){return this.Sn.add(t),C.resolve()}getCollectionParents(e,t){return C.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return C.resolve()}deleteFieldIndex(e,t){return C.resolve()}deleteAllFieldIndexes(e){return C.resolve()}createTargetIndexes(e,t){return C.resolve()}getDocumentsMatchingTarget(e,t){return C.resolve(null)}getIndexType(e,t){return C.resolve(0)}getFieldIndexes(e,t){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,t){return C.resolve(Wt.min())}getMinOffsetFromCollectionGroup(e,t){return C.resolve(Wt.min())}updateCollectionGroup(e,t,r){return C.resolve()}updateIndexEntries(e,t){return C.resolve()}}class rv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new we(se.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new we(se.comparator)).toArray()}}const Lu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qf=41943040;class je{static withCacheSize(e){return new je(e,je.DEFAULT_COLLECTION_PERCENTILE,je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}je.DEFAULT_COLLECTION_PERCENTILE=10,je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,je.DEFAULT=new je(qf,je.DEFAULT_COLLECTION_PERCENTILE,je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),je.DISABLED=new je(-1,0,0);class rr{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new rr(0)}static ar(){return new rr(-1)}}const Mu="LruGarbageCollector",sv=1048576;function Uu([n,e],[t,r]){const s=Y(n,t);return s===0?Y(e,r):s}class iv{constructor(e){this.Pr=e,this.buffer=new we(Uu),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Uu(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ov{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){x(Mu,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){lr(t)?x(Mu,"Ignoring IndexedDB error during garbage collection: ",t):await cr(t)}await this.Ar(3e5)}))}}class av{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return C.resolve(Ni.ce);const r=new iv(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(x("LruGarbageCollector","Garbage collection skipped; disabled"),C.resolve(Lu)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lu):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,i,a,c,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(e,s)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(i=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),jn()<=Q.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),C.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:g}))))}}function cv(n,e){return new av(n,e)}class lv{constructor(){this.changes=new kn((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ne.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?C.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hv{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Hr(r.mutation,s,We.empty(),oe.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,J()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=J()){const s=_n();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((i=>{let a=Fr();return i.forEach(((c,u)=>{a=a.insert(c,u.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=_n();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,J())))}populateOverlays(e,t,r){const s=[];return r.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,r,s){let i=bt();const a=Wr(),c=(function(){return Wr()})();return t.forEach(((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof rn)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Hr(f.mutation,h,f.mutation.getFieldMask(),oe.now())):a.set(h.key,We.empty())})),this.recalculateAndSaveOverlays(e,i).next((u=>(u.forEach(((h,f)=>a.set(h,f))),t.forEach(((h,f)=>c.set(h,new uv(f,a.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=Wr();let s=new ae(((a,c)=>a-c)),i=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const c of a)c.keys().forEach((u=>{const h=t.get(u);if(h===null)return;let f=r.get(u)||We.empty();f=c.applyToLocalView(h,f),r.set(u,f);const g=(s.get(c.batchId)||J()).add(u);s=s.insert(c.batchId,g)}))})).next((()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,f=u.value,g=Af();f.forEach((_=>{if(!i.has(_)){const b=kf(t.get(_),r.get(_));b!==null&&g.set(_,b),i=i.add(_)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return C.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return hT(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ef(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):C.resolve(_n());let c=Zr,u=i;return a.next((h=>C.forEach(h,((f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),i.get(f)?C.resolve():this.remoteDocumentCache.getEntry(e,f).next((_=>{u=u.insert(f,_)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,u,h,J()))).next((f=>({batchId:c,changes:vf(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next((r=>{let s=Fr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let a=Fr();return this.indexManager.getCollectionParents(e,i).next((c=>C.forEach(c,(u=>{const h=(function(g,_){return new ur(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next((f=>{f.forEach(((g,_)=>{a=a.insert(g,_)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s)))).next((a=>{i.forEach(((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,Ne.newInvalidDocument(f)))}));let c=Fr();return a.forEach(((u,h)=>{const f=i.get(u);f!==void 0&&Hr(f.mutation,h,We.empty(),oe.now()),Li(t,h)&&(c=c.insert(u,h))})),c}))}}class dv{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return C.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:dt(s.createTime)}})(t)),C.resolve()}getNamedQuery(e,t){return C.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:tv(s.bundledQuery),readTime:dt(s.readTime)}})(t)),C.resolve()}}class fv{constructor(){this.overlays=new ae(B.comparator),this.Lr=new Map}getOverlay(e,t){return C.resolve(this.overlays.get(t))}getOverlays(e,t){const r=_n();return C.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,i)=>{this.bt(e,t,i)})),C.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(r)),C.resolve()}getOverlaysForCollection(e,t,r){const s=_n(),i=t.length+1,a=new B(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return C.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new ae(((h,f)=>h-f));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=_n(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=_n(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,f)=>c.set(h,f))),!(c.size()>=s)););return C.resolve(c)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new DT(t,r));let i=this.Lr.get(t);i===void 0&&(i=J(),this.Lr.set(t,i)),this.Lr.set(t,i.add(r.key))}}class pv{constructor(){this.sessionToken=Ce.EMPTY_BYTE_STRING}getSessionToken(e){return C.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,C.resolve()}}class Ya{constructor(){this.kr=new we(be.Kr),this.qr=new we(be.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new be(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new be(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new B(new se([])),r=new be(t,e),s=new be(t,e+1),i=[];return this.qr.forEachInRange([r,s],(a=>{this.Wr(a),i.push(a.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new B(new se([])),r=new be(t,e),s=new be(t,e+1);let i=J();return this.qr.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const t=new be(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class be{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return B.comparator(e.key,t.key)||Y(e.Hr,t.Hr)}static Ur(e,t){return Y(e.Hr,t.Hr)||B.comparator(e.key,t.key)}}class mv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new we(be.Kr)}checkEmpty(e){return C.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new kT(i,t,r,s);this.mutationQueue.push(a);for(const c of s)this.Jr=this.Jr.add(new be(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return C.resolve(a)}lookupMutationBatch(e,t){return C.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),i=s<0?0:s;return C.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(this.mutationQueue.length===0?Ba:this.Yn-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new be(t,0),s=new be(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],(a=>{const c=this.Zr(a.Hr);i.push(c)})),C.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new we(Y);return t.forEach((s=>{const i=new be(s,0),a=new be(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],(c=>{r=r.add(c.Hr)}))})),C.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;B.isDocumentKey(i)||(i=i.child(""));const a=new be(new B(i),0);let c=new we(Y);return this.Jr.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.Hr)),!0)}),a),C.resolve(this.Yr(c))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){te(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return C.forEach(t.mutations,(s=>{const i=new be(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new be(t,0),s=this.Jr.firstAfterOrEqual(r);return C.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,C.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gv{constructor(e){this.ti=e,this.docs=(function(){return new ae(B.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,a=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return C.resolve(r?r.document.mutableCopy():Ne.newInvalidDocument(t))}getEntries(e,t){let r=bt();return t.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ne.newInvalidDocument(s))})),C.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=bt();const a=t.path,c=new B(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||jI(BI(f),r)<=0||(s.has(f.key)||Li(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return C.resolve(i)}getAllFromCollectionGroup(e,t,r,s){q(9500)}ni(e,t){return C.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new _v(this)}getSize(e){return C.resolve(this.size)}}class _v extends lv{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),C.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class yv{constructor(e){this.persistence=e,this.ri=new kn((t=>qa(t)),za),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.ii=0,this.si=new Ya,this.targetCount=0,this.oi=rr._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),C.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new rr(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,C.resolve()}updateTargetData(e,t){return this.lr(t),C.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.ri.forEach(((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),C.waitFor(i).next((()=>s))}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return C.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),C.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),C.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),C.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return C.resolve(r)}containsKey(e,t){return C.resolve(this.si.containsKey(t))}}class zf{constructor(e,t){this._i={},this.overlays={},this.ai=new Ni(0),this.ui=!1,this.ui=!0,this.ci=new pv,this.referenceDelegate=e(this),this.li=new yv(this),this.indexManager=new nv,this.remoteDocumentCache=(function(s){return new gv(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new ev(t),this.Pi=new dv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new mv(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){x("MemoryPersistence","Starting transaction:",e);const s=new Ev(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((i=>this.referenceDelegate.Ii(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(e,t){return C.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class Ev extends qI{constructor(e){super(),this.currentSequenceNumber=e}}class Ja{constructor(e){this.persistence=e,this.Ri=new Ya,this.Ai=null}static Vi(e){return new Ja(e)}get di(){if(this.Ai)return this.Ai;throw q(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),C.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),C.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),C.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.di.add(i.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.di,(r=>{const s=B.fromPath(r);return this.mi(e,s).next((i=>{i||t.removeEntry(s,z.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return C.or([()=>C.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class yi{constructor(e,t){this.persistence=e,this.fi=new kn((r=>WI(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=cv(this,t)}static Vi(e,t){return new yi(e,t)}Ti(){}Ii(e){return C.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return C.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((i=>i?C.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,(a=>this.wr(e,a,t).next((c=>{c||(r++,i.removeEntry(a,z.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),C.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),C.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),C.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),C.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qs(e.data.value)),t}wr(e,t,r){return C.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return C.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Xa{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=J(),s=J();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Xa(e,t.fromCache,r,s)}}class wv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Iv{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Rg()?8:zI(Oe())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.gs(e,t).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ps(e,t,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new wv;return this.ys(e,t,a).next((c=>{if(i.result=c,this.As)return this.ws(e,t,a,c.size)}))})).next((()=>i.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(jn()<=Q.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",$n(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),C.resolve()):(jn()<=Q.DEBUG&&x("QueryEngine","Query:",$n(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(jn()<=Q.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",$n(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ht(t))):C.resolve())}gs(e,t){if(Ru(t))return C.resolve(null);let r=ht(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=ca(t,null,"F"),r=ht(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const a=J(...i);return this.fs.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.bs(t,c);return this.Ss(t,h,a,u.readTime)?this.gs(e,ca(t,null,"F")):this.Ds(e,h,t,u)}))))})))))}ps(e,t,r,s){return Ru(t)||s.isEqual(z.min())?C.resolve(null):this.fs.getDocuments(e,r).next((i=>{const a=this.bs(t,i);return this.Ss(t,a,r,s)?C.resolve(null):(jn()<=Q.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$n(t)),this.Ds(e,a,t,FI(s,Zr)).next((c=>c)))}))}bs(e,t){let r=new we(If(e));return t.forEach(((s,i)=>{Li(e,i)&&(r=r.add(i))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,t,r){return jn()<=Q.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",$n(t)),this.fs.getDocumentsMatchingQuery(e,t,Wt.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((i=>(t.forEach((a=>{i=i.insert(a.key,a)})),i)))}}const Za="LocalStore",Tv=3e8;class vv{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new ae(Y),this.Fs=new kn((i=>qa(i)),za),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hv(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Av(n,e,t,r){return new vv(n,e,t,r)}async function Gf(n,e){const t=G(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],c=[];let u=J();for(const h of s){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){c.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next((h=>({Ns:h,removedBatchIds:a,addedBatchIds:c})))}))}))}function bv(n,e){const t=G(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=t.xs.newChangeBuffer({trackRemovals:!0});return(function(c,u,h,f){const g=h.batch,_=g.keys();let b=C.resolve();return _.forEach((P=>{b=b.next((()=>f.getEntry(u,P))).next((D=>{const k=h.docVersions.get(P);te(k!==null,48541),D.version.compareTo(k)<0&&(g.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),f.addEntry(D)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(t,r,e,i).next((()=>i.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=J();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function Wf(n){const e=G(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function Rv(n,e){const t=G(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const c=[];e.targetChanges.forEach(((f,g)=>{const _=s.get(g);if(!_)return;c.push(t.li.removeMatchingKeys(i,f.removedDocuments,g).next((()=>t.li.addMatchingKeys(i,f.addedDocuments,g))));let b=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(Ce.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):f.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(f.resumeToken,r)),s=s.insert(g,b),(function(D,k,V){return D.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=Tv?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(_,b,f)&&c.push(t.li.updateTargetData(i,b))}));let u=bt(),h=J();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(Sv(i,a,e.documentUpdates).next((f=>{u=f.Bs,h=f.Ls}))),!r.isEqual(z.min())){const f=t.li.getLastRemoteSnapshotVersion(i).next((g=>t.li.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return C.waitFor(c).next((()=>a.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,u,h))).next((()=>u))})).then((i=>(t.vs=s,i)))}function Sv(n,e,t){let r=J(),s=J();return t.forEach((i=>r=r.add(i))),e.getEntries(n,r).next((i=>{let a=bt();return t.forEach(((c,u)=>{const h=i.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(z.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):x(Za,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)})),{Bs:a,Ls:s}}))}function Cv(n,e){const t=G(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ba),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Pv(n,e){const t=G(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((i=>i?(s=i,C.resolve(s)):t.li.allocateTargetId(r).next((a=>(s=new Bt(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function fa(n,e,t){const r=G(n),s=r.vs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!lr(a))throw a;x(Za,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Fu(n,e,t){const r=G(n);let s=z.min(),i=J();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,h,f){const g=G(u),_=g.Fs.get(f);return _!==void 0?C.resolve(g.vs.get(_)):g.li.getTargetData(h,f)})(r,a,ht(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,c.targetId).next((u=>{i=u}))})).next((()=>r.Cs.getDocumentsMatchingQuery(a,e,t?s:z.min(),t?i:J()))).next((c=>(kv(r,pT(e),c),{documents:c,ks:i})))))}function kv(n,e,t){let r=n.Ms.get(e)||z.min();t.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),n.Ms.set(e,r)}class Bu{constructor(){this.activeTargetIds=wT()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dv{constructor(){this.vo=new Bu,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Bu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Nv{Mo(e){}shutdown(){}}const ju="ConnectivityMonitor";class $u{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){x(ju,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){x(ju,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Fs=null;function pa(){return Fs===null?Fs=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fs++,"0x"+Fs.toString(16)}const Do="RestConnection",Vv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Ov{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===fi?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,i){const a=pa(),c=this.Qo(e,t.toUriEncodedString());x(Do,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:h}=new URL(c),f=Xt(h);return this.zo(e,c,u,r,f).then((g=>(x(Do,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw Zn(Do,`RPC '${e}' ${a} failed with error: `,g,"url: ",c,"request:",r),g}))}jo(e,t,r,s,i,a){return this.Wo(e,t,r,s,i)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ar})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}Qo(e,t){const r=Vv[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class xv{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ke="WebChannelConnection",Vr=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Yn extends Ov{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Yn.c_){const e=Yd();Vr(e,Qd.STAT_EVENT,(t=>{t.stat===ta.PROXY?x(ke,"STAT_EVENT: detected buffering proxy"):t.stat===ta.NOPROXY&&x(ke,"STAT_EVENT: detected no buffering proxy")})),Yn.c_=!0}}zo(e,t,r,s,i){const a=pa();return new Promise(((c,u)=>{const h=new Hd;h.setWithCredentials(!0),h.listenOnce(Kd.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Ks.NO_ERROR:const g=h.getResponseJson();x(ke,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),c(g);break;case Ks.TIMEOUT:x(ke,`RPC '${e}' ${a} timed out`),u(new O(S.DEADLINE_EXCEEDED,"Request time out"));break;case Ks.HTTP_ERROR:const _=h.getStatus();if(x(ke,`RPC '${e}' ${a} failed with status:`,_,"response text:",h.getResponseText()),_>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const P=b?.error;if(P&&P.status&&P.message){const D=(function(V){const U=V.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(U)>=0?U:S.UNKNOWN})(P.status);u(new O(D,P.message))}else u(new O(S.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new O(S.UNAVAILABLE,"Connection failed."));break;default:q(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{x(ke,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(s);x(ke,`RPC '${e}' ${a} sending request:`,s),h.send(t,"POST",f,r,15)}))}T_(e,t,r){const s=pa(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=i.join("");x(ke,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let g=!1,_=!1;const b=new xv({Ho:P=>{_?x(ke,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(x(ke,`Opening RPC '${e}' stream ${s} transport.`),f.open(),g=!0),x(ke,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},Jo:()=>f.close()});return Vr(f,Ur.EventType.OPEN,(()=>{_||(x(ke,`RPC '${e}' stream ${s} transport opened.`),b.i_())})),Vr(f,Ur.EventType.CLOSE,(()=>{_||(_=!0,x(ke,`RPC '${e}' stream ${s} transport closed`),b.o_(),this.E_(f))})),Vr(f,Ur.EventType.ERROR,(P=>{_||(_=!0,Zn(ke,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),b.o_(new O(S.UNAVAILABLE,"The operation could not be completed")))})),Vr(f,Ur.EventType.MESSAGE,(P=>{if(!_){const D=P.data[0];te(!!D,16349);const k=D,V=k?.error||k[0]?.error;if(V){x(ke,`RPC '${e}' stream ${s} received error:`,V);const U=V.status;let F=(function(X){const I=me[X];if(I!==void 0)return Nf(I)})(U),W=V.message;F===void 0&&(F=S.INTERNAL,W="Unknown error status: "+U+" with message "+V.message),_=!0,b.o_(new O(F,W)),f.close()}else x(ke,`RPC '${e}' stream ${s} received:`,D),b.__(D)}})),Yn.u_(),setTimeout((()=>{b.s_()}),0),b}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Jd()}}function Lv(n){return new Yn(n)}function No(){return typeof document<"u"?document:null}function ji(n){return new BT(n,!0)}Yn.c_=!1;class Hf{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&x("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const qu="PersistentStream";class Kf{constructor(e,t,r,s,i,a,c,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hf(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(At(t.toString()),At("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new O(S.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return x(qu,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(x(qu,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Mv extends Kf{constructor(e,t,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=qT(this.serializer,e),r=(function(i){if(!("targetChange"in i))return z.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?z.min():a.readTime?dt(a.readTime):z.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=da(this.serializer),t.addTarget=(function(i,a){let c;const u=a.target;if(c=oa(u)?{documents:WT(i,u)}:{query:HT(i,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=xf(i,a.resumeToken);const h=la(i,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(z.min())>0){c.readTime=_i(i,a.snapshotVersion.toTimestamp());const h=la(i,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=QT(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=da(this.serializer),t.removeTarget=e,this.K_(t)}}class Uv extends Kf{constructor(e,t,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=GT(e.writeResults,e.commitTime),r=dt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=da(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>zT(this.serializer,r)))};this.K_(t)}}class Fv{}class Bv extends Fv{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new O(S.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,ua(t,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new O(S.UNKNOWN,i.toString())}))}jo(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.jo(e,ua(t,r),s,a,c,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new O(S.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function jv(n,e,t,r){return new Bv(n,e,t,r)}class $v{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(At(t),this.aa=!1):x("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const bn="RemoteStore";class qv{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((a=>{r.enqueueAndForget((async()=>{Dn(this)&&(x(bn,"Restarting streams for network reachability change."),await(async function(u){const h=G(u);h.Ea.add(4),await gs(h),h.Va.set("Unknown"),h.Ea.delete(4),await $i(h)})(this))}))})),this.Va=new $v(r,s)}}async function $i(n){if(Dn(n))for(const e of n.Ra)await e(!0)}async function gs(n){for(const e of n.Ra)await e(!1)}function Qf(n,e){const t=G(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),rc(t)?nc(t):hr(t).O_()&&tc(t,e))}function ec(n,e){const t=G(n),r=hr(t);t.Ia.delete(e),r.O_()&&Yf(t,e),t.Ia.size===0&&(r.O_()?r.L_():Dn(t)&&t.Va.set("Unknown"))}function tc(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(z.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hr(n).Z_(e)}function Yf(n,e){n.da.$e(e),hr(n).X_(e)}function nc(n){n.da=new LT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),hr(n).start(),n.Va.ua()}function rc(n){return Dn(n)&&!hr(n).x_()&&n.Ia.size>0}function Dn(n){return G(n).Ea.size===0}function Jf(n){n.da=void 0}async function zv(n){n.Va.set("Online")}async function Gv(n){n.Ia.forEach(((e,t)=>{tc(n,e)}))}async function Wv(n,e){Jf(n),rc(n)?(n.Va.ha(e),nc(n)):n.Va.set("Unknown")}async function Hv(n,e,t){if(n.Va.set("Online"),e instanceof Of&&e.state===2&&e.cause)try{await(async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.da.removeTarget(c))})(n,e)}catch(r){x(bn,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ei(n,r)}else if(e instanceof Xs?n.da.Xe(e):e instanceof Vf?n.da.st(e):n.da.tt(e),!t.isEqual(z.min()))try{const r=await Wf(n.localStore);t.compareTo(r)>=0&&await(function(i,a){const c=i.da.Tt(a);return c.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(u.resumeToken,a))}})),c.targetMismatches.forEach(((u,h)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(Ce.EMPTY_BYTE_STRING,f.snapshotVersion)),Yf(i,u);const g=new Bt(f.target,u,h,f.sequenceNumber);tc(i,g)})),i.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){x(bn,"Failed to raise snapshot:",r),await Ei(n,r)}}async function Ei(n,e,t){if(!lr(e))throw e;n.Ea.add(1),await gs(n),n.Va.set("Offline"),t||(t=()=>Wf(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{x(bn,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await $i(n)}))}function Xf(n,e){return e().catch((t=>Ei(n,t,e)))}async function qi(n){const e=G(n),t=Yt(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ba;for(;Kv(e);)try{const s=await Cv(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,Qv(e,s)}catch(s){await Ei(e,s)}Zf(e)&&ep(e)}function Kv(n){return Dn(n)&&n.Ta.length<10}function Qv(n,e){n.Ta.push(e);const t=Yt(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Zf(n){return Dn(n)&&!Yt(n).x_()&&n.Ta.length>0}function ep(n){Yt(n).start()}async function Yv(n){Yt(n).ra()}async function Jv(n){const e=Yt(n);for(const t of n.Ta)e.ea(t.mutations)}async function Xv(n,e,t){const r=n.Ta.shift(),s=Ha.from(r,e,t);await Xf(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await qi(n)}async function Zv(n,e){e&&Yt(n).Y_&&await(async function(r,s){if((function(a){return VT(a)&&a!==S.ABORTED})(s.code)){const i=r.Ta.shift();Yt(r).B_(),await Xf(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await qi(r)}})(n,e),Zf(n)&&ep(n)}async function zu(n,e){const t=G(n);t.asyncQueue.verifyOperationInProgress(),x(bn,"RemoteStore received new credentials");const r=Dn(t);t.Ea.add(3),await gs(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $i(t)}async function eA(n,e){const t=G(n);e?(t.Ea.delete(2),await $i(t)):e||(t.Ea.add(2),await gs(t),t.Va.set("Unknown"))}function hr(n){return n.ma||(n.ma=(function(t,r,s){const i=G(t);return i.sa(),new Mv(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Zo:zv.bind(null,n),Yo:Gv.bind(null,n),t_:Wv.bind(null,n),J_:Hv.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),rc(n)?nc(n):n.Va.set("Unknown")):(await n.ma.stop(),Jf(n))}))),n.ma}function Yt(n){return n.fa||(n.fa=(function(t,r,s){const i=G(t);return i.sa(),new Uv(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Yv.bind(null,n),t_:Zv.bind(null,n),ta:Jv.bind(null,n),na:Xv.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await qi(n)):(await n.fa.stop(),n.Ta.length>0&&(x(bn,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class sc{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new It,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const a=Date.now()+r,c=new sc(e,t,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ic(n,e){if(At("AsyncQueue",`${e}: ${n}`),lr(n))return new O(S.UNAVAILABLE,`${e}: ${n}`);throw n}class Jn{static emptySet(e){return new Jn(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||B.comparator(t.key,r.key):(t,r)=>B.comparator(t.key,r.key),this.keyedMap=Fr(),this.sortedSet=new ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jn)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Jn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Gu{constructor(){this.ga=new ae(B.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):q(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class sr{constructor(e,t,r,s,i,a,c,u,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,s,i){const a=[];return t.forEach((c=>{a.push({type:0,doc:c})})),new sr(e,t,Jn.emptySet(t),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class tA{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class nA{constructor(){this.queries=Wu(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=G(t),i=s.queries;s.queries=Wu(),i.forEach(((a,c)=>{for(const u of c.ba)u.onError(r)}))})(this,new O(S.ABORTED,"Firestore shutting down"))}}function Wu(){return new kn((n=>wf(n)),xi)}async function tp(n,e){const t=G(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new tA,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const c=ic(a,`Initialization of query '${$n(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,i),i.ba.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&oc(t)}async function np(n,e){const t=G(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function rA(n,e){const t=G(n);let r=!1;for(const s of e){const i=s.query,a=t.queries.get(i);if(a){for(const c of a.ba)c.Fa(s)&&(r=!0);a.wa=s}}r&&oc(t)}function sA(n,e,t){const r=G(n),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(t);r.queries.delete(e)}function oc(n){n.Ca.forEach((e=>{e.next()}))}var ma,Hu;(Hu=ma||(ma={})).Ma="default",Hu.Cache="cache";class rp{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new sr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=sr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ma.Cache}}class sp{constructor(e){this.key=e}}class ip{constructor(e){this.key=e}}class iA{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=J(),this.mutatedKeys=J(),this.eu=If(e),this.tu=new Jn(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new Gu,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,g)=>{const _=s.get(f),b=Li(this.query,g)?g:null,P=!!_&&this.mutatedKeys.has(_.key),D=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let k=!1;_&&b?_.data.isEqual(b.data)?P!==D&&(r.track({type:3,doc:b}),k=!0):this.su(_,b)||(r.track({type:2,doc:b}),k=!0,(u&&this.eu(b,u)>0||h&&this.eu(b,h)<0)&&(c=!0)):!_&&b?(r.track({type:0,doc:b}),k=!0):_&&!b&&(r.track({type:1,doc:_}),k=!0,(u||h)&&(c=!0)),k&&(b?(a=a.add(b),i=D?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Ss:c,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((f,g)=>(function(b,P){const D=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{Vt:k})}};return D(b)-D(P)})(f.type,g.type)||this.eu(f.doc,g.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,h=u!==this.Xa;return this.Xa=u,a.length!==0||h?{snapshot:new sr(this.query,e.tu,i,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gu,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=J(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new ip(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new sp(r))})),t}cu(e){this.Za=e.ks,this.Ya=J();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return sr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ac="SyncEngine";class oA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class aA{constructor(e){this.key=e,this.hu=!1}}class cA{constructor(e,t,r,s,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new kn((c=>wf(c)),xi),this.Iu=new Map,this.Eu=new Set,this.Ru=new ae(B.comparator),this.Au=new Map,this.Vu=new Ya,this.du={},this.mu=new Map,this.fu=rr.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lA(n,e,t=!0){const r=hp(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await op(r,e,t,!0),s}async function uA(n,e){const t=hp(n);await op(t,e,!0,!1)}async function op(n,e,t,r){const s=await Pv(n.localStore,ht(e)),i=s.targetId,a=n.sharedClientState.addLocalQueryTarget(i,t);let c;return r&&(c=await hA(n,e,i,a==="current",s.resumeToken)),n.isPrimaryClient&&t&&Qf(n.remoteStore,s),c}async function hA(n,e,t,r,s){n.pu=(g,_,b)=>(async function(D,k,V,U){let F=k.view.ru(V);F.Ss&&(F=await Fu(D.localStore,k.query,!1).then((({documents:I})=>k.view.ru(I,F))));const W=U&&U.targetChanges.get(k.targetId),ee=U&&U.targetMismatches.get(k.targetId)!=null,X=k.view.applyChanges(F,D.isPrimaryClient,W,ee);return Qu(D,k.targetId,X.au),X.snapshot})(n,g,_,b);const i=await Fu(n.localStore,e,!0),a=new iA(e,i.ks),c=a.ru(i.documents),u=ms.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),h=a.applyChanges(c,n.isPrimaryClient,u);Qu(n,t,h.au);const f=new oA(e,t,a);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function dA(n,e,t){const r=G(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!xi(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await fa(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&ec(r.remoteStore,s.targetId),ga(r,s.targetId)})).catch(cr)):(ga(r,s.targetId),await fa(r.localStore,s.targetId,!0))}async function fA(n,e){const t=G(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ec(t.remoteStore,r.targetId))}async function pA(n,e,t){const r=IA(n);try{const s=await(function(a,c){const u=G(a),h=oe.now(),f=c.reduce(((b,P)=>b.add(P.key)),J());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let P=bt(),D=J();return u.xs.getEntries(b,f).next((k=>{P=k,P.forEach(((V,U)=>{U.isValidDocument()||(D=D.add(V))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,P))).next((k=>{g=k;const V=[];for(const U of c){const F=CT(U,g.get(U.key).overlayedDocument);F!=null&&V.push(new rn(U.key,F,df(F.value.mapValue),Fe.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,V,c)})).next((k=>{_=k;const V=k.applyToLocalDocumentSet(g,D);return u.documentOverlayCache.saveOverlays(b,k.batchId,V)}))})).then((()=>({batchId:_.batchId,changes:vf(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(a,c,u){let h=a.du[a.currentUser.toKey()];h||(h=new ae(Y)),h=h.insert(c,u),a.du[a.currentUser.toKey()]=h})(r,s.batchId,t),await _s(r,s.changes),await qi(r.remoteStore)}catch(s){const i=ic(s,"Failed to persist write");t.reject(i)}}async function ap(n,e){const t=G(n);try{const r=await Rv(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const a=t.Au.get(i);a&&(te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?te(a.hu,14607):s.removedDocuments.size>0&&(te(a.hu,42227),a.hu=!1))})),await _s(t,r,e)}catch(r){await cr(r)}}function Ku(n,e,t){const r=G(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(a,c){const u=G(a);u.onlineState=c;let h=!1;u.queries.forEach(((f,g)=>{for(const _ of g.ba)_.va(c)&&(h=!0)})),h&&oc(u)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mA(n,e,t){const r=G(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new ae(B.comparator);a=a.insert(i,Ne.newNoDocument(i,z.min()));const c=J().add(i),u=new Bi(z.min(),new Map,new ae(Y),a,c);await ap(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),cc(r)}else await fa(r.localStore,e,!1).then((()=>ga(r,e,t))).catch(cr)}async function gA(n,e){const t=G(n),r=e.batch.batchId;try{const s=await bv(t.localStore,e);lp(t,r,null),cp(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await _s(t,s)}catch(s){await cr(s)}}async function _A(n,e,t){const r=G(n);try{const s=await(function(a,c){const u=G(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return u.mutationQueue.lookupMutationBatch(h,c).next((g=>(te(g!==null,37113),f=g.keys(),u.mutationQueue.removeMutationBatch(h,g)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>u.localDocuments.getDocuments(h,f)))}))})(r.localStore,e);lp(r,e,t),cp(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await _s(r,s)}catch(s){await cr(s)}}function cp(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function lp(n,e,t){const r=G(n);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function ga(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||up(n,r)}))}function up(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(ec(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),cc(n))}function Qu(n,e,t){for(const r of t)r instanceof sp?(n.Vu.addReference(r.key,e),yA(n,r)):r instanceof ip?(x(ac,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||up(n,r.key)):q(19791,{wu:r})}function yA(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(x(ac,"New document in limbo: "+t),n.Eu.add(r),cc(n))}function cc(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new B(se.fromString(e)),r=n.fu.next();n.Au.set(r,new aA(t)),n.Ru=n.Ru.insert(t,r),Qf(n.remoteStore,new Bt(ht(Ga(t.path)),r,"TargetPurposeLimboResolution",Ni.ce))}}async function _s(n,e,t){const r=G(n),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{a.push(r.pu(u,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const f=h?!h.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(h){s.push(h);const f=Xa.Es(u.targetId,h);i.push(f)}})))})),await Promise.all(a),r.Pu.J_(s),await(async function(u,h){const f=G(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>C.forEach(h,(_=>C.forEach(_.Ts,(b=>f.persistence.referenceDelegate.addReference(g,_.targetId,b))).next((()=>C.forEach(_.Is,(b=>f.persistence.referenceDelegate.removeReference(g,_.targetId,b)))))))))}catch(g){if(!lr(g))throw g;x(Za,"Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const b=f.vs.get(_),P=b.snapshotVersion,D=b.withLastLimboFreeSnapshotVersion(P);f.vs=f.vs.insert(_,D)}}})(r.localStore,i))}async function EA(n,e){const t=G(n);if(!t.currentUser.isEqual(e)){x(ac,"User change. New user:",e.toKey());const r=await Gf(t.localStore,e);t.currentUser=e,(function(i,a){i.mu.forEach((c=>{c.forEach((u=>{u.reject(new O(S.CANCELLED,a))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _s(t,r.Ns)}}function wA(n,e){const t=G(n),r=t.Au.get(e);if(r&&r.hu)return J().add(r.key);{let s=J();const i=t.Iu.get(e);if(!i)return s;for(const a of i){const c=t.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function hp(n){const e=G(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ap.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mA.bind(null,e),e.Pu.J_=rA.bind(null,e.eventManager),e.Pu.yu=sA.bind(null,e.eventManager),e}function IA(n){const e=G(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_A.bind(null,e),e}class wi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ji(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Av(this.persistence,new Iv,e.initialUser,this.serializer)}Cu(e){return new zf(Ja.Vi,this.serializer)}Du(e){return new Dv}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wi.provider={build:()=>new wi};class TA extends wi{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){te(this.persistence.referenceDelegate instanceof yi,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ov(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?je.withCacheSize(this.cacheSizeBytes):je.DEFAULT;return new zf((r=>yi.Vi(r,t)),this.serializer)}}class _a{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ku(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=EA.bind(null,this.syncEngine),await eA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nA})()}createDatastore(e){const t=ji(e.databaseInfo.databaseId),r=Lv(e.databaseInfo);return jv(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,i,a,c){return new qv(r,s,i,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ku(this.syncEngine,t,0)),(function(){return $u.v()?new $u:new Nv})())}createSyncEngine(e,t){return(function(s,i,a,c,u,h,f){const g=new cA(s,i,a,c,u,h);return f&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=G(t);x(bn,"RemoteStore shutting down."),r.Ea.add(5),await gs(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_a.provider={build:()=>new _a};class dp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):At("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Jt="FirestoreClient";class vA{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=De.UNAUTHENTICATED,this.clientId=Fa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{x(Jt,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(x(Jt,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new It;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ic(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Vo(n,e){n.asyncQueue.verifyOperationInProgress(),x(Jt,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Gf(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Yu(n,e){n.asyncQueue.verifyOperationInProgress();const t=await AA(n);x(Jt,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>zu(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>zu(e.remoteStore,s))),n._onlineComponents=e}async function AA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){x(Jt,"Using user provided OfflineComponentProvider");try{await Vo(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===S.FAILED_PRECONDITION||s.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Zn("Error using user provided cache. Falling back to memory cache: "+t),await Vo(n,new wi)}}else x(Jt,"Using default OfflineComponentProvider"),await Vo(n,new TA(void 0));return n._offlineComponents}async function fp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(x(Jt,"Using user provided OnlineComponentProvider"),await Yu(n,n._uninitializedComponentsProvider._online)):(x(Jt,"Using default OnlineComponentProvider"),await Yu(n,new _a))),n._onlineComponents}function bA(n){return fp(n).then((e=>e.syncEngine))}async function pp(n){const e=await fp(n),t=e.eventManager;return t.onListen=lA.bind(null,e.syncEngine),t.onUnlisten=dA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fA.bind(null,e.syncEngine),t}function RA(n,e,t={}){const r=new It;return n.asyncQueue.enqueueAndForget((async()=>(function(i,a,c,u,h){const f=new dp({next:_=>{f.Nu(),a.enqueueAndForget((()=>np(i,g)));const b=_.docs.has(c);!b&&_.fromCache?h.reject(new O(S.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&u&&u.source==="server"?h.reject(new O(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new rp(Ga(c.path),f,{includeMetadataChanges:!0,Ka:!0});return tp(i,g)})(await pp(n),n.asyncQueue,e,t,r))),r.promise}function SA(n,e,t={}){const r=new It;return n.asyncQueue.enqueueAndForget((async()=>(function(i,a,c,u,h){const f=new dp({next:_=>{f.Nu(),a.enqueueAndForget((()=>np(i,g))),_.fromCache&&u.source==="server"?h.reject(new O(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new rp(c,f,{includeMetadataChanges:!0,Ka:!0});return tp(i,g)})(await pp(n),n.asyncQueue,e,t,r))),r.promise}function CA(n,e){const t=new It;return n.asyncQueue.enqueueAndForget((async()=>pA(await bA(n),e,t))),t.promise}function mp(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const PA="ComponentProvider",Ju=new Map;function kA(n,e,t,r,s){return new QI(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,mp(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}const gp="firestore.googleapis.com",Xu=!0;class Zu{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new O(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gp,this.ssl=Xu}else this.host=e.host,this.ssl=e.ssl??Xu;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qf;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sv)throw new O(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mp(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new O(S.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new O(S.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new O(S.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zi{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new CI;switch(r.type){case"firstParty":return new NI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Ju.get(t);r&&(x(PA,"Removing Datastore"),Ju.delete(t),r.terminate())})(this),Promise.resolve()}}function DA(n,e,t,r={}){n=Je(n,zi);const s=Xt(e),i=n._getSettings(),a={...i,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(Ia(`https://${c}`),Ta("Firestore",!0)),i.host!==gp&&i.host!==c&&Zn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!Gt(u,a)&&(n._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=De.MOCK_USER;else{h=xh(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new O(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new De(g)}n._authCredentials=new PI(new Zd(h,f))}}class Nn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nn(this.firestore,e,this._query)}}class pe{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pe(this.firestore,e,this._key)}toJSON(){return{type:pe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(fs(t,pe._jsonSchema))return new pe(e,r||null,new B(se.fromString(t.referencePath)))}}pe._jsonSchemaVersion="firestore/documentReference/1.0",pe._jsonSchema={type:_e("string",pe._jsonSchemaVersion),referencePath:_e("string")};class zt extends Nn{constructor(e,t,r){super(e,t,Ga(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pe(this.firestore,null,new B(e))}withConverter(e){return new zt(this.firestore,e,this._path)}}function mS(n,e,...t){if(n=ne(n),ef("collection","path",e),n instanceof zi){const r=se.fromString(e,...t);return du(r),new zt(n,null,r)}{if(!(n instanceof pe||n instanceof zt))throw new O(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(se.fromString(e,...t));return du(r),new zt(n.firestore,null,r)}}function NA(n,e,...t){if(n=ne(n),arguments.length===1&&(e=Fa.newId()),ef("doc","path",e),n instanceof zi){const r=se.fromString(e,...t);return hu(r),new pe(n,null,new B(r))}{if(!(n instanceof pe||n instanceof zt))throw new O(S.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(se.fromString(e,...t));return hu(r),new pe(n.firestore,n instanceof zt?n.converter:null,new B(r))}}const eh="AsyncQueue";class th{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hf(this,"async_queue_retry"),this._c=()=>{const r=No();r&&x(eh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=No();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=No();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new It;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!lr(e))throw e;x(eh,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,At("INTERNAL UNHANDLED ERROR: ",nh(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=sc.createAndSchedule(this,e,t,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&q(47125,{Pc:nh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function nh(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class sn extends zi{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new th,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new th(e),this._firestoreClient=void 0,await e}}}function VA(n,e){const t=typeof n=="object"?n:cs(),r=typeof n=="string"?n:fi,s=Zt(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Nh("firestore");i&&DA(s,...i)}return s}function Gi(n){if(n._terminated)throw new O(S.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||OA(n),n._firestoreClient}function OA(n){const e=n._freezeSettings(),t=kA(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new vA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(n._componentsProvider))}class Qe{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qe(Ce.fromBase64String(e))}catch(t){throw new O(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qe(Ce.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qe._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fs(e,Qe._jsonSchema))return Qe.fromBase64String(e.bytes)}}Qe._jsonSchemaVersion="firestore/bytes/1.0",Qe._jsonSchema={type:_e("string",Qe._jsonSchemaVersion),bytes:_e("string")};class Wi{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Se(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hi{constructor(e){this._methodName=e}}class ft{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ft._jsonSchemaVersion}}static fromJSON(e){if(fs(e,ft._jsonSchema))return new ft(e.latitude,e.longitude)}}ft._jsonSchemaVersion="firestore/geoPoint/1.0",ft._jsonSchema={type:_e("string",ft._jsonSchemaVersion),latitude:_e("number"),longitude:_e("number")};class tt{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:tt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fs(e,tt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new tt(e.vectorValues);throw new O(S.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tt._jsonSchemaVersion="firestore/vectorValue/1.0",tt._jsonSchema={type:_e("string",tt._jsonSchemaVersion),vectorValues:_e("object")};const xA=/^__.*__$/;class LA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new rn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ps(e,this.data,t,this.fieldTransforms)}}class _p{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new rn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yp(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{dataSource:n})}}class lc{constructor(e,t,r,s,i,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new lc({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ii(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(yp(this.dataSource)&&xA.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class MA{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ji(e)}createContext(e,t,r,s=!1){return new lc({dataSource:e,methodName:t,targetDoc:r,path:Se.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ys(n){const e=n._freezeSettings(),t=ji(n._databaseId);return new MA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uc(n,e,t,r,s,i={}){const a=n.createContext(i.merge||i.mergeFields?2:0,e,t,s);dc("Data must be an object, but it was:",a,r);const c=Ip(r,a);let u,h;if(i.merge)u=new We(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const _=ir(e,g,t);if(!a.contains(_))throw new O(S.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Ap(f,_)||f.push(_)}u=new We(f),h=a.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,h=a.fieldTransforms;return new LA(new $e(c),u,h)}class Ki extends Hi{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ki}}class hc extends Hi{_toFieldTransform(e){return new AT(e.path,new ss)}isEqual(e){return e instanceof hc}}function Ep(n,e,t,r){const s=n.createContext(1,e,t);dc("Data must be an object, but it was:",s,r);const i=[],a=$e.empty();nn(r,((u,h)=>{const f=vp(e,u,t);h=ne(h);const g=s.childContextForFieldPath(f);if(h instanceof Ki)i.push(f);else{const _=Es(h,g);_!=null&&(i.push(f),a.set(f,_))}}));const c=new We(i);return new _p(a,c,s.fieldTransforms)}function wp(n,e,t,r,s,i){const a=n.createContext(1,e,t),c=[ir(e,r,t)],u=[s];if(i.length%2!=0)throw new O(S.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<i.length;_+=2)c.push(ir(e,i[_])),u.push(i[_+1]);const h=[],f=$e.empty();for(let _=c.length-1;_>=0;--_)if(!Ap(h,c[_])){const b=c[_];let P=u[_];P=ne(P);const D=a.childContextForFieldPath(b);if(P instanceof Ki)h.push(b);else{const k=Es(P,D);k!=null&&(h.push(b),f.set(b,k))}}const g=new We(h);return new _p(f,g,a.fieldTransforms)}function UA(n,e,t,r=!1){return Es(t,n.createContext(r?4:3,e))}function Es(n,e){if(Tp(n=ne(n)))return dc("Unsupported field value:",e,n),Ip(n,e);if(n instanceof Hi)return(function(r,s){if(!yp(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const c of r){let u=Es(c,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}})(n,e)}return(function(r,s){if((r=ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=oe.fromDate(r);return{timestampValue:_i(s.serializer,i)}}if(r instanceof oe){const i=new oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_i(s.serializer,i)}}if(r instanceof ft)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qe)return{bytesValue:xf(s.serializer,r._byteString)};if(r instanceof pe){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qa(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof tt)return(function(a,c){const u=a instanceof tt?a.toArray():a;return{mapValue:{fields:{[uf]:{stringValue:hf},[pi]:{arrayValue:{values:u.map((f=>{if(typeof f!="number")throw c.createError("VectorValues must only contain numeric values.");return Wa(c.serializer,f)}))}}}}}})(r,s);if($f(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Di(r)}`)})(n,e)}function Ip(n,e){const t={};return rf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nn(n,((r,s)=>{const i=Es(s,e.childContextForField(r));i!=null&&(t[r]=i)})),{mapValue:{fields:t}}}function Tp(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof oe||n instanceof ft||n instanceof Qe||n instanceof pe||n instanceof Hi||n instanceof tt||$f(n))}function dc(n,e,t){if(!Tp(t)||!tf(t)){const r=Di(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function ir(n,e,t){if((e=ne(e))instanceof Wi)return e._internalPath;if(typeof e=="string")return vp(n,e);throw Ii("Field path arguments must be of type string or ",n,!1,void 0,t)}const FA=new RegExp("[~\\*/\\[\\]]");function vp(n,e,t){if(e.search(FA)>=0)throw Ii(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wi(...e.split("."))._internalPath}catch{throw Ii(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ii(n,e,t,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new O(S.INVALID_ARGUMENT,c+n+u)}function Ap(n,e){return n.some((t=>t.isEqual(e)))}class BA{convertValue(e,t="none"){switch(Qt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return de(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return nn(e,((s,i)=>{r[s]=this.convertValue(i,t)})),r}convertVectorValue(e){const t=e.fields?.[pi].arrayValue?.values?.map((r=>de(r.doubleValue)));return new tt(t)}convertGeoPoint(e){return new ft(de(e.latitude),de(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Oi(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(es(e));default:return null}}convertTimestamp(e){const t=Ht(e);return new oe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=se.fromString(e);te(jf(r),9688,{name:e});const s=new ts(r.get(1),r.get(3)),i=new B(r.popFirst(5));return s.isEqual(t)||At(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}class bp extends BA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qe(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pe(this.firestore,null,t)}}function gS(){return new hc("serverTimestamp")}const rh="@firebase/firestore",sh="4.10.0";class Rp{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(ir("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class jA extends Rp{data(){return super.data()}}function $A(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fc{}class Sp extends fc{}function _S(n,e,...t){let r=[];e instanceof fc&&r.push(e),r=r.concat(t),(function(i){const a=i.filter((u=>u instanceof mc)).length,c=i.filter((u=>u instanceof pc)).length;if(a>1||a>0&&c>0)throw new O(S.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class pc extends Sp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new pc(e,t,r)}_apply(e){const t=this._parse(e);return Cp(e._query,t),new Nn(e.firestore,e.converter,aa(e._query,t))}_parse(e){const t=ys(e.firestore);return(function(i,a,c,u,h,f,g){let _;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new O(S.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){oh(g,f);const P=[];for(const D of g)P.push(ih(u,i,D));_={arrayValue:{values:P}}}else _=ih(u,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||oh(g,f),_=UA(c,a,g,f==="in"||f==="not-in");return ge.create(h,f,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class mc extends fc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mc(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:st.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)Cp(a,u),a=aa(a,u)})(e._query,t),new Nn(e.firestore,e.converter,aa(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gc extends Sp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new gc(e,t)}_apply(e){const t=(function(s,i,a){if(s.startAt!==null)throw new O(S.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new O(S.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rs(i,a)})(e._query,this._field,this._direction);return new Nn(e.firestore,e.converter,fT(e._query,t))}}function yS(n,e="asc"){const t=e,r=ir("orderBy",n);return gc._create(r,t)}function ih(n,e,t){if(typeof(t=ne(t))=="string"){if(t==="")throw new O(S.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ef(e)&&t.indexOf("/")!==-1)throw new O(S.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(se.fromString(t));if(!B.isDocumentKey(r))throw new O(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wu(n,new B(r))}if(t instanceof pe)return wu(n,t._key);throw new O(S.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Di(t)}.`)}function oh(n,e){if(!Array.isArray(n)||n.length===0)throw new O(S.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Cp(n,e){const t=(function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new O(S.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(S.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function _c(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jr{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yn extends Rp{constructor(e,t,r,s,i,a){super(e,t,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ir("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(S.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=yn._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}yn._jsonSchemaVersion="firestore/documentSnapshot/1.0",yn._jsonSchema={type:_e("string",yn._jsonSchemaVersion),bundleSource:_e("string","DocumentSnapshot"),bundleName:_e("string"),bundle:_e("string")};class Zs extends yn{data(e={}){return super.data(e)}}class Xn{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new jr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Zs(this._firestore,this._userDataWriter,r.key,r,new jr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((c=>{const u=new Zs(s._firestore,s._userDataWriter,c.doc.key,c.doc,new jr(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const u=new Zs(s._firestore,s._userDataWriter,c.doc.key,c.doc,new jr(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:qA(c.type),doc:u,oldIndex:h,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(S.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fa.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:n})}}Xn._jsonSchemaVersion="firestore/querySnapshot/1.0",Xn._jsonSchema={type:_e("string",Xn._jsonSchemaVersion),bundleSource:_e("string","QuerySnapshot"),bundleName:_e("string"),bundle:_e("string")};class zA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ys(e)}set(e,t,r){this._verifyNotCommitted();const s=Oo(e,this._firestore),i=_c(s.converter,t,r),a=uc(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,Fe.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const i=Oo(e,this._firestore);let a;return a=typeof(t=ne(t))=="string"||t instanceof Wi?wp(this._dataReader,"WriteBatch.update",i._key,t,r,s):Ep(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(a.toMutation(i._key,Fe.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Oo(e,this._firestore);return this._mutations=this._mutations.concat(new Fi(t._key,Fe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oo(n,e){if((n=ne(n)).firestore!==e)throw new O(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function ES(n){n=Je(n,pe);const e=Je(n.firestore,sn),t=Gi(e);return RA(t,n._key).then((r=>GA(e,n,r)))}function wS(n){n=Je(n,Nn);const e=Je(n.firestore,sn),t=Gi(e),r=new bp(e);return $A(n._query),SA(t,n._query).then((s=>new Xn(e,r,n,s)))}function IS(n,e,t){n=Je(n,pe);const r=Je(n.firestore,sn),s=_c(n.converter,e,t),i=ys(r);return ws(r,[uc(i,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Fe.none())])}function TS(n,e,t,...r){n=Je(n,pe);const s=Je(n.firestore,sn),i=ys(s);let a;return a=typeof(e=ne(e))=="string"||e instanceof Wi?wp(i,"updateDoc",n._key,e,t,r):Ep(i,"updateDoc",n._key,e),ws(s,[a.toMutation(n._key,Fe.exists(!0))])}function vS(n){return ws(Je(n.firestore,sn),[new Fi(n._key,Fe.none())])}function AS(n,e){const t=Je(n.firestore,sn),r=NA(n),s=_c(n.converter,e),i=ys(n.firestore);return ws(t,[uc(i,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Fe.exists(!1))]).then((()=>r))}function ws(n,e){const t=Gi(n);return CA(t,e)}function GA(n,e,t){const r=t.docs.get(e._key),s=new bp(n);return new yn(n,s,e._key,r,new jr(t.hasPendingWrites,t.fromCache),e.converter)}function bS(n){return n=Je(n,sn),Gi(n),new zA(n,(e=>ws(n,e)))}(function(e,t=!0){SI(Cn),nt(new Ye("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new sn(new kI(r.getProvider("auth-internal")),new VI(a,r.getProvider("app-check-internal")),YI(a,s),a);return i={useFetchStreams:t,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),qe(rh,sh,e),qe(rh,sh,"esm2020")})();const Pp="firebasestorage.googleapis.com",kp="storageBucket",WA=120*1e3,HA=600*1e3;class he extends Xe{constructor(e,t,r=0){super(xo(e),`Firebase Storage: ${t} (${xo(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,he.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xo(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ue;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ue||(ue={}));function xo(n){return"storage/"+n}function yc(){const n="An unknown error occurred, please check the error payload for server response.";return new he(ue.UNKNOWN,n)}function KA(n){return new he(ue.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function QA(n){return new he(ue.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function YA(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new he(ue.UNAUTHENTICATED,n)}function JA(){return new he(ue.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function XA(n){return new he(ue.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function ZA(){return new he(ue.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eb(){return new he(ue.CANCELED,"User canceled the upload/download.")}function tb(n){return new he(ue.INVALID_URL,"Invalid URL '"+n+"'.")}function nb(n){return new he(ue.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function rb(){return new he(ue.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kp+"' property when initializing the app?")}function sb(){return new he(ue.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ib(){return new he(ue.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ob(n){return new he(ue.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ya(n){return new he(ue.INVALID_ARGUMENT,n)}function Dp(){return new he(ue.APP_DELETED,"The Firebase app was deleted.")}function ab(n){return new he(ue.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kr(n,e){return new he(ue.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Or(n){throw new he(ue.INTERNAL_ERROR,"Internal error: "+n)}class He{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=He.makeFromUrl(e,t)}catch{return new He(e,"")}if(r.path==="")return r;throw nb(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function h(W){W.path_=decodeURIComponent(W.path)}const f="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",b=new RegExp(`^https?://${g}/${f}/b/${s}/o${_}`,"i"),P={bucket:1,path:3},D=t===Pp?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",V=new RegExp(`^https?://${D}/${s}/${k}`,"i"),F=[{regex:c,indices:u,postModify:i},{regex:b,indices:P,postModify:h},{regex:V,indices:{bucket:1,path:2},postModify:h}];for(let W=0;W<F.length;W++){const ee=F[W],X=ee.regex.exec(e);if(X){const I=X[ee.indices.bucket];let m=X[ee.indices.path];m||(m=""),r=new He(I,m),ee.postModify(r);break}}if(r==null)throw tb(e);return r}}class cb{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function lb(n,e,t){let r=1,s=null,i=null,a=!1,c=0;function u(){return c===2}let h=!1;function f(...k){h||(h=!0,e.apply(null,k))}function g(k){s=setTimeout(()=>{s=null,n(b,u())},k)}function _(){i&&clearTimeout(i)}function b(k,...V){if(h){_();return}if(k){_(),f.call(null,k,...V);return}if(u()||a){_(),f.call(null,k,...V);return}r<64&&(r*=2);let F;c===1?(c=2,F=0):F=(r+Math.random())*1e3,g(F)}let P=!1;function D(k){P||(P=!0,_(),!h&&(s!==null?(k||(c=2),clearTimeout(s),g(0)):k||(c=1)))}return g(0),i=setTimeout(()=>{a=!0,D(!0)},t),D}function ub(n){n(!1)}function hb(n){return n!==void 0}function db(n){return typeof n=="object"&&!Array.isArray(n)}function Ec(n){return typeof n=="string"||n instanceof String}function ah(n){return wc()&&n instanceof Blob}function wc(){return typeof Blob<"u"}function ch(n,e,t,r){if(r<e)throw ya(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ya(`Invalid value for '${n}'. Expected ${t} or less.`)}function Qi(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Np(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var En;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(En||(En={}));function fb(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}class pb{constructor(e,t,r,s,i,a,c,u,h,f,g,_=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=g,this.retry=_,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,D)=>{this.resolve_=P,this.reject_=D,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Bs(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===En.NO_ERROR,u=i.getStatus();if(!c||fb(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===En.ABORT;r(!1,new Bs(!1,null,f));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new Bs(h,i))})},t=(r,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());hb(u)?i(u):i()}catch(u){a(u)}else if(c!==null){const u=yc();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(s.canceled){const u=this.appDelete_?Dp():eb();a(u)}else{const u=ZA();a(u)}};this.canceled_?t(!1,new Bs(!1,null,!0)):this.backoffId_=lb(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ub(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bs{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function mb(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function gb(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _b(n,e){e&&(n["X-Firebase-GMPID"]=e)}function yb(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Eb(n,e,t,r,s,i,a=!0,c=!1){const u=Np(n.urlParams),h=n.url+u,f=Object.assign({},n.headers);return _b(f,e),mb(f,t),gb(f,i),yb(f,r),new pb(h,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,a,c)}function wb(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Ib(...n){const e=wb();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(wc())return new Blob(n);throw new he(ue.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Tb(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function vb(n){if(typeof atob>"u")throw ob("base-64");return atob(n)}const ct={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lo{constructor(e,t){this.data=e,this.contentType=t||null}}function Ab(n,e){switch(n){case ct.RAW:return new Lo(Vp(e));case ct.BASE64:case ct.BASE64URL:return new Lo(Op(n,e));case ct.DATA_URL:return new Lo(Rb(e),Sb(e))}throw yc()}function Vp(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=n.charCodeAt(++t);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function bb(n){let e;try{e=decodeURIComponent(n)}catch{throw Kr(ct.DATA_URL,"Malformed data URL.")}return Vp(e)}function Op(n,e){switch(n){case ct.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Kr(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ct.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Kr(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=vb(e)}catch(s){throw s.message.includes("polyfill")?s:Kr(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class xp{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Kr(ct.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=Cb(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Rb(n){const e=new xp(n);return e.base64?Op(ct.BASE64,e.rest):bb(e.rest)}function Sb(n){return new xp(n).contentType}function Cb(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class Ft{constructor(e,t){let r=0,s="";ah(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(ah(this.data_)){const r=this.data_,s=Tb(r,e,t);return s===null?null:new Ft(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ft(r,!0)}}static getBlob(...e){if(wc()){const t=e.map(r=>r instanceof Ft?r.data_:r);return new Ft(Ib.apply(null,t))}else{const t=e.map(a=>Ec(a)?Ab(ct.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return t.forEach(a=>{for(let c=0;c<a.length;c++)s[i++]=a[c]}),new Ft(s,!0)}}uploadData(){return this.data_}}function Lp(n){let e;try{e=JSON.parse(n)}catch{return null}return db(e)?e:null}function Pb(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function kb(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Mp(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Db(n,e){return e}class Me{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||Db}}let js=null;function Nb(n){return!Ec(n)||n.length<2?n:Mp(n)}function Up(){if(js)return js;const n=[];n.push(new Me("bucket")),n.push(new Me("generation")),n.push(new Me("metageneration")),n.push(new Me("name","fullPath",!0));function e(i,a){return Nb(a)}const t=new Me("name");t.xform=e,n.push(t);function r(i,a){return a!==void 0?Number(a):a}const s=new Me("size");return s.xform=r,n.push(s),n.push(new Me("timeCreated")),n.push(new Me("updated")),n.push(new Me("md5Hash",null,!0)),n.push(new Me("cacheControl",null,!0)),n.push(new Me("contentDisposition",null,!0)),n.push(new Me("contentEncoding",null,!0)),n.push(new Me("contentLanguage",null,!0)),n.push(new Me("contentType",null,!0)),n.push(new Me("metadata","customMetadata",!0)),js=n,js}function Vb(n,e){function t(){const r=n.bucket,s=n.fullPath,i=new He(r,s);return e._makeStorageReference(i)}Object.defineProperty(n,"ref",{get:t})}function Ob(n,e,t){const r={};r.type="file";const s=t.length;for(let i=0;i<s;i++){const a=t[i];r[a.local]=a.xform(r,e[a.server])}return Vb(r,n),r}function Fp(n,e,t){const r=Lp(e);return r===null?null:Ob(n,r,t)}function xb(n,e,t,r){const s=Lp(e);if(s===null||!Ec(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(h=>{const f=n.bucket,g=n.fullPath,_="/b/"+a(f)+"/o/"+a(g),b=Qi(_,t,r),P=Np({alt:"media",token:h});return b+P})[0]}function Lb(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(t[i.server]=n[i.local])}return JSON.stringify(t)}class Ic{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Bp(n){if(!n)throw yc()}function Mb(n,e){function t(r,s){const i=Fp(n,s,e);return Bp(i!==null),i}return t}function Ub(n,e){function t(r,s){const i=Fp(n,s,e);return Bp(i!==null),xb(i,s,n.host,n._protocol)}return t}function jp(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=JA():s=YA():t.getStatus()===402?s=QA(n.bucket):t.getStatus()===403?s=XA(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function $p(n){const e=jp(n);function t(r,s){let i=e(r,s);return r.getStatus()===404&&(i=KA(n.path)),i.serverResponse=s.serverResponse,i}return t}function Fb(n,e,t){const r=e.fullServerUrl(),s=Qi(r,n.host,n._protocol),i="GET",a=n.maxOperationRetryTime,c=new Ic(s,i,Ub(n,t),a);return c.errorHandler=$p(e),c}function Bb(n,e){const t=e.fullServerUrl(),r=Qi(t,n.host,n._protocol),s="DELETE",i=n.maxOperationRetryTime;function a(u,h){}const c=new Ic(r,s,a,i);return c.successCodes=[200,204],c.errorHandler=$p(e),c}function jb(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function $b(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=jb(null,e)),r}function qb(n,e,t,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let F="";for(let W=0;W<2;W++)F=F+Math.random().toString().slice(2);return F}const u=c();a["Content-Type"]="multipart/related; boundary="+u;const h=$b(e,r,s),f=Lb(h,t),g="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,_=`\r
--`+u+"--",b=Ft.getBlob(g,r,_);if(b===null)throw sb();const P={name:h.fullPath},D=Qi(i,n.host,n._protocol),k="POST",V=n.maxUploadRetryTime,U=new Ic(D,k,Mb(n,t),V);return U.urlParams=P,U.headers=a,U.body=b.uploadData(),U.errorHandler=jp(e),U}class zb{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=En.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=En.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=En.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,i){if(this.sent_)throw Or("cannot .send() more than once");if(Xt(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Or("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Or("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Or("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Or("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Gb extends zb{initXhr(){this.xhr_.responseType="text"}}function Tc(){return new Gb}class Rn{constructor(e,t){this._service=e,t instanceof He?this._location=t:this._location=He.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Rn(e,t)}get root(){const e=new He(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Mp(this._location.path)}get storage(){return this._service}get parent(){const e=Pb(this._location.path);if(e===null)return null;const t=new He(this._location.bucket,e);return new Rn(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw ab(e)}}function Wb(n,e,t){n._throwIfRoot("uploadBytes");const r=qb(n.storage,n._location,Up(),new Ft(e,!0),t);return n.storage.makeRequestWithTokens(r,Tc).then(s=>({metadata:s,ref:n}))}function Hb(n){n._throwIfRoot("getDownloadURL");const e=Fb(n.storage,n._location,Up());return n.storage.makeRequestWithTokens(e,Tc).then(t=>{if(t===null)throw ib();return t})}function Kb(n){n._throwIfRoot("deleteObject");const e=Bb(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Tc)}function Qb(n,e){const t=kb(n._location.path,e),r=new He(n._location.bucket,t);return new Rn(n.storage,r)}function Yb(n){return/^[A-Za-z]+:\/\//.test(n)}function Jb(n,e){return new Rn(n,e)}function qp(n,e){if(n instanceof vc){const t=n;if(t._bucket==null)throw rb();const r=new Rn(t,t._bucket);return e!=null?qp(r,e):r}else return e!==void 0?Qb(n,e):n}function Xb(n,e){if(e&&Yb(e)){if(n instanceof vc)return Jb(n,e);throw ya("To use ref(service, url), the first argument must be a Storage instance.")}else return qp(n,e)}function lh(n,e){const t=e?.[kp];return t==null?null:He.makeFromBucketSpec(t,n)}function Zb(n,e,t,r={}){n.host=`${e}:${t}`;const s=Xt(e);s&&(Ia(`https://${n.host}/b`),Ta("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:xh(i,n.app.options.projectId))}class vc{constructor(e,t,r,s,i,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=Pp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WA,this._maxUploadRetryTime=HA,this._requests=new Set,s!=null?this._bucket=He.makeFromBucketSpec(s,this._host):this._bucket=lh(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=He.makeFromBucketSpec(this._url,e):this._bucket=lh(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ch("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ch("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ge(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rn(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new cb(Dp());{const a=Eb(e,this._appId,r,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const uh="@firebase/storage",hh="0.14.0";const zp="storage";function RS(n,e,t){return n=ne(n),Wb(n,e,t)}function SS(n){return n=ne(n),Hb(n)}function CS(n){return n=ne(n),Kb(n)}function PS(n,e){return n=ne(n),Xb(n,e)}function eR(n=cs(),e){n=ne(n);const r=Zt(n,zp).getImmediate({identifier:e}),s=Nh("storage");return s&&tR(r,...s),r}function tR(n,e,t,r={}){Zb(n,e,t,r)}function nR(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new vc(t,r,s,e,Cn)}function rR(){nt(new Ye(zp,nR,"PUBLIC").setMultipleInstances(!0)),qe(uh,hh,""),qe(uh,hh,"esm2020")}rR();const sR={apiKey:"AIzaSyCY074fG5q10VeGc-s_73uM1Ragklabl9U",authDomain:"ryan-react-2ace0.firebaseapp.com",projectId:"ryan-react-2ace0",storageBucket:"ryan-react-2ace0.firebasestorage.app",messagingSenderId:"146016822888",appId:"1:146016822888:web:31c9c2a9b5c69723e67ddd",measurementId:"G-0T67BPN7XT"},Yi=L_().length?cs():$h(sR),kS=VA(Yi),DS=bI(Yi),NS=eR(Yi);typeof window<"u"&&hE(Yi);function dh(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Gp(...n){return e=>{let t=!1;const r=n.map(s=>{const i=dh(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():dh(n[s],null)}}}}function VS(...n){return fe.useCallback(Gp(...n),n)}function Wp(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=Wp(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Hp(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=Wp(n))&&(r&&(r+=" "),r+=e);return r}const iR=(n,e)=>{const t=new Array(n.length+e.length);for(let r=0;r<n.length;r++)t[r]=n[r];for(let r=0;r<e.length;r++)t[n.length+r]=e[r];return t},oR=(n,e)=>({classGroupId:n,validator:e}),Kp=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),Ti="-",fh=[],aR="arbitrary..",cR=n=>{const e=uR(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return lR(a);const c=a.split(Ti),u=c[0]===""&&c.length>1?1:0;return Qp(c,u,e)},getConflictingClassGroupIds:(a,c)=>{if(c){const u=r[a],h=t[a];return u?h?iR(h,u):u:h||fh}return t[a]||fh}}},Qp=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const s=n[e],i=t.nextPart.get(s);if(i){const h=Qp(n,e+1,i);if(h)return h}const a=t.validators;if(a===null)return;const c=e===0?n.join(Ti):n.slice(e).join(Ti),u=a.length;for(let h=0;h<u;h++){const f=a[h];if(f.validator(c))return f.classGroupId}},lR=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),r=e.slice(0,t);return r?aR+r:void 0})(),uR=n=>{const{theme:e,classGroups:t}=n;return hR(t,e)},hR=(n,e)=>{const t=Kp();for(const r in n){const s=n[r];Ac(s,t,r,e)}return t},Ac=(n,e,t,r)=>{const s=n.length;for(let i=0;i<s;i++){const a=n[i];dR(a,e,t,r)}},dR=(n,e,t,r)=>{if(typeof n=="string"){fR(n,e,t);return}if(typeof n=="function"){pR(n,e,t,r);return}mR(n,e,t,r)},fR=(n,e,t)=>{const r=n===""?e:Yp(e,n);r.classGroupId=t},pR=(n,e,t,r)=>{if(gR(n)){Ac(n(r),e,t,r);return}e.validators===null&&(e.validators=[]),e.validators.push(oR(t,n))},mR=(n,e,t,r)=>{const s=Object.entries(n),i=s.length;for(let a=0;a<i;a++){const[c,u]=s[a];Ac(u,Yp(e,c),t,r)}},Yp=(n,e)=>{let t=n;const r=e.split(Ti),s=r.length;for(let i=0;i<s;i++){const a=r[i];let c=t.nextPart.get(a);c||(c=Kp(),t.nextPart.set(a,c)),t=c}return t},gR=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,_R=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),r=Object.create(null);const s=(i,a)=>{t[i]=a,e++,e>n&&(e=0,r=t,t=Object.create(null))};return{get(i){let a=t[i];if(a!==void 0)return a;if((a=r[i])!==void 0)return s(i,a),a},set(i,a){i in t?t[i]=a:s(i,a)}}},Ea="!",ph=":",yR=[],mh=(n,e,t,r,s)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:r,isExternal:s}),ER=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const i=[];let a=0,c=0,u=0,h;const f=s.length;for(let D=0;D<f;D++){const k=s[D];if(a===0&&c===0){if(k===ph){i.push(s.slice(u,D)),u=D+1;continue}if(k==="/"){h=D;continue}}k==="["?a++:k==="]"?a--:k==="("?c++:k===")"&&c--}const g=i.length===0?s:s.slice(u);let _=g,b=!1;g.endsWith(Ea)?(_=g.slice(0,-1),b=!0):g.startsWith(Ea)&&(_=g.slice(1),b=!0);const P=h&&h>u?h-u:void 0;return mh(i,b,_,P)};if(e){const s=e+ph,i=r;r=a=>a.startsWith(s)?i(a.slice(s.length)):mh(yR,!1,a,void 0,!0)}if(t){const s=r;r=i=>t({className:i,parseClassName:s})}return r},wR=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,r)=>{e.set(t,1e6+r)}),t=>{const r=[];let s=[];for(let i=0;i<t.length;i++){const a=t[i],c=a[0]==="[",u=e.has(a);c||u?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(a)):s.push(a)}return s.length>0&&(s.sort(),r.push(...s)),r}},IR=n=>({cache:_R(n.cacheSize),parseClassName:ER(n),sortModifiers:wR(n),...cR(n)}),TR=/\s+/,vR=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,a=[],c=n.trim().split(TR);let u="";for(let h=c.length-1;h>=0;h-=1){const f=c[h],{isExternal:g,modifiers:_,hasImportantModifier:b,baseClassName:P,maybePostfixModifierPosition:D}=t(f);if(g){u=f+(u.length>0?" "+u:u);continue}let k=!!D,V=r(k?P.substring(0,D):P);if(!V){if(!k){u=f+(u.length>0?" "+u:u);continue}if(V=r(P),!V){u=f+(u.length>0?" "+u:u);continue}k=!1}const U=_.length===0?"":_.length===1?_[0]:i(_).join(":"),F=b?U+Ea:U,W=F+V;if(a.indexOf(W)>-1)continue;a.push(W);const ee=s(V,k);for(let X=0;X<ee.length;++X){const I=ee[X];a.push(F+I)}u=f+(u.length>0?" "+u:u)}return u},AR=(...n)=>{let e=0,t,r,s="";for(;e<n.length;)(t=n[e++])&&(r=Jp(t))&&(s&&(s+=" "),s+=r);return s},Jp=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Jp(n[r]))&&(t&&(t+=" "),t+=e);return t},bR=(n,...e)=>{let t,r,s,i;const a=u=>{const h=e.reduce((f,g)=>g(f),n());return t=IR(h),r=t.cache.get,s=t.cache.set,i=c,c(u)},c=u=>{const h=r(u);if(h)return h;const f=vR(u,t);return s(u,f),f};return i=a,(...u)=>i(AR(...u))},RR=[],Ee=n=>{const e=t=>t[n]||RR;return e.isThemeGetter=!0,e},Xp=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Zp=/^\((?:(\w[\w-]*):)?(.+)\)$/i,SR=/^\d+\/\d+$/,CR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,PR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,DR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bn=n=>SR.test(n),K=n=>!!n&&!Number.isNaN(Number(n)),Ot=n=>!!n&&Number.isInteger(Number(n)),Mo=n=>n.endsWith("%")&&K(n.slice(0,-1)),gt=n=>CR.test(n),VR=()=>!0,OR=n=>PR.test(n)&&!kR.test(n),em=()=>!1,xR=n=>DR.test(n),LR=n=>NR.test(n),MR=n=>!L(n)&&!M(n),UR=n=>dr(n,rm,em),L=n=>Xp.test(n),pn=n=>dr(n,sm,OR),Uo=n=>dr(n,qR,K),gh=n=>dr(n,tm,em),FR=n=>dr(n,nm,LR),$s=n=>dr(n,im,xR),M=n=>Zp.test(n),xr=n=>fr(n,sm),BR=n=>fr(n,zR),_h=n=>fr(n,tm),jR=n=>fr(n,rm),$R=n=>fr(n,nm),qs=n=>fr(n,im,!0),dr=(n,e,t)=>{const r=Xp.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},fr=(n,e,t=!1)=>{const r=Zp.exec(n);return r?r[1]?e(r[1]):t:!1},tm=n=>n==="position"||n==="percentage",nm=n=>n==="image"||n==="url",rm=n=>n==="length"||n==="size"||n==="bg-size",sm=n=>n==="length",qR=n=>n==="number",zR=n=>n==="family-name",im=n=>n==="shadow",GR=()=>{const n=Ee("color"),e=Ee("font"),t=Ee("text"),r=Ee("font-weight"),s=Ee("tracking"),i=Ee("leading"),a=Ee("breakpoint"),c=Ee("container"),u=Ee("spacing"),h=Ee("radius"),f=Ee("shadow"),g=Ee("inset-shadow"),_=Ee("text-shadow"),b=Ee("drop-shadow"),P=Ee("blur"),D=Ee("perspective"),k=Ee("aspect"),V=Ee("ease"),U=Ee("animate"),F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ee=()=>[...W(),M,L],X=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],m=()=>[M,L,u],y=()=>[Bn,"full","auto",...m()],T=()=>[Ot,"none","subgrid",M,L],w=()=>["auto",{span:["full",Ot,M,L]},Ot,M,L],v=()=>[Ot,"auto",M,L],E=()=>["auto","min","max","fr",M,L],Ie=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Be=()=>["start","end","center","stretch","center-safe","end-safe"],Ze=()=>["auto",...m()],mt=()=>[Bn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...m()],j=()=>[n,M,L],on=()=>[...W(),_h,gh,{position:[M,L]}],Is=()=>["no-repeat",{repeat:["","x","y","space","round"]}],pr=()=>["auto","cover","contain",jR,UR,{size:[M,L]}],Vn=()=>[Mo,xr,pn],Te=()=>["","none","full",h,M,L],ve=()=>["",K,xr,pn],Rt=()=>["solid","dashed","dotted","double"],On=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>[K,Mo,_h,gh],xn=()=>["","none",P,M,L],an=()=>["none",K,M,L],Ln=()=>["none",K,M,L],mr=()=>[K,M,L],cn=()=>[Bn,"full",...m()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[gt],breakpoint:[gt],color:[VR],container:[gt],"drop-shadow":[gt],ease:["in","out","in-out"],font:[MR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[gt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[gt],shadow:[gt],spacing:["px",K],text:[gt],"text-shadow":[gt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Bn,L,M,k]}],container:["container"],columns:[{columns:[K,L,M,c]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ee()}],overflow:[{overflow:X()}],"overflow-x":[{"overflow-x":X()}],"overflow-y":[{"overflow-y":X()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:y()}],"inset-x":[{"inset-x":y()}],"inset-y":[{"inset-y":y()}],start:[{start:y()}],end:[{end:y()}],top:[{top:y()}],right:[{right:y()}],bottom:[{bottom:y()}],left:[{left:y()}],visibility:["visible","invisible","collapse"],z:[{z:[Ot,"auto",M,L]}],basis:[{basis:[Bn,"full","auto",c,...m()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[K,Bn,"auto","initial","none",L]}],grow:[{grow:["",K,M,L]}],shrink:[{shrink:["",K,M,L]}],order:[{order:[Ot,"first","last","none",M,L]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:w()}],"col-start":[{"col-start":v()}],"col-end":[{"col-end":v()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:w()}],"row-start":[{"row-start":v()}],"row-end":[{"row-end":v()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":E()}],"auto-rows":[{"auto-rows":E()}],gap:[{gap:m()}],"gap-x":[{"gap-x":m()}],"gap-y":[{"gap-y":m()}],"justify-content":[{justify:[...Ie(),"normal"]}],"justify-items":[{"justify-items":[...Be(),"normal"]}],"justify-self":[{"justify-self":["auto",...Be()]}],"align-content":[{content:["normal",...Ie()]}],"align-items":[{items:[...Be(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Be(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ie()}],"place-items":[{"place-items":[...Be(),"baseline"]}],"place-self":[{"place-self":["auto",...Be()]}],p:[{p:m()}],px:[{px:m()}],py:[{py:m()}],ps:[{ps:m()}],pe:[{pe:m()}],pt:[{pt:m()}],pr:[{pr:m()}],pb:[{pb:m()}],pl:[{pl:m()}],m:[{m:Ze()}],mx:[{mx:Ze()}],my:[{my:Ze()}],ms:[{ms:Ze()}],me:[{me:Ze()}],mt:[{mt:Ze()}],mr:[{mr:Ze()}],mb:[{mb:Ze()}],ml:[{ml:Ze()}],"space-x":[{"space-x":m()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":m()}],"space-y-reverse":["space-y-reverse"],size:[{size:mt()}],w:[{w:[c,"screen",...mt()]}],"min-w":[{"min-w":[c,"screen","none",...mt()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...mt()]}],h:[{h:["screen","lh",...mt()]}],"min-h":[{"min-h":["screen","lh","none",...mt()]}],"max-h":[{"max-h":["screen","lh",...mt()]}],"font-size":[{text:["base",t,xr,pn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,M,Uo]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Mo,L]}],"font-family":[{font:[BR,L,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,M,L]}],"line-clamp":[{"line-clamp":[K,"none",M,Uo]}],leading:[{leading:[i,...m()]}],"list-image":[{"list-image":["none",M,L]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",M,L]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:j()}],"text-color":[{text:j()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Rt(),"wavy"]}],"text-decoration-thickness":[{decoration:[K,"from-font","auto",M,pn]}],"text-decoration-color":[{decoration:j()}],"underline-offset":[{"underline-offset":[K,"auto",M,L]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:m()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",M,L]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",M,L]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:on()}],"bg-repeat":[{bg:Is()}],"bg-size":[{bg:pr()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ot,M,L],radial:["",M,L],conic:[Ot,M,L]},$R,FR]}],"bg-color":[{bg:j()}],"gradient-from-pos":[{from:Vn()}],"gradient-via-pos":[{via:Vn()}],"gradient-to-pos":[{to:Vn()}],"gradient-from":[{from:j()}],"gradient-via":[{via:j()}],"gradient-to":[{to:j()}],rounded:[{rounded:Te()}],"rounded-s":[{"rounded-s":Te()}],"rounded-e":[{"rounded-e":Te()}],"rounded-t":[{"rounded-t":Te()}],"rounded-r":[{"rounded-r":Te()}],"rounded-b":[{"rounded-b":Te()}],"rounded-l":[{"rounded-l":Te()}],"rounded-ss":[{"rounded-ss":Te()}],"rounded-se":[{"rounded-se":Te()}],"rounded-ee":[{"rounded-ee":Te()}],"rounded-es":[{"rounded-es":Te()}],"rounded-tl":[{"rounded-tl":Te()}],"rounded-tr":[{"rounded-tr":Te()}],"rounded-br":[{"rounded-br":Te()}],"rounded-bl":[{"rounded-bl":Te()}],"border-w":[{border:ve()}],"border-w-x":[{"border-x":ve()}],"border-w-y":[{"border-y":ve()}],"border-w-s":[{"border-s":ve()}],"border-w-e":[{"border-e":ve()}],"border-w-t":[{"border-t":ve()}],"border-w-r":[{"border-r":ve()}],"border-w-b":[{"border-b":ve()}],"border-w-l":[{"border-l":ve()}],"divide-x":[{"divide-x":ve()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ve()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Rt(),"hidden","none"]}],"divide-style":[{divide:[...Rt(),"hidden","none"]}],"border-color":[{border:j()}],"border-color-x":[{"border-x":j()}],"border-color-y":[{"border-y":j()}],"border-color-s":[{"border-s":j()}],"border-color-e":[{"border-e":j()}],"border-color-t":[{"border-t":j()}],"border-color-r":[{"border-r":j()}],"border-color-b":[{"border-b":j()}],"border-color-l":[{"border-l":j()}],"divide-color":[{divide:j()}],"outline-style":[{outline:[...Rt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[K,M,L]}],"outline-w":[{outline:["",K,xr,pn]}],"outline-color":[{outline:j()}],shadow:[{shadow:["","none",f,qs,$s]}],"shadow-color":[{shadow:j()}],"inset-shadow":[{"inset-shadow":["none",g,qs,$s]}],"inset-shadow-color":[{"inset-shadow":j()}],"ring-w":[{ring:ve()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:j()}],"ring-offset-w":[{"ring-offset":[K,pn]}],"ring-offset-color":[{"ring-offset":j()}],"inset-ring-w":[{"inset-ring":ve()}],"inset-ring-color":[{"inset-ring":j()}],"text-shadow":[{"text-shadow":["none",_,qs,$s]}],"text-shadow-color":[{"text-shadow":j()}],opacity:[{opacity:[K,M,L]}],"mix-blend":[{"mix-blend":[...On(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":On()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[K]}],"mask-image-linear-from-pos":[{"mask-linear-from":ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":ce()}],"mask-image-linear-from-color":[{"mask-linear-from":j()}],"mask-image-linear-to-color":[{"mask-linear-to":j()}],"mask-image-t-from-pos":[{"mask-t-from":ce()}],"mask-image-t-to-pos":[{"mask-t-to":ce()}],"mask-image-t-from-color":[{"mask-t-from":j()}],"mask-image-t-to-color":[{"mask-t-to":j()}],"mask-image-r-from-pos":[{"mask-r-from":ce()}],"mask-image-r-to-pos":[{"mask-r-to":ce()}],"mask-image-r-from-color":[{"mask-r-from":j()}],"mask-image-r-to-color":[{"mask-r-to":j()}],"mask-image-b-from-pos":[{"mask-b-from":ce()}],"mask-image-b-to-pos":[{"mask-b-to":ce()}],"mask-image-b-from-color":[{"mask-b-from":j()}],"mask-image-b-to-color":[{"mask-b-to":j()}],"mask-image-l-from-pos":[{"mask-l-from":ce()}],"mask-image-l-to-pos":[{"mask-l-to":ce()}],"mask-image-l-from-color":[{"mask-l-from":j()}],"mask-image-l-to-color":[{"mask-l-to":j()}],"mask-image-x-from-pos":[{"mask-x-from":ce()}],"mask-image-x-to-pos":[{"mask-x-to":ce()}],"mask-image-x-from-color":[{"mask-x-from":j()}],"mask-image-x-to-color":[{"mask-x-to":j()}],"mask-image-y-from-pos":[{"mask-y-from":ce()}],"mask-image-y-to-pos":[{"mask-y-to":ce()}],"mask-image-y-from-color":[{"mask-y-from":j()}],"mask-image-y-to-color":[{"mask-y-to":j()}],"mask-image-radial":[{"mask-radial":[M,L]}],"mask-image-radial-from-pos":[{"mask-radial-from":ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":ce()}],"mask-image-radial-from-color":[{"mask-radial-from":j()}],"mask-image-radial-to-color":[{"mask-radial-to":j()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":W()}],"mask-image-conic-pos":[{"mask-conic":[K]}],"mask-image-conic-from-pos":[{"mask-conic-from":ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":ce()}],"mask-image-conic-from-color":[{"mask-conic-from":j()}],"mask-image-conic-to-color":[{"mask-conic-to":j()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:on()}],"mask-repeat":[{mask:Is()}],"mask-size":[{mask:pr()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",M,L]}],filter:[{filter:["","none",M,L]}],blur:[{blur:xn()}],brightness:[{brightness:[K,M,L]}],contrast:[{contrast:[K,M,L]}],"drop-shadow":[{"drop-shadow":["","none",b,qs,$s]}],"drop-shadow-color":[{"drop-shadow":j()}],grayscale:[{grayscale:["",K,M,L]}],"hue-rotate":[{"hue-rotate":[K,M,L]}],invert:[{invert:["",K,M,L]}],saturate:[{saturate:[K,M,L]}],sepia:[{sepia:["",K,M,L]}],"backdrop-filter":[{"backdrop-filter":["","none",M,L]}],"backdrop-blur":[{"backdrop-blur":xn()}],"backdrop-brightness":[{"backdrop-brightness":[K,M,L]}],"backdrop-contrast":[{"backdrop-contrast":[K,M,L]}],"backdrop-grayscale":[{"backdrop-grayscale":["",K,M,L]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[K,M,L]}],"backdrop-invert":[{"backdrop-invert":["",K,M,L]}],"backdrop-opacity":[{"backdrop-opacity":[K,M,L]}],"backdrop-saturate":[{"backdrop-saturate":[K,M,L]}],"backdrop-sepia":[{"backdrop-sepia":["",K,M,L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":m()}],"border-spacing-x":[{"border-spacing-x":m()}],"border-spacing-y":[{"border-spacing-y":m()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",M,L]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[K,"initial",M,L]}],ease:[{ease:["linear","initial",V,M,L]}],delay:[{delay:[K,M,L]}],animate:[{animate:["none",U,M,L]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[D,M,L]}],"perspective-origin":[{"perspective-origin":ee()}],rotate:[{rotate:an()}],"rotate-x":[{"rotate-x":an()}],"rotate-y":[{"rotate-y":an()}],"rotate-z":[{"rotate-z":an()}],scale:[{scale:Ln()}],"scale-x":[{"scale-x":Ln()}],"scale-y":[{"scale-y":Ln()}],"scale-z":[{"scale-z":Ln()}],"scale-3d":["scale-3d"],skew:[{skew:mr()}],"skew-x":[{"skew-x":mr()}],"skew-y":[{"skew-y":mr()}],transform:[{transform:[M,L,"","none","gpu","cpu"]}],"transform-origin":[{origin:ee()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:cn()}],"translate-x":[{"translate-x":cn()}],"translate-y":[{"translate-y":cn()}],"translate-z":[{"translate-z":cn()}],"translate-none":["translate-none"],accent:[{accent:j()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:j()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",M,L]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":m()}],"scroll-mx":[{"scroll-mx":m()}],"scroll-my":[{"scroll-my":m()}],"scroll-ms":[{"scroll-ms":m()}],"scroll-me":[{"scroll-me":m()}],"scroll-mt":[{"scroll-mt":m()}],"scroll-mr":[{"scroll-mr":m()}],"scroll-mb":[{"scroll-mb":m()}],"scroll-ml":[{"scroll-ml":m()}],"scroll-p":[{"scroll-p":m()}],"scroll-px":[{"scroll-px":m()}],"scroll-py":[{"scroll-py":m()}],"scroll-ps":[{"scroll-ps":m()}],"scroll-pe":[{"scroll-pe":m()}],"scroll-pt":[{"scroll-pt":m()}],"scroll-pr":[{"scroll-pr":m()}],"scroll-pb":[{"scroll-pb":m()}],"scroll-pl":[{"scroll-pl":m()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",M,L]}],fill:[{fill:["none",...j()]}],"stroke-w":[{stroke:[K,xr,pn,Uo]}],stroke:[{stroke:["none",...j()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},WR=bR(GR);function HR(...n){return WR(Hp(n))}var KR=Symbol.for("react.lazy"),vi=Om[" use ".trim().toString()];function QR(n){return typeof n=="object"&&n!==null&&"then"in n}function om(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===KR&&"_payload"in n&&QR(n._payload)}function YR(n){const e=XR(n),t=fe.forwardRef((r,s)=>{let{children:i,...a}=r;om(i)&&typeof vi=="function"&&(i=vi(i._payload));const c=fe.Children.toArray(i),u=c.find(eS);if(u){const h=u.props.children,f=c.map(g=>g===u?fe.Children.count(h)>1?fe.Children.only(null):fe.isValidElement(h)?h.props.children:null:g);return Fo.jsx(e,{...a,ref:s,children:fe.isValidElement(h)?fe.cloneElement(h,void 0,f):null})}return Fo.jsx(e,{...a,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var JR=YR("Slot");function XR(n){const e=fe.forwardRef((t,r)=>{let{children:s,...i}=t;if(om(s)&&typeof vi=="function"&&(s=vi(s._payload)),fe.isValidElement(s)){const a=nS(s),c=tS(i,s.props);return s.type!==fe.Fragment&&(c.ref=r?Gp(r,a):a),fe.cloneElement(s,c)}return fe.Children.count(s)>1?fe.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var ZR=Symbol("radix.slottable");function eS(n){return fe.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===ZR}function tS(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...c)=>{const u=i(...c);return s(...c),u}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function nS(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const yh=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Eh=Hp,rS=(n,e)=>t=>{var r;if(e?.variants==null)return Eh(n,t?.class,t?.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(h=>{const f=t?.[h],g=i?.[h];if(f===null)return null;const _=yh(f)||yh(g);return s[h][_]}),c=t&&Object.entries(t).reduce((h,f)=>{let[g,_]=f;return _===void 0||(h[g]=_),h},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:g,className:_,...b}=f;return Object.entries(b).every(P=>{let[D,k]=P;return Array.isArray(k)?k.includes({...i,...c}[D]):{...i,...c}[D]===k})?[...h,g,_]:h},[]);return Eh(n,a,u,t?.class,t?.className)},sS=rS("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function OS({className:n,variant:e="default",size:t="default",asChild:r=!1,...s}){const i=r?JR:"button";return Fo.jsx(i,{"data-slot":"button","data-variant":e,"data-size":t,className:HR(sS({variant:e,size:t,className:n})),...s})}export{CS as A,OS as B,_S as C,yS as D,wS as E,lS as F,hS as G,uS as H,DS as I,dS as J,fS as K,JR as S,oe as T,HR as a,YR as b,Gp as c,oS as d,cS as e,cg as f,aS as g,lg as h,rS as i,NA as j,kS as k,gS as l,wa as m,mS as n,NS as o,RS as p,SS as q,PS as r,IS as s,sg as t,VS as u,ES as v,bS as w,vS as x,TS as y,AS as z};
