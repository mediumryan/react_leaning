import{b as o,t as e,w as _}from"./index-DyoFpt-A.js";import{b as N,L as t,B as x,g,a as w,j as y}from"./label-Ch00gP77.js";import{H as C}from"./commonStyle-CMqu6ffv.js";import{C as k}from"./card-BHQXQdrk.js";import{S as j,a as p}from"./homeStyle-BASQd3D_.js";import{S as A,A as E,a as B}from"./avatar-Cx7wjDuf.js";import{P as D}from"./progress-DnY79I0T.js";import{D as I,a as P,b as F,c as L,d as T}from"./dialog-BuiXutT2.js";import{I as f}from"./input-CCySF-KM.js";import{b as G}from"./firestore_utils-jdwOOrcn.js";import{t as R}from"./index-CO43HKQr.js";import{u as b}from"./useTranslation-CSGQyEkH.js";import{a as U,b as z}from"./react-BUXCNqAz.js";const H=({setShowForm:m})=>{const{t:a}=b(),[s]=U(N),[i,l]=o.useState(s?.name??""),[r,d]=o.useState(s?.nickname??""),[u,v]=o.useState(s?.course??"Beginner"),S=async n=>{n.preventDefault();const h={uid:s?.uid??Date.now().toString(),name:i,nickname:r,email:s?.email??"",course:u,grade:s?.grade??"Bronze",exp:s?.exp??0,authority:s?.authority??"user",contentStatus:s?.contentStatus??new Set};await G(h.uid,h),R.success(a("users.users_edit_success")),m(!1)};return e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:a("settings.settings_edit_name_label")}),e.jsx(f,{id:"name",value:i,onChange:n=>l(n.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"nickname",children:a("settings.settings_edit_nickname_label")}),e.jsx(f,{id:"nickname",value:r,onChange:n=>d(n.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"course",children:a("settings.settings_edit_course_label")}),e.jsxs("select",{id:"course",className:"w-full h-9 rounded-md border border-input bg-background px-3 text-sm",value:u,onChange:n=>v(n.target.value),children:[e.jsx("option",{value:"Beginner",children:a("course.Beginner")}),e.jsx("option",{value:"Intermediate",disabled:!0,children:a("course.Intermediate")}),e.jsx("option",{value:"Advanced",disabled:!0,children:a("course.Advanced")})]})]}),e.jsxs("div",{className:"flex gap-2 w-full justify-end items-center",children:[e.jsx(x,{variant:"default",type:"submit",className:"",children:a("common.edit")}),e.jsx(x,{variant:"outline",type:"button",className:"",onClick:()=>{m(!1)},children:a("common.cancel")})]})]})},c="flex items-center justify-between gap-1 mb-2",se=_(function(){const{t:a}=b(),s=z(N),[i,l]=o.useState(!1),r=g(s?.grade||"Bronze"),d=r.nextGrade==="Max"?"text-black":g(r.nextGrade).color;return e.jsxs("main",{className:"p-8 flex flex-col justify-center items-center gap-2",children:[e.jsxs("h1",{className:`${C} flex items-center gap-3 tracking-wide`,children:[e.jsx(A,{id:"react-icon",className:"text-blue-600"}),e.jsx("span",{children:"My Info"})]}),e.jsx(j,{className:p}),e.jsxs(k,{className:"relative w-full max-w-sm p-6 mt-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{className:w("w-10 h-10 "),children:e.jsx(B,{className:"bg-black text-white select-none",children:e.jsx("span",{className:"",children:s?.name?s?.name.charAt(0).toUpperCase():"?"})})}),e.jsxs(t,{className:"text-lg",children:[s?.name," (",s?.nickname,")"]})]}),e.jsxs("div",{className:c,children:[e.jsx(t,{className:"text-lg italic text-blue-500",children:"Email"}),e.jsx(t,{className:"",children:s?.email})]}),e.jsxs("div",{className:c,children:[e.jsx(t,{className:"text-lg italic text-blue-500",children:"Course"}),e.jsx(t,{className:"",children:s?.course})]}),e.jsxs("div",{className:c,children:[e.jsx(t,{className:"text-lg italic text-blue-500",children:"Grade"}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx(t,{className:r.color,children:s?.grade}),e.jsxs(t,{className:"text-xs",children:["Next :"," ",e.jsx("span",{className:d,children:r.nextGrade})]})]})]}),e.jsxs("div",{className:c,children:[e.jsx(D,{className:"flex-4",value:y(s?.grade||"Bronze",s?.exp||0)}),e.jsxs("span",{className:"flex-1 text-xs text-slate-400 text-right",children:[s?.exp," / ",r.maxExp]})]}),s&&e.jsx("img",{src:r.badge,alt:"user medal",className:"min-w-40 h-20 absolute top-0 -right-20"})]}),e.jsx(j,{className:p}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs(I,{open:i,onOpenChange:l,children:[e.jsx(P,{asChild:!0,children:e.jsx(x,{variant:"outline",children:a("common.edit")})}),e.jsxs(F,{"aria-describedby":a("settings.settings_dialog_description"),children:[e.jsx(L,{children:e.jsx(T,{children:a("settings.settings_edit_title")})}),e.jsx(H,{setShowForm:l})]})]})})]})});export{se as default};
