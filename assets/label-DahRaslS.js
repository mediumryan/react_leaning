import{b as Re,t as or,G as Ag}from"./index-Djl51xko.js";const dt={BASE_URL:"/react_leaning/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCY074fG5q10VeGc-s_73uM1Ragklabl9U",VITE_FIREBASE_APP_ID:"1:146016822888:web:31c9c2a9b5c69723e67ddd",VITE_FIREBASE_AUTH_DOMAIN:"ryan-react-2ace0.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-0T67BPN7XT",VITE_FIREBASE_MESSAGING_SENDER_ID:"146016822888",VITE_FIREBASE_PROJECT_ID:"ryan-react-2ace0",VITE_FIREBASE_STORAGE_BUCKET:"ryan-react-2ace0.firebasestorage.app"};function Xh(n){return"init"in n}function ea(n){return!!n.write}function ql(n){return"v"in n||"e"in n}function pi(n){if("e"in n)throw n.e;if((dt?"production":void 0)!=="production"&&!("v"in n))throw new Error("[Bug] atom state is not initialized");return n.v}const mi=new WeakMap;function Zh(n){var e;return gi(n)&&!!((e=mi.get(n))!=null&&e[0])}function Rg(n){const e=mi.get(n);e?.[0]&&(e[0]=!1,e[1].forEach(t=>t()))}function Sg(n,e){let t=mi.get(n);if(!t){t=[!0,new Set],mi.set(n,t);const r=()=>{t[0]=!1};n.then(r,r)}t[1].add(e)}function gi(n){return typeof n?.then=="function"}function ed(n,e,t){if(!t.p.has(n)){t.p.add(n);const r=()=>t.p.delete(n);e.then(r,r)}}function td(n,e,t){var r;const s=new Set;for(const i of((r=t.get(n))==null?void 0:r.t)||[])s.add(i);for(const i of e.p)s.add(i);return s}const Cg=(n,e,...t)=>e.read(...t),Pg=(n,e,...t)=>e.write(...t),kg=(n,e)=>{var t;return(t=e.INTERNAL_onInit)==null?void 0:t.call(e,n)},Dg=(n,e,t)=>{var r;return(r=e.onMount)==null?void 0:r.call(e,t)},Og=(n,e)=>{var t;const r=Ve(n),s=r[0],i=r[6],a=r[9];if((dt?"production":void 0)!=="production"&&!e)throw new Error("Atom is undefined or null");let c=s.get(e);return c||(c={d:new Map,p:new Set,n:0},s.set(e,c),(t=i.i)==null||t.call(i,e),a?.(n,e)),c},Ng=n=>{const e=Ve(n),t=e[1],r=e[3],s=e[4],i=e[5],a=e[6],c=e[13],l=[],h=f=>{try{f()}catch(m){l.push(m)}};do{a.f&&h(a.f);const f=new Set,m=f.add.bind(f);r.forEach(g=>{var T;return(T=t.get(g))==null?void 0:T.l.forEach(m)}),r.clear(),i.forEach(m),i.clear(),s.forEach(m),s.clear(),f.forEach(h),r.size&&c(n)}while(r.size||i.size||s.size);if(l.length)throw new AggregateError(l)},Vg=n=>{const e=Ve(n),t=e[1],r=e[2],s=e[3],i=e[11],a=e[14],c=e[17],l=[],h=new WeakSet,f=new WeakSet,m=Array.from(s);for(;m.length;){const g=m[m.length-1],T=i(n,g);if(f.has(g)){m.pop();continue}if(h.has(g)){if(r.get(g)===T.n)l.push([g,T]);else if((dt?"production":void 0)!=="production"&&r.has(g))throw new Error("[Bug] invalidated atom exists");f.add(g),m.pop();continue}h.add(g);for(const S of td(g,T,t))h.has(S)||m.push(S)}for(let g=l.length-1;g>=0;--g){const[T,S]=l[g];let C=!1;for(const P of S.d.keys())if(P!==T&&s.has(P)){C=!0;break}C&&(a(n,T),c(n,T)),r.delete(T)}},ta=new WeakSet,xg=(n,e)=>{var t,r;const s=Ve(n),i=s[1],a=s[2],c=s[3],l=s[6],h=s[7],f=s[11],m=s[12],g=s[13],T=s[14],S=s[16],C=s[17],P=s[20],O=f(n,e);if(ql(O)){if(i.has(e)&&a.get(e)!==O.n)return O;let y=!1;for(const[I,E]of O.d)if(T(n,I).n!==E){y=!0;break}if(!y)return O}O.d.clear();let V=!0;function L(){i.has(e)&&(C(n,e),g(n),m(n))}function q(y){var I;if(y===e){const b=f(n,y);if(!ql(b))if(Xh(y))P(n,y,y.init);else throw new Error("no atom init");return pi(b)}const E=T(n,y);try{return pi(E)}finally{O.d.set(y,E.n),Zh(O.v)&&ed(e,O.v,E),i.has(e)&&((I=i.get(y))==null||I.t.add(e)),V||L()}}let W,Q;const v={get signal(){return W||(W=new AbortController),W.signal},get setSelf(){return(dt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] setSelf is deprecated and will be removed in v3."),(dt?"production":void 0)!=="production"&&!ea(e)&&console.warn("setSelf function cannot be used with read-only atom"),!Q&&ea(e)&&(Q=(...y)=>{if((dt?"production":void 0)!=="production"&&V&&console.warn("setSelf function cannot be called in sync"),!V)try{return S(n,e,...y)}finally{g(n),m(n)}}),Q}},_=O.n;try{(dt?"production":void 0)!=="production"&&ta.delete(n);const y=h(n,e,q,v);return(dt?"production":void 0)!=="production"&&ta.has(n)&&console.warn("Detected store mutation during atom read. This is not supported."),P(n,e,y),gi(y)&&(Sg(y,()=>W?.abort()),y.then(L,L)),(t=l.r)==null||t.call(l,e),O}catch(y){return delete O.v,O.e=y,++O.n,O}finally{V=!1,_!==O.n&&a.get(e)===_&&(a.set(e,O.n),c.add(e),(r=l.c)==null||r.call(l,e))}},Mg=(n,e)=>{const t=Ve(n),r=t[1],s=t[2],i=t[11],a=[e];for(;a.length;){const c=a.pop(),l=i(n,c);for(const h of td(c,l,r)){const f=i(n,h);s.set(h,f.n),a.push(h)}}},Lg=(n,e,...t)=>{const r=Ve(n),s=r[3],i=r[6],a=r[8],c=r[11],l=r[12],h=r[13],f=r[14],m=r[15],g=r[16],T=r[17],S=r[20];let C=!0;const P=V=>pi(f(n,V)),O=(V,...L)=>{var q;const W=c(n,V);try{if(V===e){if(!Xh(V))throw new Error("atom not writable");(dt?"production":void 0)!=="production"&&ta.add(n);const Q=W.n,v=L[0];S(n,V,v),T(n,V),Q!==W.n&&(s.add(V),m(n,V),(q=i.c)==null||q.call(i,V));return}else return g(n,V,...L)}finally{C||(h(n),l(n))}};try{return a(n,e,P,O,...t)}finally{C=!1}},Fg=(n,e)=>{var t;const r=Ve(n),s=r[1],i=r[3],a=r[6],c=r[11],l=r[15],h=r[18],f=r[19],m=c(n,e),g=s.get(e);if(g&&!Zh(m.v)){for(const[T,S]of m.d)if(!g.d.has(T)){const C=c(n,T);h(n,T).t.add(e),g.d.add(T),S!==C.n&&(i.add(T),l(n,T),(t=a.c)==null||t.call(a,T))}for(const T of g.d)if(!m.d.has(T)){g.d.delete(T);const S=f(n,T);S?.t.delete(e)}}},Ug=(n,e)=>{var t;const r=Ve(n),s=r[1],i=r[4],a=r[6],c=r[10],l=r[11],h=r[12],f=r[13],m=r[14],g=r[16],T=r[18],S=l(n,e);let C=s.get(e);if(!C){m(n,e);for(const P of S.d.keys())T(n,P).t.add(e);if(C={l:new Set,d:new Set(S.d.keys()),t:new Set},s.set(e,C),ea(e)){const P=()=>{let O=!0;const V=(...L)=>{try{return g(n,e,...L)}finally{O||(f(n),h(n))}};try{const L=c(n,e,V);L&&(C.u=()=>{O=!0;try{L()}finally{O=!1}})}finally{O=!1}};i.add(P)}(t=a.m)==null||t.call(a,e)}return C},Bg=(n,e)=>{var t,r;const s=Ve(n),i=s[1],a=s[5],c=s[6],l=s[11],h=s[19],f=l(n,e);let m=i.get(e);if(!m||m.l.size)return m;let g=!1;for(const T of m.t)if((t=i.get(T))!=null&&t.d.has(e)){g=!0;break}if(!g){m.u&&a.add(m.u),m=void 0,i.delete(e);for(const T of f.d.keys()){const S=h(n,T);S?.t.delete(e)}(r=c.u)==null||r.call(c,e);return}return m},jg=(n,e,t)=>{const r=Ve(n)[11],s=r(n,e),i="v"in s,a=s.v;if(gi(t))for(const c of s.d.keys())ed(e,t,r(n,c));s.v=t,delete s.e,(!i||!Object.is(a,s.v))&&(++s.n,gi(a)&&Rg(a))},qg=(n,e)=>{const t=Ve(n)[14];return pi(t(n,e))},$g=(n,e,...t)=>{const r=Ve(n),s=r[12],i=r[13],a=r[16];try{return a(n,e,...t)}finally{i(n),s(n)}},zg=(n,e,t)=>{const r=Ve(n),s=r[12],i=r[18],a=r[19],l=i(n,e).l;return l.add(t),s(n),()=>{l.delete(t),a(n,e),s(n)}},nd=new WeakMap,Ve=n=>{const e=nd.get(n);if((dt?"production":void 0)!=="production"&&!e)throw new Error("Store must be created by buildStore to read its building blocks");return e};function Gg(...n){const e={get(r){const s=Ve(e)[21];return s(e,r)},set(r,...s){const i=Ve(e)[22];return i(e,r,...s)},sub(r,s){const i=Ve(e)[23];return i(e,r,s)}},t=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},Cg,Pg,kg,Dg,Og,Ng,Vg,xg,Mg,Lg,Fg,Ug,Bg,jg,qg,$g,zg,void 0].map((r,s)=>n[s]||r);return nd.set(e,Object.freeze(t)),e}const rd={};let Hg=0;function qe(n,e){const t=`atom${++Hg}`,r={toString(){return(rd?"production":void 0)!=="production"&&this.debugLabel?t+":"+this.debugLabel:t}};return typeof n=="function"?r.read=n:(r.init=n,r.read=Wg,r.write=Kg),e&&(r.write=e),r}function Wg(n){return n(this)}function Kg(n,e,t){return e(this,typeof t=="function"?t(n(this)):t)}function Qg(){return Gg()}let Br;function qC(){return Br||(Br=Qg(),(rd?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Br),globalThis.__JOTAI_DEFAULT_STORE__!==Br&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Br}const $C=qe(!0),Yg=qe(null),zC=qe(null);function $l(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function sd(...n){return e=>{let t=!1;const r=n.map(s=>{const i=$l(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():$l(n[s],null)}}}}function GC(...n){return Re.useCallback(sd(...n),n)}function id(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=id(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function od(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=id(n))&&(r&&(r+=" "),r+=e);return r}const Jg=(n,e)=>{const t=new Array(n.length+e.length);for(let r=0;r<n.length;r++)t[r]=n[r];for(let r=0;r<e.length;r++)t[n.length+r]=e[r];return t},Xg=(n,e)=>({classGroupId:n,validator:e}),ad=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),_i="-",zl=[],Zg="arbitrary..",e_=n=>{const e=n_(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return t_(a);const c=a.split(_i),l=c[0]===""&&c.length>1?1:0;return cd(c,l,e)},getConflictingClassGroupIds:(a,c)=>{if(c){const l=r[a],h=t[a];return l?h?Jg(h,l):l:h||zl}return t[a]||zl}}},cd=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const s=n[e],i=t.nextPart.get(s);if(i){const h=cd(n,e+1,i);if(h)return h}const a=t.validators;if(a===null)return;const c=e===0?n.join(_i):n.slice(e).join(_i),l=a.length;for(let h=0;h<l;h++){const f=a[h];if(f.validator(c))return f.classGroupId}},t_=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),r=e.slice(0,t);return r?Zg+r:void 0})(),n_=n=>{const{theme:e,classGroups:t}=n;return r_(t,e)},r_=(n,e)=>{const t=ad();for(const r in n){const s=n[r];Fa(s,t,r,e)}return t},Fa=(n,e,t,r)=>{const s=n.length;for(let i=0;i<s;i++){const a=n[i];s_(a,e,t,r)}},s_=(n,e,t,r)=>{if(typeof n=="string"){i_(n,e,t);return}if(typeof n=="function"){o_(n,e,t,r);return}a_(n,e,t,r)},i_=(n,e,t)=>{const r=n===""?e:ld(e,n);r.classGroupId=t},o_=(n,e,t,r)=>{if(c_(n)){Fa(n(r),e,t,r);return}e.validators===null&&(e.validators=[]),e.validators.push(Xg(t,n))},a_=(n,e,t,r)=>{const s=Object.entries(n),i=s.length;for(let a=0;a<i;a++){const[c,l]=s[a];Fa(l,ld(e,c),t,r)}},ld=(n,e)=>{let t=n;const r=e.split(_i),s=r.length;for(let i=0;i<s;i++){const a=r[i];let c=t.nextPart.get(a);c||(c=ad(),t.nextPart.set(a,c)),t=c}return t},c_=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,l_=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),r=Object.create(null);const s=(i,a)=>{t[i]=a,e++,e>n&&(e=0,r=t,t=Object.create(null))};return{get(i){let a=t[i];if(a!==void 0)return a;if((a=r[i])!==void 0)return s(i,a),a},set(i,a){i in t?t[i]=a:s(i,a)}}},na="!",Gl=":",u_=[],Hl=(n,e,t,r,s)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:r,isExternal:s}),h_=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const i=[];let a=0,c=0,l=0,h;const f=s.length;for(let C=0;C<f;C++){const P=s[C];if(a===0&&c===0){if(P===Gl){i.push(s.slice(l,C)),l=C+1;continue}if(P==="/"){h=C;continue}}P==="["?a++:P==="]"?a--:P==="("?c++:P===")"&&c--}const m=i.length===0?s:s.slice(l);let g=m,T=!1;m.endsWith(na)?(g=m.slice(0,-1),T=!0):m.startsWith(na)&&(g=m.slice(1),T=!0);const S=h&&h>l?h-l:void 0;return Hl(i,T,g,S)};if(e){const s=e+Gl,i=r;r=a=>a.startsWith(s)?i(a.slice(s.length)):Hl(u_,!1,a,void 0,!0)}if(t){const s=r;r=i=>t({className:i,parseClassName:s})}return r},d_=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,r)=>{e.set(t,1e6+r)}),t=>{const r=[];let s=[];for(let i=0;i<t.length;i++){const a=t[i],c=a[0]==="[",l=e.has(a);c||l?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(a)):s.push(a)}return s.length>0&&(s.sort(),r.push(...s)),r}},f_=n=>({cache:l_(n.cacheSize),parseClassName:h_(n),sortModifiers:d_(n),...e_(n)}),p_=/\s+/,m_=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,a=[],c=n.trim().split(p_);let l="";for(let h=c.length-1;h>=0;h-=1){const f=c[h],{isExternal:m,modifiers:g,hasImportantModifier:T,baseClassName:S,maybePostfixModifierPosition:C}=t(f);if(m){l=f+(l.length>0?" "+l:l);continue}let P=!!C,O=r(P?S.substring(0,C):S);if(!O){if(!P){l=f+(l.length>0?" "+l:l);continue}if(O=r(S),!O){l=f+(l.length>0?" "+l:l);continue}P=!1}const V=g.length===0?"":g.length===1?g[0]:i(g).join(":"),L=T?V+na:V,q=L+O;if(a.indexOf(q)>-1)continue;a.push(q);const W=s(O,P);for(let Q=0;Q<W.length;++Q){const v=W[Q];a.push(L+v)}l=f+(l.length>0?" "+l:l)}return l},g_=(...n)=>{let e=0,t,r,s="";for(;e<n.length;)(t=n[e++])&&(r=ud(t))&&(s&&(s+=" "),s+=r);return s},ud=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=ud(n[r]))&&(t&&(t+=" "),t+=e);return t},__=(n,...e)=>{let t,r,s,i;const a=l=>{const h=e.reduce((f,m)=>m(f),n());return t=f_(h),r=t.cache.get,s=t.cache.set,i=c,c(l)},c=l=>{const h=r(l);if(h)return h;const f=m_(l,t);return s(l,f),f};return i=a,(...l)=>i(g_(...l))},y_=[],ye=n=>{const e=t=>t[n]||y_;return e.isThemeGetter=!0,e},hd=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,dd=/^\((?:(\w[\w-]*):)?(.+)\)$/i,w_=/^\d+\/\d+$/,v_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,I_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,T_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,b_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Wn=n=>w_.test(n),Y=n=>!!n&&!Number.isNaN(Number(n)),Lt=n=>!!n&&Number.isInteger(Number(n)),Vo=n=>n.endsWith("%")&&Y(n.slice(0,-1)),Et=n=>v_.test(n),A_=()=>!0,R_=n=>E_.test(n)&&!I_.test(n),fd=()=>!1,S_=n=>T_.test(n),C_=n=>b_.test(n),P_=n=>!F(n)&&!U(n),k_=n=>pr(n,gd,fd),F=n=>hd.test(n),wn=n=>pr(n,_d,R_),xo=n=>pr(n,x_,Y),Wl=n=>pr(n,pd,fd),D_=n=>pr(n,md,C_),Ws=n=>pr(n,yd,S_),U=n=>dd.test(n),jr=n=>mr(n,_d),O_=n=>mr(n,M_),Kl=n=>mr(n,pd),N_=n=>mr(n,gd),V_=n=>mr(n,md),Ks=n=>mr(n,yd,!0),pr=(n,e,t)=>{const r=hd.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},mr=(n,e,t=!1)=>{const r=dd.exec(n);return r?r[1]?e(r[1]):t:!1},pd=n=>n==="position"||n==="percentage",md=n=>n==="image"||n==="url",gd=n=>n==="length"||n==="size"||n==="bg-size",_d=n=>n==="length",x_=n=>n==="number",M_=n=>n==="family-name",yd=n=>n==="shadow",L_=()=>{const n=ye("color"),e=ye("font"),t=ye("text"),r=ye("font-weight"),s=ye("tracking"),i=ye("leading"),a=ye("breakpoint"),c=ye("container"),l=ye("spacing"),h=ye("radius"),f=ye("shadow"),m=ye("inset-shadow"),g=ye("text-shadow"),T=ye("drop-shadow"),S=ye("blur"),C=ye("perspective"),P=ye("aspect"),O=ye("ease"),V=ye("animate"),L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],W=()=>[...q(),U,F],Q=()=>["auto","hidden","clip","visible","scroll"],v=()=>["auto","contain","none"],_=()=>[U,F,l],y=()=>[Wn,"full","auto",..._()],I=()=>[Lt,"none","subgrid",U,F],E=()=>["auto",{span:["full",Lt,U,F]},Lt,U,F],b=()=>[Lt,"auto",U,F],w=()=>["auto","min","max","fr",U,F],ve=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],je=()=>["start","end","center","stretch","center-safe","end-safe"],rt=()=>["auto",..._()],vt=()=>[Wn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],j=()=>[n,U,F],hn=()=>[...q(),Kl,Wl,{position:[U,F]}],Vs=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Ir=()=>["auto","cover","contain",N_,k_,{size:[U,F]}],Bn=()=>[Vo,jr,wn],Ee=()=>["","none","full",h,U,F],Ie=()=>["",Y,jr,wn],kt=()=>["solid","dashed","dotted","double"],jn=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>[Y,Vo,Kl,Wl],qn=()=>["","none",S,U,F],dn=()=>["none",Y,U,F],$n=()=>["none",Y,U,F],Tr=()=>[Y,U,F],fn=()=>[Wn,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Et],breakpoint:[Et],color:[A_],container:[Et],"drop-shadow":[Et],ease:["in","out","in-out"],font:[P_],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Et],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Et],shadow:[Et],spacing:["px",Y],text:[Et],"text-shadow":[Et],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Wn,F,U,P]}],container:["container"],columns:[{columns:[Y,F,U,c]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:W()}],overflow:[{overflow:Q()}],"overflow-x":[{"overflow-x":Q()}],"overflow-y":[{"overflow-y":Q()}],overscroll:[{overscroll:v()}],"overscroll-x":[{"overscroll-x":v()}],"overscroll-y":[{"overscroll-y":v()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:y()}],"inset-x":[{"inset-x":y()}],"inset-y":[{"inset-y":y()}],start:[{start:y()}],end:[{end:y()}],top:[{top:y()}],right:[{right:y()}],bottom:[{bottom:y()}],left:[{left:y()}],visibility:["visible","invisible","collapse"],z:[{z:[Lt,"auto",U,F]}],basis:[{basis:[Wn,"full","auto",c,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Y,Wn,"auto","initial","none",F]}],grow:[{grow:["",Y,U,F]}],shrink:[{shrink:["",Y,U,F]}],order:[{order:[Lt,"first","last","none",U,F]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:E()}],"col-start":[{"col-start":b()}],"col-end":[{"col-end":b()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:E()}],"row-start":[{"row-start":b()}],"row-end":[{"row-end":b()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":w()}],"auto-rows":[{"auto-rows":w()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...ve(),"normal"]}],"justify-items":[{"justify-items":[...je(),"normal"]}],"justify-self":[{"justify-self":["auto",...je()]}],"align-content":[{content:["normal",...ve()]}],"align-items":[{items:[...je(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...je(),{baseline:["","last"]}]}],"place-content":[{"place-content":ve()}],"place-items":[{"place-items":[...je(),"baseline"]}],"place-self":[{"place-self":["auto",...je()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:rt()}],mx:[{mx:rt()}],my:[{my:rt()}],ms:[{ms:rt()}],me:[{me:rt()}],mt:[{mt:rt()}],mr:[{mr:rt()}],mb:[{mb:rt()}],ml:[{ml:rt()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:vt()}],w:[{w:[c,"screen",...vt()]}],"min-w":[{"min-w":[c,"screen","none",...vt()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...vt()]}],h:[{h:["screen","lh",...vt()]}],"min-h":[{"min-h":["screen","lh","none",...vt()]}],"max-h":[{"max-h":["screen","lh",...vt()]}],"font-size":[{text:["base",t,jr,wn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,U,xo]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Vo,F]}],"font-family":[{font:[O_,F,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,U,F]}],"line-clamp":[{"line-clamp":[Y,"none",U,xo]}],leading:[{leading:[i,..._()]}],"list-image":[{"list-image":["none",U,F]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",U,F]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:j()}],"text-color":[{text:j()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...kt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Y,"from-font","auto",U,wn]}],"text-decoration-color":[{decoration:j()}],"underline-offset":[{"underline-offset":[Y,"auto",U,F]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",U,F]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",U,F]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:hn()}],"bg-repeat":[{bg:Vs()}],"bg-size":[{bg:Ir()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Lt,U,F],radial:["",U,F],conic:[Lt,U,F]},V_,D_]}],"bg-color":[{bg:j()}],"gradient-from-pos":[{from:Bn()}],"gradient-via-pos":[{via:Bn()}],"gradient-to-pos":[{to:Bn()}],"gradient-from":[{from:j()}],"gradient-via":[{via:j()}],"gradient-to":[{to:j()}],rounded:[{rounded:Ee()}],"rounded-s":[{"rounded-s":Ee()}],"rounded-e":[{"rounded-e":Ee()}],"rounded-t":[{"rounded-t":Ee()}],"rounded-r":[{"rounded-r":Ee()}],"rounded-b":[{"rounded-b":Ee()}],"rounded-l":[{"rounded-l":Ee()}],"rounded-ss":[{"rounded-ss":Ee()}],"rounded-se":[{"rounded-se":Ee()}],"rounded-ee":[{"rounded-ee":Ee()}],"rounded-es":[{"rounded-es":Ee()}],"rounded-tl":[{"rounded-tl":Ee()}],"rounded-tr":[{"rounded-tr":Ee()}],"rounded-br":[{"rounded-br":Ee()}],"rounded-bl":[{"rounded-bl":Ee()}],"border-w":[{border:Ie()}],"border-w-x":[{"border-x":Ie()}],"border-w-y":[{"border-y":Ie()}],"border-w-s":[{"border-s":Ie()}],"border-w-e":[{"border-e":Ie()}],"border-w-t":[{"border-t":Ie()}],"border-w-r":[{"border-r":Ie()}],"border-w-b":[{"border-b":Ie()}],"border-w-l":[{"border-l":Ie()}],"divide-x":[{"divide-x":Ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...kt(),"hidden","none"]}],"divide-style":[{divide:[...kt(),"hidden","none"]}],"border-color":[{border:j()}],"border-color-x":[{"border-x":j()}],"border-color-y":[{"border-y":j()}],"border-color-s":[{"border-s":j()}],"border-color-e":[{"border-e":j()}],"border-color-t":[{"border-t":j()}],"border-color-r":[{"border-r":j()}],"border-color-b":[{"border-b":j()}],"border-color-l":[{"border-l":j()}],"divide-color":[{divide:j()}],"outline-style":[{outline:[...kt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Y,U,F]}],"outline-w":[{outline:["",Y,jr,wn]}],"outline-color":[{outline:j()}],shadow:[{shadow:["","none",f,Ks,Ws]}],"shadow-color":[{shadow:j()}],"inset-shadow":[{"inset-shadow":["none",m,Ks,Ws]}],"inset-shadow-color":[{"inset-shadow":j()}],"ring-w":[{ring:Ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:j()}],"ring-offset-w":[{"ring-offset":[Y,wn]}],"ring-offset-color":[{"ring-offset":j()}],"inset-ring-w":[{"inset-ring":Ie()}],"inset-ring-color":[{"inset-ring":j()}],"text-shadow":[{"text-shadow":["none",g,Ks,Ws]}],"text-shadow-color":[{"text-shadow":j()}],opacity:[{opacity:[Y,U,F]}],"mix-blend":[{"mix-blend":[...jn(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":jn()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Y]}],"mask-image-linear-from-pos":[{"mask-linear-from":ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":ce()}],"mask-image-linear-from-color":[{"mask-linear-from":j()}],"mask-image-linear-to-color":[{"mask-linear-to":j()}],"mask-image-t-from-pos":[{"mask-t-from":ce()}],"mask-image-t-to-pos":[{"mask-t-to":ce()}],"mask-image-t-from-color":[{"mask-t-from":j()}],"mask-image-t-to-color":[{"mask-t-to":j()}],"mask-image-r-from-pos":[{"mask-r-from":ce()}],"mask-image-r-to-pos":[{"mask-r-to":ce()}],"mask-image-r-from-color":[{"mask-r-from":j()}],"mask-image-r-to-color":[{"mask-r-to":j()}],"mask-image-b-from-pos":[{"mask-b-from":ce()}],"mask-image-b-to-pos":[{"mask-b-to":ce()}],"mask-image-b-from-color":[{"mask-b-from":j()}],"mask-image-b-to-color":[{"mask-b-to":j()}],"mask-image-l-from-pos":[{"mask-l-from":ce()}],"mask-image-l-to-pos":[{"mask-l-to":ce()}],"mask-image-l-from-color":[{"mask-l-from":j()}],"mask-image-l-to-color":[{"mask-l-to":j()}],"mask-image-x-from-pos":[{"mask-x-from":ce()}],"mask-image-x-to-pos":[{"mask-x-to":ce()}],"mask-image-x-from-color":[{"mask-x-from":j()}],"mask-image-x-to-color":[{"mask-x-to":j()}],"mask-image-y-from-pos":[{"mask-y-from":ce()}],"mask-image-y-to-pos":[{"mask-y-to":ce()}],"mask-image-y-from-color":[{"mask-y-from":j()}],"mask-image-y-to-color":[{"mask-y-to":j()}],"mask-image-radial":[{"mask-radial":[U,F]}],"mask-image-radial-from-pos":[{"mask-radial-from":ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":ce()}],"mask-image-radial-from-color":[{"mask-radial-from":j()}],"mask-image-radial-to-color":[{"mask-radial-to":j()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":q()}],"mask-image-conic-pos":[{"mask-conic":[Y]}],"mask-image-conic-from-pos":[{"mask-conic-from":ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":ce()}],"mask-image-conic-from-color":[{"mask-conic-from":j()}],"mask-image-conic-to-color":[{"mask-conic-to":j()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:hn()}],"mask-repeat":[{mask:Vs()}],"mask-size":[{mask:Ir()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",U,F]}],filter:[{filter:["","none",U,F]}],blur:[{blur:qn()}],brightness:[{brightness:[Y,U,F]}],contrast:[{contrast:[Y,U,F]}],"drop-shadow":[{"drop-shadow":["","none",T,Ks,Ws]}],"drop-shadow-color":[{"drop-shadow":j()}],grayscale:[{grayscale:["",Y,U,F]}],"hue-rotate":[{"hue-rotate":[Y,U,F]}],invert:[{invert:["",Y,U,F]}],saturate:[{saturate:[Y,U,F]}],sepia:[{sepia:["",Y,U,F]}],"backdrop-filter":[{"backdrop-filter":["","none",U,F]}],"backdrop-blur":[{"backdrop-blur":qn()}],"backdrop-brightness":[{"backdrop-brightness":[Y,U,F]}],"backdrop-contrast":[{"backdrop-contrast":[Y,U,F]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Y,U,F]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Y,U,F]}],"backdrop-invert":[{"backdrop-invert":["",Y,U,F]}],"backdrop-opacity":[{"backdrop-opacity":[Y,U,F]}],"backdrop-saturate":[{"backdrop-saturate":[Y,U,F]}],"backdrop-sepia":[{"backdrop-sepia":["",Y,U,F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",U,F]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Y,"initial",U,F]}],ease:[{ease:["linear","initial",O,U,F]}],delay:[{delay:[Y,U,F]}],animate:[{animate:["none",V,U,F]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,U,F]}],"perspective-origin":[{"perspective-origin":W()}],rotate:[{rotate:dn()}],"rotate-x":[{"rotate-x":dn()}],"rotate-y":[{"rotate-y":dn()}],"rotate-z":[{"rotate-z":dn()}],scale:[{scale:$n()}],"scale-x":[{"scale-x":$n()}],"scale-y":[{"scale-y":$n()}],"scale-z":[{"scale-z":$n()}],"scale-3d":["scale-3d"],skew:[{skew:Tr()}],"skew-x":[{"skew-x":Tr()}],"skew-y":[{"skew-y":Tr()}],transform:[{transform:[U,F,"","none","gpu","cpu"]}],"transform-origin":[{origin:W()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:fn()}],"translate-x":[{"translate-x":fn()}],"translate-y":[{"translate-y":fn()}],"translate-z":[{"translate-z":fn()}],"translate-none":["translate-none"],accent:[{accent:j()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:j()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",U,F]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",U,F]}],fill:[{fill:["none",...j()]}],"stroke-w":[{stroke:[Y,jr,wn,xo]}],stroke:[{stroke:["none",...j()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},F_=__(L_);function wd(...n){return F_(od(n))}var U_=Symbol.for("react.lazy"),yi=Ag[" use ".trim().toString()];function B_(n){return typeof n=="object"&&n!==null&&"then"in n}function vd(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===U_&&"_payload"in n&&B_(n._payload)}function Ed(n){const e=q_(n),t=Re.forwardRef((r,s)=>{let{children:i,...a}=r;vd(i)&&typeof yi=="function"&&(i=yi(i._payload));const c=Re.Children.toArray(i),l=c.find(z_);if(l){const h=l.props.children,f=c.map(m=>m===l?Re.Children.count(h)>1?Re.Children.only(null):Re.isValidElement(h)?h.props.children:null:m);return or.jsx(e,{...a,ref:s,children:Re.isValidElement(h)?Re.cloneElement(h,void 0,f):null})}return or.jsx(e,{...a,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var j_=Ed("Slot");function q_(n){const e=Re.forwardRef((t,r)=>{let{children:s,...i}=t;if(vd(s)&&typeof yi=="function"&&(s=yi(s._payload)),Re.isValidElement(s)){const a=H_(s),c=G_(i,s.props);return s.type!==Re.Fragment&&(c.ref=r?sd(r,a):a),Re.cloneElement(s,c)}return Re.Children.count(s)>1?Re.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var $_=Symbol("radix.slottable");function z_(n){return Re.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===$_}function G_(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...c)=>{const l=i(...c);return s(...c),l}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function H_(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const Ql=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Yl=od,W_=(n,e)=>t=>{var r;if(e?.variants==null)return Yl(n,t?.class,t?.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(h=>{const f=t?.[h],m=i?.[h];if(f===null)return null;const g=Ql(f)||Ql(m);return s[h][g]}),c=t&&Object.entries(t).reduce((h,f)=>{let[m,g]=f;return g===void 0||(h[m]=g),h},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:m,className:g,...T}=f;return Object.entries(T).every(S=>{let[C,P]=S;return Array.isArray(P)?P.includes({...i,...c}[C]):{...i,...c}[C]===P})?[...h,m,g]:h},[]);return Yl(n,a,l,t?.class,t?.className)},K_=W_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function HC({className:n,variant:e="default",size:t="default",asChild:r=!1,...s}){const i=r?j_:"button";return or.jsx(i,{"data-slot":"button","data-variant":e,"data-size":t,className:wd(K_({variant:e,size:t,className:n})),...s})}var ys=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Q_={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},Y_=class{#e=Q_;#t=!1;setTimeoutProvider(n){this.#e=n}setTimeout(n,e){return this.#e.setTimeout(n,e)}clearTimeout(n){this.#e.clearTimeout(n)}setInterval(n,e){return this.#e.setInterval(n,e)}clearInterval(n){this.#e.clearInterval(n)}},En=new Y_;function J_(n){setTimeout(n,0)}var ar=typeof window>"u"||"Deno"in globalThis;function Je(){}function X_(n,e){return typeof n=="function"?n(e):n}function ra(n){return typeof n=="number"&&n>=0&&n!==1/0}function Id(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Gt(n,e){return typeof n=="function"?n(e):n}function Xe(n,e){return typeof n=="function"?n(e):n}function Jl(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:c}=n;if(a){if(r){if(e.queryHash!==Ua(a,e.options))return!1}else if(!ss(e.queryKey,a))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||s&&s!==e.state.fetchStatus||i&&!i(e))}function Xl(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(rs(e.options.mutationKey)!==rs(i))return!1}else if(!ss(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Ua(n,e){return(e?.queryKeyHashFn||rs)(n)}function rs(n){return JSON.stringify(n,(e,t)=>ia(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function ss(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>ss(n[t],e[t])):!1}var Z_=Object.prototype.hasOwnProperty;function Td(n,e,t=0){if(n===e)return n;if(t>500)return e;const r=Zl(n)&&Zl(e);if(!r&&!(ia(n)&&ia(e)))return e;const i=(r?n:Object.keys(n)).length,a=r?e:Object.keys(e),c=a.length,l=r?new Array(c):{};let h=0;for(let f=0;f<c;f++){const m=r?f:a[f],g=n[m],T=e[m];if(g===T){l[m]=g,(r?f<i:Z_.call(n,m))&&h++;continue}if(g===null||T===null||typeof g!="object"||typeof T!="object"){l[m]=T;continue}const S=Td(g,T,t+1);l[m]=S,S===g&&h++}return i===c&&h===i?n:l}function sa(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function Zl(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function ia(n){if(!eu(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!eu(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function eu(n){return Object.prototype.toString.call(n)==="[object Object]"}function ey(n){return new Promise(e=>{En.setTimeout(e,n)})}function oa(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Td(n,e):e}function ty(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function ny(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Ba=Symbol();function bd(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===Ba?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function ry(n,e,t){let r=!1,s;return Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?t():s.addEventListener("abort",t,{once:!0})),s)}),n}var sy=class extends ys{#e;#t;#n;constructor(){super(),this.#n=n=>{if(!ar&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},ja=new sy;function aa(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}var iy=J_;function oy(){let n=[],e=0,t=c=>{c()},r=c=>{c()},s=iy;const i=c=>{e?n.push(c):s(()=>{t(c)})},a=()=>{const c=n;n=[],c.length&&s(()=>{r(()=>{c.forEach(l=>{t(l)})})})};return{batch:c=>{let l;e++;try{l=c()}finally{e--,e||a()}return l},batchCalls:c=>(...l)=>{i(()=>{c(...l)})},schedule:i,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{s=c}}}var Se=oy(),ay=class extends ys{#e=!0;#t;#n;constructor(){super(),this.#n=n=>{if(!ar&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},wi=new ay;function cy(n){return Math.min(1e3*2**n,3e4)}function Ad(n){return(n??"online")==="online"?wi.isOnline():!0}var ca=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function Rd(n){let e=!1,t=0,r;const s=aa(),i=()=>s.status!=="pending",a=C=>{if(!i()){const P=new ca(C);g(P),n.onCancel?.(P)}},c=()=>{e=!0},l=()=>{e=!1},h=()=>ja.isFocused()&&(n.networkMode==="always"||wi.isOnline())&&n.canRun(),f=()=>Ad(n.networkMode)&&n.canRun(),m=C=>{i()||(r?.(),s.resolve(C))},g=C=>{i()||(r?.(),s.reject(C))},T=()=>new Promise(C=>{r=P=>{(i()||h())&&C(P)},n.onPause?.()}).then(()=>{r=void 0,i()||n.onContinue?.()}),S=()=>{if(i())return;let C;const P=t===0?n.initialPromise:void 0;try{C=P??n.fn()}catch(O){C=Promise.reject(O)}Promise.resolve(C).then(m).catch(O=>{if(i())return;const V=n.retry??(ar?0:3),L=n.retryDelay??cy,q=typeof L=="function"?L(t,O):L,W=V===!0||typeof V=="number"&&t<V||typeof V=="function"&&V(t,O);if(e||!W){g(O);return}t++,n.onFail?.(t,O),ey(q).then(()=>h()?void 0:T()).then(()=>{e?g(O):S()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(r?.(),s),cancelRetry:c,continueRetry:l,canStart:f,start:()=>(f()?S():T().then(S),s)}}var Sd=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ra(this.gcTime)&&(this.#e=En.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(ar?1/0:300*1e3))}clearGcTimeout(){this.#e&&(En.clearTimeout(this.#e),this.#e=void 0)}},ly=class extends Sd{#e;#t;#n;#s;#r;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=nu(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=nu(this.options);t.data!==void 0&&(this.setState(tu(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const r=oa(this.state.data,e,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Je).catch(Je):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Xe(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ba||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Gt(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Id(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(h=>h.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,s=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},i=()=>{const l=bd(this.options,t),f=(()=>{const m={client:this.#s,queryKey:this.queryKey,meta:this.meta};return s(m),m})();return this.#o=!1,this.options.persister?this.options.persister(l,f,this):l(f)},c=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:i};return s(l),l})();this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#i({type:"fetch",meta:c.fetchOptions?.meta}),this.#r=Rd({initialPromise:t?.initialPromise,fn:c.fetchFn,onCancel:l=>{l instanceof ca&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,h)=>{this.#i({type:"failed",failureCount:l,error:h})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0});try{const l=await this.#r.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof ca){if(l.silent)return this.#r.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#i({type:"error",error:l}),this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#i(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Cd(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,...tu(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?s:void 0,s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Se.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function Cd(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ad(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function tu(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function nu(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var uy=class extends ys{constructor(n,e){super(),this.options=e,this.#e=n,this.#i=null,this.#o=aa(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#s=void 0;#r;#a;#o;#i;#m;#d;#f;#l;#u;#c;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),ru(this.#t,this.options)?this.#h():this.updateResult(),this.#w())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return la(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return la(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#E(),this.#t.removeObserver(this)}setOptions(n){const e=this.options,t=this.#t;if(this.options=this.#e.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xe(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#I(),this.#t.setOptions(this.options),e._defaulted&&!sa(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&su(this.#t,t,this.options,e)&&this.#h(),this.updateResult(),r&&(this.#t!==t||Xe(this.options.enabled,this.#t)!==Xe(e.enabled,this.#t)||Gt(this.options.staleTime,this.#t)!==Gt(e.staleTime,this.#t))&&this.#g();const s=this.#_();r&&(this.#t!==t||Xe(this.options.enabled,this.#t)!==Xe(e.enabled,this.#t)||s!==this.#c)&&this.#y(s)}getOptimisticResult(n){const e=this.#e.getQueryCache().build(this.#e,n),t=this.createResult(e,n);return dy(this,t)&&(this.#s=t,this.#a=this.options,this.#r=this.#t.state),t}getCurrentResult(){return this.#s}trackResult(n,e){return new Proxy(n,{get:(t,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,r))})}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#t}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#e.defaultQueryOptions(n),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#h({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#h(n){this.#I();let e=this.#t.fetch(this.options,n);return n?.throwOnError||(e=e.catch(Je)),e}#g(){this.#v();const n=Gt(this.options.staleTime,this.#t);if(ar||this.#s.isStale||!ra(n))return;const t=Id(this.#s.dataUpdatedAt,n)+1;this.#l=En.setTimeout(()=>{this.#s.isStale||this.updateResult()},t)}#_(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(n){this.#E(),this.#c=n,!(ar||Xe(this.options.enabled,this.#t)===!1||!ra(this.#c)||this.#c===0)&&(this.#u=En.setInterval(()=>{(this.options.refetchIntervalInBackground||ja.isFocused())&&this.#h()},this.#c))}#w(){this.#g(),this.#y(this.#_())}#v(){this.#l&&(En.clearTimeout(this.#l),this.#l=void 0)}#E(){this.#u&&(En.clearInterval(this.#u),this.#u=void 0)}createResult(n,e){const t=this.#t,r=this.options,s=this.#s,i=this.#r,a=this.#a,l=n!==t?n.state:this.#n,{state:h}=n;let f={...h},m=!1,g;if(e._optimisticResults){const _=this.hasListeners(),y=!_&&ru(n,e),I=_&&su(n,t,e,r);(y||I)&&(f={...f,...Cd(h.data,n.options)}),e._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:T,errorUpdatedAt:S,status:C}=f;g=f.data;let P=!1;if(e.placeholderData!==void 0&&g===void 0&&C==="pending"){let _;s?.isPlaceholderData&&e.placeholderData===a?.placeholderData?(_=s.data,P=!0):_=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,_!==void 0&&(C="success",g=oa(s?.data,_,e),m=!0)}if(e.select&&g!==void 0&&!P)if(s&&g===i?.data&&e.select===this.#m)g=this.#d;else try{this.#m=e.select,g=e.select(g),g=oa(s?.data,g,e),this.#d=g,this.#i=null}catch(_){this.#i=_}this.#i&&(T=this.#i,g=this.#d,S=Date.now(),C="error");const O=f.fetchStatus==="fetching",V=C==="pending",L=C==="error",q=V&&O,W=g!==void 0,v={status:C,fetchStatus:f.fetchStatus,isPending:V,isSuccess:C==="success",isError:L,isInitialLoading:q,isLoading:q,data:g,dataUpdatedAt:f.dataUpdatedAt,error:T,errorUpdatedAt:S,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>l.dataUpdateCount||f.errorUpdateCount>l.errorUpdateCount,isFetching:O,isRefetching:O&&!V,isLoadingError:L&&!W,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:L&&W,isStale:qa(n,e),refetch:this.refetch,promise:this.#o,isEnabled:Xe(e.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const _=v.data!==void 0,y=v.status==="error"&&!_,I=w=>{y?w.reject(v.error):_&&w.resolve(v.data)},E=()=>{const w=this.#o=v.promise=aa();I(w)},b=this.#o;switch(b.status){case"pending":n.queryHash===t.queryHash&&I(b);break;case"fulfilled":(y||v.data!==b.value)&&E();break;case"rejected":(!y||v.error!==b.reason)&&E();break}}return v}updateResult(){const n=this.#s,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#a=this.options,this.#r.data!==void 0&&(this.#f=this.#t),sa(e,n))return;this.#s=e;const t=()=>{if(!n)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#p.size)return!0;const i=new Set(s??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#s).some(a=>{const c=a;return this.#s[c]!==n[c]&&i.has(c)})};this.#T({listeners:t()})}#I(){const n=this.#e.getQueryCache().build(this.#e,this.options);if(n===this.#t)return;const e=this.#t;this.#t=n,this.#n=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#w()}#T(n){Se.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function hy(n,e){return Xe(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function ru(n,e){return hy(n,e)||n.state.data!==void 0&&la(n,e,e.refetchOnMount)}function la(n,e,t){if(Xe(e.enabled,n)!==!1&&Gt(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&qa(n,e)}return!1}function su(n,e,t,r){return(n!==e||Xe(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&qa(n,t)}function qa(n,e){return Xe(e.enabled,n)!==!1&&n.isStaleByTime(Gt(e.staleTime,n))}function dy(n,e){return!sa(n.getCurrentResult(),e)}function iu(n){return{onFetch:(e,t)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},l=0;const h=async()=>{let f=!1;const m=S=>{ry(S,()=>e.signal,()=>f=!0)},g=bd(e.options,e.fetchOptions),T=async(S,C,P)=>{if(f)return Promise.reject();if(C==null&&S.pages.length)return Promise.resolve(S);const V=(()=>{const Q={client:e.client,queryKey:e.queryKey,pageParam:C,direction:P?"backward":"forward",meta:e.options.meta};return m(Q),Q})(),L=await g(V),{maxPages:q}=e.options,W=P?ny:ty;return{pages:W(S.pages,L,q),pageParams:W(S.pageParams,C,q)}};if(s&&i.length){const S=s==="backward",C=S?fy:ou,P={pages:i,pageParams:a},O=C(r,P);c=await T(P,O,S)}else{const S=n??i.length;do{const C=l===0?a[0]??r.initialPageParam:ou(r,c);if(l>0&&C==null)break;c=await T(c,C),l++}while(l<S)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=h}}}function ou(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function fy(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var py=class extends Sd{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||my(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Rd({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(a,c)=>{this.#r({type:"failed",failureCount:a,error:c})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const s=this.state.status==="pending",i=!this.#s.canStart();try{if(s)t();else{this.#r({type:"pending",variables:e,isPaused:i}),this.#n.config.onMutate&&await this.#n.config.onMutate(e,this,r);const c=await this.options.onMutate?.(e,r);c!==this.state.context&&this.#r({type:"pending",context:c,variables:e,isPaused:i})}const a=await this.#s.start();return await this.#n.config.onSuccess?.(a,e,this.state.context,this,r),await this.options.onSuccess?.(a,e,this.state.context,r),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(a,null,e,this.state.context,r),this.#r({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,e,this.state.context,this,r)}catch(c){Promise.reject(c)}try{await this.options.onError?.(a,e,this.state.context,r)}catch(c){Promise.reject(c)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,r)}catch(c){Promise.reject(c)}try{await this.options.onSettled?.(void 0,a,e,this.state.context,r)}catch(c){Promise.reject(c)}throw this.#r({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#r(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Se.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function my(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var gy=class extends ys{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(n,e,t){const r=new py({client:n,mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(r),r}add(n){this.#e.add(n);const e=Qs(n);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(n):this.#t.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=Qs(n);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const r=t.indexOf(n);r!==-1&&t.splice(r,1)}else t[0]===n&&this.#t.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=Qs(n);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===n}else return!0}runNext(n){const e=Qs(n);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==n&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Se.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>Xl(e,t))}findAll(n={}){return this.getAll().filter(e=>Xl(n,e))}notify(n){Se.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return Se.batch(()=>Promise.all(n.map(e=>e.continue().catch(Je))))}};function Qs(n){return n.options.scope?.id}var _y=class extends ys{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const r=e.queryKey,s=e.queryHash??Ua(r,e);let i=this.get(s);return i||(i=new ly({client:n,queryKey:r,queryHash:s,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(r)}),this.add(i)),i}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){Se.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>Jl(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>Jl(n,t)):e}notify(n){Se.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){Se.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Se.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},yy=class{#e;#t;#n;#s;#r;#a;#o;#i;constructor(n={}){this.#e=n.queryCache||new _y,this.#t=n.mutationCache||new gy,this.#n=n.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=ja.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=wi.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Gt(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=this.#e.get(r.queryHash)?.state.data,a=X_(e,i);if(a!==void 0)return this.#e.build(this,r).setData(a,{...t,manual:!0})}setQueriesData(n,e,t){return Se.batch(()=>this.#e.findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;Se.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e;return Se.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Se.batch(()=>this.#e.findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Je).catch(Je)}invalidateQueries(n,e={}){return Se.batch(()=>(this.#e.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Se.batch(()=>this.#e.findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(Je)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Je)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(Gt(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Je).catch(Je)}fetchInfiniteQuery(n){return n.behavior=iu(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Je).catch(Je)}ensureInfiniteQueryData(n){return n.behavior=iu(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return wi.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#s.set(rs(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#s.values()],t={};return e.forEach(r=>{ss(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){this.#r.set(rs(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(r=>{ss(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Ua(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ba&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}};const Pd=qe(new yy),wy=(n,e,t)=>n?.suspense&&vy(e),vy=(n,e)=>n.isPending&&!0,Ey=({result:n,throwOnError:e,query:t})=>n.isError&&!n.isFetching&&Iy(e,[n.error,t]);function Iy(n,e){return typeof n=="function"?n(...e):!!n}const Ty=n=>n.suspense&&typeof n.staleTime!="number"?{...n,staleTime:1e3}:n;function by(n,e,t=r=>r(Pd)){const r=qe(0),s=qe(t),i=qe(()=>new WeakMap),a=qe(h=>{const f=h(s),m=n(h),g=f.defaultQueryOptions(m),S=h(i).get(f);return g._optimisticResults="optimistic",S&&S.setOptions(g),Ty(g)}),c=qe(h=>{const f=h(s),m=h(a),g=h(i),T=g.get(f);if(T)return T;const S=new e(f,m);return g.set(f,S),S}),l=qe(h=>{const f=h(c),m=h(a),g=f.getOptimisticResult(m),T=qe(g);return T.onMount=S=>{const C=f.subscribe(Se.batchCalls(S));return()=>{f.getCurrentResult().isError&&f.getCurrentQuery().reset(),C()}},T});return qe(h=>{h(r);const f=h(c),m=h(a),g=h(h(l));if(wy(m,g))return f.fetchOptimistic(m);if(Ey({result:g,query:f.getCurrentQuery(),throwOnError:m.throwOnError}))throw g.error;return g},(h,f)=>{f(r,m=>m+1)})}function Ay(n,e=t=>t(Pd)){return by(n,uy,e)}const Ry=()=>{};var au={};const kd=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Sy=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],a=n[t++],c=n[t++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],a=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Dd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],a=s+1<n.length,c=a?n[s+1]:0,l=s+2<n.length,h=l?n[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|h>>6,T=h&63;l||(T=64,a||(g=64)),r.push(t[f],t[m],t[g],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kd(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Sy(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const h=s<n.length?t[n.charAt(s)]:64;++s;const m=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||c==null||h==null||m==null)throw new Cy;const g=i<<2|c>>4;if(r.push(g),h!==64){const T=c<<4&240|h>>2;if(r.push(T),m!==64){const S=h<<6&192|m;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Cy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Py=function(n){const e=kd(n);return Dd.encodeByteArray(e,!0)},vi=function(n){return Py(n).replace(/\./g,"")},Od=function(n){try{return Dd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ky(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Dy=()=>ky().__FIREBASE_DEFAULTS__,Oy=()=>{if(typeof process>"u"||typeof au>"u")return;const n=au.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ny=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Od(n[1]);return e&&JSON.parse(e)},Bi=()=>{try{return Ry()||Dy()||Oy()||Ny()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Nd=n=>Bi()?.emulatorHosts?.[n],Vd=n=>{const e=Nd(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},xd=()=>Bi()?.config,Md=n=>Bi()?.[`_${n}`];class Vy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function rn(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $a(n){return(await fetch(n,{credentials:"include"})).ok}function Ld(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[vi(JSON.stringify(t)),vi(JSON.stringify(a)),""].join(".")}const Yr={};function xy(){const n={prod:[],emulator:[]};for(const e of Object.keys(Yr))Yr[e]?n.emulator.push(e):n.prod.push(e);return n}function My(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let cu=!1;function za(n,e){if(typeof window>"u"||typeof document>"u"||!rn(window.location.host)||Yr[n]===e||Yr[n]||cu)return;Yr[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=xy().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,T){g.setAttribute("width","24"),g.setAttribute("id",T),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{cu=!0,a()},g}function f(g,T){g.setAttribute("id",T),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=My(r),T=t("text"),S=document.getElementById(T)||document.createElement("span"),C=t("learnmore"),P=document.getElementById(C)||document.createElement("a"),O=t("preprendIcon"),V=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const L=g.element;c(L),f(P,C);const q=h();l(V,O),L.append(V,S,P,q),document.body.appendChild(L)}i?(S.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ly(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function Fy(){const n=Bi()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Uy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Fd(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function By(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jy(){const n=xe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qy(){return!Fy()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ud(){try{return typeof indexedDB=="object"}catch{return!1}}function Bd(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}function $y(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const zy="FirebaseError";class nt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=zy,Object.setPrototypeOf(this,nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vn.prototype.create)}}class Vn{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Gy(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new nt(s,c,r)}}function Gy(n,e){return n.replace(Hy,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Hy=/\{\$([^}]+)}/g;function Wy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yt(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],a=e[s];if(lu(i)&&lu(a)){if(!Yt(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function lu(n){return n!==null&&typeof n=="object"}function ws(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zr(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Gr(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Ky(n,e){const t=new Qy(n,e);return t.subscribe.bind(t)}class Qy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Yy(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Mo),s.error===void 0&&(s.error=Mo),s.complete===void 0&&(s.complete=Mo);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yy(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Mo(){}const Jy=1e3,Xy=2,Zy=14400*1e3,ew=.5;function uu(n,e=Jy,t=Xy){const r=e*Math.pow(t,n),s=Math.round(ew*r*(Math.random()-.5)*2);return Math.min(Zy,r+s)}function ne(n){return n&&n._delegate?n._delegate:n}class et{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vn="[DEFAULT]";class tw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Vy;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rw(e))try{this.getOrInitializeService({instanceIdentifier:vn})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=vn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vn){return this.instances.has(e)}getOptions(e=vn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nw(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vn){return this.component?this.component.multipleInstances?e:vn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nw(n){return n===vn?void 0:n}function rw(n){return n.instantiationMode==="EAGER"}class sw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var J;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(J||(J={}));const iw={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ow=J.INFO,aw={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},cw=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=aw[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ji{constructor(e){this.name=e,this._logLevel=ow,this._logHandler=cw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}}const lw=(n,e)=>e.some(t=>n instanceof t);let hu,du;function uw(){return hu||(hu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hw(){return du||(du=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jd=new WeakMap,ua=new WeakMap,qd=new WeakMap,Lo=new WeakMap,Ga=new WeakMap;function dw(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",a)},i=()=>{t(Ht(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&jd.set(t,n)}).catch(()=>{}),Ga.set(e,n),e}function fw(n){if(ua.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",a),n.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",a),n.addEventListener("abort",a)});ua.set(n,e)}let ha={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ua.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qd.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ht(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pw(n){ha=n(ha)}function mw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Fo(this),e,...t);return qd.set(r,e.sort?e.sort():[e]),Ht(r)}:hw().includes(n)?function(...e){return n.apply(Fo(this),e),Ht(jd.get(this))}:function(...e){return Ht(n.apply(Fo(this),e))}}function gw(n){return typeof n=="function"?mw(n):(n instanceof IDBTransaction&&fw(n),lw(n,uw())?new Proxy(n,ha):n)}function Ht(n){if(n instanceof IDBRequest)return dw(n);if(Lo.has(n))return Lo.get(n);const e=gw(n);return e!==n&&(Lo.set(n,e),Ga.set(e,n)),e}const Fo=n=>Ga.get(n);function $d(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(n,e),c=Ht(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Ht(a.result),l.oldVersion,l.newVersion,Ht(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const _w=["get","getKey","getAll","getAllKeys","count"],yw=["put","add","delete","clear"],Uo=new Map;function fu(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Uo.get(e))return Uo.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=yw.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||_w.includes(t)))return;const i=async function(a,...c){const l=this.transaction(a,s?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),s&&l.done]))[0]};return Uo.set(e,i),i}pw(n=>({...n,get:(e,t,r)=>fu(e,t)||n.get(e,t,r),has:(e,t)=>!!fu(e,t)||n.has(e,t)}));class ww{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vw(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function vw(n){return n.getComponent()?.type==="VERSION"}const da="@firebase/app",pu="0.14.8";const Rt=new ji("@firebase/app"),Ew="@firebase/app-compat",Iw="@firebase/analytics-compat",Tw="@firebase/analytics",bw="@firebase/app-check-compat",Aw="@firebase/app-check",Rw="@firebase/auth",Sw="@firebase/auth-compat",Cw="@firebase/database",Pw="@firebase/data-connect",kw="@firebase/database-compat",Dw="@firebase/functions",Ow="@firebase/functions-compat",Nw="@firebase/installations",Vw="@firebase/installations-compat",xw="@firebase/messaging",Mw="@firebase/messaging-compat",Lw="@firebase/performance",Fw="@firebase/performance-compat",Uw="@firebase/remote-config",Bw="@firebase/remote-config-compat",jw="@firebase/storage",qw="@firebase/storage-compat",$w="@firebase/firestore",zw="@firebase/ai",Gw="@firebase/firestore-compat",Hw="firebase",Ww="12.9.0";const fa="[DEFAULT]",Kw={[da]:"fire-core",[Ew]:"fire-core-compat",[Tw]:"fire-analytics",[Iw]:"fire-analytics-compat",[Aw]:"fire-app-check",[bw]:"fire-app-check-compat",[Rw]:"fire-auth",[Sw]:"fire-auth-compat",[Cw]:"fire-rtdb",[Pw]:"fire-data-connect",[kw]:"fire-rtdb-compat",[Dw]:"fire-fn",[Ow]:"fire-fn-compat",[Nw]:"fire-iid",[Vw]:"fire-iid-compat",[xw]:"fire-fcm",[Mw]:"fire-fcm-compat",[Lw]:"fire-perf",[Fw]:"fire-perf-compat",[Uw]:"fire-rc",[Bw]:"fire-rc-compat",[jw]:"fire-gcs",[qw]:"fire-gcs-compat",[$w]:"fire-fst",[Gw]:"fire-fst-compat",[zw]:"fire-vertex","fire-js":"fire-js",[Hw]:"fire-js-all"};const is=new Map,Qw=new Map,pa=new Map;function mu(n,e){try{n.container.addComponent(e)}catch(t){Rt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ot(n){const e=n.name;if(pa.has(e))return Rt.debug(`There were multiple attempts to register component ${e}.`),!1;pa.set(e,n);for(const t of is.values())mu(t,n);for(const t of Qw.values())mu(t,n);return!0}function sn(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function We(n){return n==null?!1:n.settings!==void 0}const Yw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wt=new Vn("app","Firebase",Yw);class Jw{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wt.create("app-deleted",{appName:this._name})}}const xn=Ww;function zd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:fa,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Wt.create("bad-app-name",{appName:String(s)});if(t||(t=xd()),!t)throw Wt.create("no-options");const i=is.get(s);if(i){if(Yt(t,i.options)&&Yt(r,i.config))return i;throw Wt.create("duplicate-app",{appName:s})}const a=new sw(s);for(const l of pa.values())a.addComponent(l);const c=new Jw(t,r,a);return is.set(s,c),c}function vs(n=fa){const e=is.get(n);if(!e&&n===fa&&xd())return zd();if(!e)throw Wt.create("no-app",{appName:n});return e}function Xw(){return Array.from(is.values())}function Ge(n,e,t){let r=Kw[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rt.warn(a.join(" "));return}ot(new et(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Zw="firebase-heartbeat-database",ev=1,os="firebase-heartbeat-store";let Bo=null;function Gd(){return Bo||(Bo=$d(Zw,ev,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(os)}catch(t){console.warn(t)}}}}).catch(n=>{throw Wt.create("idb-open",{originalErrorMessage:n.message})})),Bo}async function tv(n){try{const t=(await Gd()).transaction(os),r=await t.objectStore(os).get(Hd(n));return await t.done,r}catch(e){if(e instanceof nt)Rt.warn(e.message);else{const t=Wt.create("idb-get",{originalErrorMessage:e?.message});Rt.warn(t.message)}}}async function gu(n,e){try{const r=(await Gd()).transaction(os,"readwrite");await r.objectStore(os).put(e,Hd(n)),await r.done}catch(t){if(t instanceof nt)Rt.warn(t.message);else{const r=Wt.create("idb-set",{originalErrorMessage:t?.message});Rt.warn(r.message)}}}function Hd(n){return`${n.name}!${n.options.appId}`}const nv=1024,rv=30;class sv{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ov(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_u();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>rv){const s=av(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Rt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_u(),{heartbeatsToSend:t,unsentEntries:r}=iv(this._heartbeatsCache.heartbeats),s=vi(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Rt.warn(e),""}}}function _u(){return new Date().toISOString().substring(0,10)}function iv(n,e=nv){const t=[];let r=n.slice();for(const s of n){const i=t.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),yu(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),yu(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ov{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ud()?Bd().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tv(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yu(n){return vi(JSON.stringify({version:2,heartbeats:n})).length}function av(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function cv(n){ot(new et("platform-logger",e=>new ww(e),"PRIVATE")),ot(new et("heartbeat",e=>new sv(e),"PRIVATE")),Ge(da,pu,n),Ge(da,pu,"esm2020"),Ge("fire-js","")}cv("");var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Kt,Wd;(function(){var n;function e(v,_){function y(){}y.prototype=_.prototype,v.F=_.prototype,v.prototype=new y,v.prototype.constructor=v,v.D=function(I,E,b){for(var w=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)w[ve-2]=arguments[ve];return _.prototype[E].apply(I,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,_,y){y||(y=0);const I=Array(16);if(typeof _=="string")for(var E=0;E<16;++E)I[E]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(E=0;E<16;++E)I[E]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=v.g[0],y=v.g[1],E=v.g[2];let b=v.g[3],w;w=_+(b^y&(E^b))+I[0]+3614090360&4294967295,_=y+(w<<7&4294967295|w>>>25),w=b+(E^_&(y^E))+I[1]+3905402710&4294967295,b=_+(w<<12&4294967295|w>>>20),w=E+(y^b&(_^y))+I[2]+606105819&4294967295,E=b+(w<<17&4294967295|w>>>15),w=y+(_^E&(b^_))+I[3]+3250441966&4294967295,y=E+(w<<22&4294967295|w>>>10),w=_+(b^y&(E^b))+I[4]+4118548399&4294967295,_=y+(w<<7&4294967295|w>>>25),w=b+(E^_&(y^E))+I[5]+1200080426&4294967295,b=_+(w<<12&4294967295|w>>>20),w=E+(y^b&(_^y))+I[6]+2821735955&4294967295,E=b+(w<<17&4294967295|w>>>15),w=y+(_^E&(b^_))+I[7]+4249261313&4294967295,y=E+(w<<22&4294967295|w>>>10),w=_+(b^y&(E^b))+I[8]+1770035416&4294967295,_=y+(w<<7&4294967295|w>>>25),w=b+(E^_&(y^E))+I[9]+2336552879&4294967295,b=_+(w<<12&4294967295|w>>>20),w=E+(y^b&(_^y))+I[10]+4294925233&4294967295,E=b+(w<<17&4294967295|w>>>15),w=y+(_^E&(b^_))+I[11]+2304563134&4294967295,y=E+(w<<22&4294967295|w>>>10),w=_+(b^y&(E^b))+I[12]+1804603682&4294967295,_=y+(w<<7&4294967295|w>>>25),w=b+(E^_&(y^E))+I[13]+4254626195&4294967295,b=_+(w<<12&4294967295|w>>>20),w=E+(y^b&(_^y))+I[14]+2792965006&4294967295,E=b+(w<<17&4294967295|w>>>15),w=y+(_^E&(b^_))+I[15]+1236535329&4294967295,y=E+(w<<22&4294967295|w>>>10),w=_+(E^b&(y^E))+I[1]+4129170786&4294967295,_=y+(w<<5&4294967295|w>>>27),w=b+(y^E&(_^y))+I[6]+3225465664&4294967295,b=_+(w<<9&4294967295|w>>>23),w=E+(_^y&(b^_))+I[11]+643717713&4294967295,E=b+(w<<14&4294967295|w>>>18),w=y+(b^_&(E^b))+I[0]+3921069994&4294967295,y=E+(w<<20&4294967295|w>>>12),w=_+(E^b&(y^E))+I[5]+3593408605&4294967295,_=y+(w<<5&4294967295|w>>>27),w=b+(y^E&(_^y))+I[10]+38016083&4294967295,b=_+(w<<9&4294967295|w>>>23),w=E+(_^y&(b^_))+I[15]+3634488961&4294967295,E=b+(w<<14&4294967295|w>>>18),w=y+(b^_&(E^b))+I[4]+3889429448&4294967295,y=E+(w<<20&4294967295|w>>>12),w=_+(E^b&(y^E))+I[9]+568446438&4294967295,_=y+(w<<5&4294967295|w>>>27),w=b+(y^E&(_^y))+I[14]+3275163606&4294967295,b=_+(w<<9&4294967295|w>>>23),w=E+(_^y&(b^_))+I[3]+4107603335&4294967295,E=b+(w<<14&4294967295|w>>>18),w=y+(b^_&(E^b))+I[8]+1163531501&4294967295,y=E+(w<<20&4294967295|w>>>12),w=_+(E^b&(y^E))+I[13]+2850285829&4294967295,_=y+(w<<5&4294967295|w>>>27),w=b+(y^E&(_^y))+I[2]+4243563512&4294967295,b=_+(w<<9&4294967295|w>>>23),w=E+(_^y&(b^_))+I[7]+1735328473&4294967295,E=b+(w<<14&4294967295|w>>>18),w=y+(b^_&(E^b))+I[12]+2368359562&4294967295,y=E+(w<<20&4294967295|w>>>12),w=_+(y^E^b)+I[5]+4294588738&4294967295,_=y+(w<<4&4294967295|w>>>28),w=b+(_^y^E)+I[8]+2272392833&4294967295,b=_+(w<<11&4294967295|w>>>21),w=E+(b^_^y)+I[11]+1839030562&4294967295,E=b+(w<<16&4294967295|w>>>16),w=y+(E^b^_)+I[14]+4259657740&4294967295,y=E+(w<<23&4294967295|w>>>9),w=_+(y^E^b)+I[1]+2763975236&4294967295,_=y+(w<<4&4294967295|w>>>28),w=b+(_^y^E)+I[4]+1272893353&4294967295,b=_+(w<<11&4294967295|w>>>21),w=E+(b^_^y)+I[7]+4139469664&4294967295,E=b+(w<<16&4294967295|w>>>16),w=y+(E^b^_)+I[10]+3200236656&4294967295,y=E+(w<<23&4294967295|w>>>9),w=_+(y^E^b)+I[13]+681279174&4294967295,_=y+(w<<4&4294967295|w>>>28),w=b+(_^y^E)+I[0]+3936430074&4294967295,b=_+(w<<11&4294967295|w>>>21),w=E+(b^_^y)+I[3]+3572445317&4294967295,E=b+(w<<16&4294967295|w>>>16),w=y+(E^b^_)+I[6]+76029189&4294967295,y=E+(w<<23&4294967295|w>>>9),w=_+(y^E^b)+I[9]+3654602809&4294967295,_=y+(w<<4&4294967295|w>>>28),w=b+(_^y^E)+I[12]+3873151461&4294967295,b=_+(w<<11&4294967295|w>>>21),w=E+(b^_^y)+I[15]+530742520&4294967295,E=b+(w<<16&4294967295|w>>>16),w=y+(E^b^_)+I[2]+3299628645&4294967295,y=E+(w<<23&4294967295|w>>>9),w=_+(E^(y|~b))+I[0]+4096336452&4294967295,_=y+(w<<6&4294967295|w>>>26),w=b+(y^(_|~E))+I[7]+1126891415&4294967295,b=_+(w<<10&4294967295|w>>>22),w=E+(_^(b|~y))+I[14]+2878612391&4294967295,E=b+(w<<15&4294967295|w>>>17),w=y+(b^(E|~_))+I[5]+4237533241&4294967295,y=E+(w<<21&4294967295|w>>>11),w=_+(E^(y|~b))+I[12]+1700485571&4294967295,_=y+(w<<6&4294967295|w>>>26),w=b+(y^(_|~E))+I[3]+2399980690&4294967295,b=_+(w<<10&4294967295|w>>>22),w=E+(_^(b|~y))+I[10]+4293915773&4294967295,E=b+(w<<15&4294967295|w>>>17),w=y+(b^(E|~_))+I[1]+2240044497&4294967295,y=E+(w<<21&4294967295|w>>>11),w=_+(E^(y|~b))+I[8]+1873313359&4294967295,_=y+(w<<6&4294967295|w>>>26),w=b+(y^(_|~E))+I[15]+4264355552&4294967295,b=_+(w<<10&4294967295|w>>>22),w=E+(_^(b|~y))+I[6]+2734768916&4294967295,E=b+(w<<15&4294967295|w>>>17),w=y+(b^(E|~_))+I[13]+1309151649&4294967295,y=E+(w<<21&4294967295|w>>>11),w=_+(E^(y|~b))+I[4]+4149444226&4294967295,_=y+(w<<6&4294967295|w>>>26),w=b+(y^(_|~E))+I[11]+3174756917&4294967295,b=_+(w<<10&4294967295|w>>>22),w=E+(_^(b|~y))+I[2]+718787259&4294967295,E=b+(w<<15&4294967295|w>>>17),w=y+(b^(E|~_))+I[9]+3951481745&4294967295,v.g[0]=v.g[0]+_&4294967295,v.g[1]=v.g[1]+(E+(w<<21&4294967295|w>>>11))&4294967295,v.g[2]=v.g[2]+E&4294967295,v.g[3]=v.g[3]+b&4294967295}r.prototype.v=function(v,_){_===void 0&&(_=v.length);const y=_-this.blockSize,I=this.C;let E=this.h,b=0;for(;b<_;){if(E==0)for(;b<=y;)s(this,v,b),b+=this.blockSize;if(typeof v=="string"){for(;b<_;)if(I[E++]=v.charCodeAt(b++),E==this.blockSize){s(this,I),E=0;break}}else for(;b<_;)if(I[E++]=v[b++],E==this.blockSize){s(this,I),E=0;break}}this.h=E,this.o+=_},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var _=1;_<v.length-8;++_)v[_]=0;_=this.o*8;for(var y=v.length-8;y<v.length;++y)v[y]=_&255,_/=256;for(this.v(v),v=Array(16),_=0,y=0;y<4;++y)for(let I=0;I<32;I+=8)v[_++]=this.g[y]>>>I&255;return v};function i(v,_){var y=c;return Object.prototype.hasOwnProperty.call(y,v)?y[v]:y[v]=_(v)}function a(v,_){this.h=_;const y=[];let I=!0;for(let E=v.length-1;E>=0;E--){const b=v[E]|0;I&&b==_||(y[E]=b,I=!1)}this.g=y}var c={};function l(v){return-128<=v&&v<128?i(v,function(_){return new a([_|0],_<0?-1:0)}):new a([v|0],v<0?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return m;if(v<0)return P(h(-v));const _=[];let y=1;for(let I=0;v>=y;I++)_[I]=v/y|0,y*=4294967296;return new a(_,0)}function f(v,_){if(v.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(v.charAt(0)=="-")return P(f(v.substring(1),_));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=h(Math.pow(_,8));let I=m;for(let b=0;b<v.length;b+=8){var E=Math.min(8,v.length-b);const w=parseInt(v.substring(b,b+E),_);E<8?(E=h(Math.pow(_,E)),I=I.j(E).add(h(w))):(I=I.j(y),I=I.add(h(w)))}return I}var m=l(0),g=l(1),T=l(16777216);n=a.prototype,n.m=function(){if(C(this))return-P(this).m();let v=0,_=1;for(let y=0;y<this.g.length;y++){const I=this.i(y);v+=(I>=0?I:4294967296+I)*_,_*=4294967296}return v},n.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(S(this))return"0";if(C(this))return"-"+P(this).toString(v);const _=h(Math.pow(v,6));var y=this;let I="";for(;;){const E=q(y,_).g;y=O(y,E.j(_));let b=((y.g.length>0?y.g[0]:y.h)>>>0).toString(v);if(y=E,S(y))return b+I;for(;b.length<6;)b="0"+b;I=b+I}},n.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function S(v){if(v.h!=0)return!1;for(let _=0;_<v.g.length;_++)if(v.g[_]!=0)return!1;return!0}function C(v){return v.h==-1}n.l=function(v){return v=O(this,v),C(v)?-1:S(v)?0:1};function P(v){const _=v.g.length,y=[];for(let I=0;I<_;I++)y[I]=~v.g[I];return new a(y,~v.h).add(g)}n.abs=function(){return C(this)?P(this):this},n.add=function(v){const _=Math.max(this.g.length,v.g.length),y=[];let I=0;for(let E=0;E<=_;E++){let b=I+(this.i(E)&65535)+(v.i(E)&65535),w=(b>>>16)+(this.i(E)>>>16)+(v.i(E)>>>16);I=w>>>16,b&=65535,w&=65535,y[E]=w<<16|b}return new a(y,y[y.length-1]&-2147483648?-1:0)};function O(v,_){return v.add(P(_))}n.j=function(v){if(S(this)||S(v))return m;if(C(this))return C(v)?P(this).j(P(v)):P(P(this).j(v));if(C(v))return P(this.j(P(v)));if(this.l(T)<0&&v.l(T)<0)return h(this.m()*v.m());const _=this.g.length+v.g.length,y=[];for(var I=0;I<2*_;I++)y[I]=0;for(I=0;I<this.g.length;I++)for(let E=0;E<v.g.length;E++){const b=this.i(I)>>>16,w=this.i(I)&65535,ve=v.i(E)>>>16,je=v.i(E)&65535;y[2*I+2*E]+=w*je,V(y,2*I+2*E),y[2*I+2*E+1]+=b*je,V(y,2*I+2*E+1),y[2*I+2*E+1]+=w*ve,V(y,2*I+2*E+1),y[2*I+2*E+2]+=b*ve,V(y,2*I+2*E+2)}for(v=0;v<_;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=_;v<2*_;v++)y[v]=0;return new a(y,0)};function V(v,_){for(;(v[_]&65535)!=v[_];)v[_+1]+=v[_]>>>16,v[_]&=65535,_++}function L(v,_){this.g=v,this.h=_}function q(v,_){if(S(_))throw Error("division by zero");if(S(v))return new L(m,m);if(C(v))return _=q(P(v),_),new L(P(_.g),P(_.h));if(C(_))return _=q(v,P(_)),new L(P(_.g),_.h);if(v.g.length>30){if(C(v)||C(_))throw Error("slowDivide_ only works with positive integers.");for(var y=g,I=_;I.l(v)<=0;)y=W(y),I=W(I);var E=Q(y,1),b=Q(I,1);for(I=Q(I,2),y=Q(y,2);!S(I);){var w=b.add(I);w.l(v)<=0&&(E=E.add(y),b=w),I=Q(I,1),y=Q(y,1)}return _=O(v,E.j(_)),new L(E,_)}for(E=m;v.l(_)>=0;){for(y=Math.max(1,Math.floor(v.m()/_.m())),I=Math.ceil(Math.log(y)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),b=h(y),w=b.j(_);C(w)||w.l(v)>0;)y-=I,b=h(y),w=b.j(_);S(b)&&(b=g),E=E.add(b),v=O(v,w)}return new L(E,v)}n.B=function(v){return q(this,v).h},n.and=function(v){const _=Math.max(this.g.length,v.g.length),y=[];for(let I=0;I<_;I++)y[I]=this.i(I)&v.i(I);return new a(y,this.h&v.h)},n.or=function(v){const _=Math.max(this.g.length,v.g.length),y=[];for(let I=0;I<_;I++)y[I]=this.i(I)|v.i(I);return new a(y,this.h|v.h)},n.xor=function(v){const _=Math.max(this.g.length,v.g.length),y=[];for(let I=0;I<_;I++)y[I]=this.i(I)^v.i(I);return new a(y,this.h^v.h)};function W(v){const _=v.g.length+1,y=[];for(let I=0;I<_;I++)y[I]=v.i(I)<<1|v.i(I-1)>>>31;return new a(y,v.h)}function Q(v,_){const y=_>>5;_%=32;const I=v.g.length-y,E=[];for(let b=0;b<I;b++)E[b]=_>0?v.i(b+y)>>>_|v.i(b+y+1)<<32-_:v.i(b+y);return new a(E,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Wd=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,Kt=a}).apply(typeof wu<"u"?wu:typeof self<"u"?self:typeof window<"u"?window:{});var Ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Kd,Hr,Qd,si,ma,Yd,Jd,Xd;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ys=="object"&&Ys];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function s(o,u){if(u)e:{var d=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var A=o[p];if(!(A in d))break e;d=d[A]}o=o[o.length-1],p=d[o],u=u(p),u!=p&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(u){var d=[],p;for(p in u)Object.prototype.hasOwnProperty.call(u,p)&&d.push([p,u[p]]);return d}});var i=i||{},a=this||self;function c(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function l(o,u,d){return o.call.apply(o.bind,arguments)}function h(o,u,d){return h=l,h.apply(null,arguments)}function f(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function m(o,u){function d(){}d.prototype=u.prototype,o.Z=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Ob=function(p,A,R){for(var N=Array(arguments.length-2),K=2;K<arguments.length;K++)N[K-2]=arguments[K];return u.prototype[A].apply(p,N)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function T(o){const u=o.length;if(u>0){const d=Array(u);for(let p=0;p<u;p++)d[p]=o[p];return d}return[]}function S(o,u){for(let p=1;p<arguments.length;p++){const A=arguments[p];var d=typeof A;if(d=d!="object"?d:A?Array.isArray(A)?"array":d:"null",d=="array"||d=="object"&&typeof A.length=="number"){d=o.length||0;const R=A.length||0;o.length=d+R;for(let N=0;N<R;N++)o[d+N]=A[N]}else o.push(A)}}class C{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function P(o){a.setTimeout(()=>{throw o},0)}function O(){var o=v;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class V{constructor(){this.h=this.g=null}add(u,d){const p=L.get();p.set(u,d),this.h?this.h.next=p:this.g=p,this.h=p}}var L=new C(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let W,Q=!1,v=new V,_=()=>{const o=Promise.resolve(void 0);W=()=>{o.then(y)}};function y(){for(var o;o=O();){try{o.h.call(o.g)}catch(d){P(d)}var u=L;u.j(o),u.h<100&&(u.h++,o.next=u.g,u.g=o)}Q=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};a.addEventListener("test",d,u),a.removeEventListener("test",d,u)}catch{}return o})();function w(o){return/^[\s\xa0]*$/.test(o)}function ve(o,u){E.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,u)}m(ve,E),ve.prototype.init=function(o,u){const d=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget,u||(d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement)),this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),rt=0;function vt(o,u,d,p,A){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!p,this.ha=A,this.key=++rt,this.da=this.fa=!1}function j(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function hn(o,u,d){for(const p in o)u.call(d,o[p],p,o)}function Vs(o,u){for(const d in o)u.call(void 0,o[d],d,o)}function Ir(o){const u={};for(const d in o)u[d]=o[d];return u}const Bn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(o,u){let d,p;for(let A=1;A<arguments.length;A++){p=arguments[A];for(d in p)o[d]=p[d];for(let R=0;R<Bn.length;R++)d=Bn[R],Object.prototype.hasOwnProperty.call(p,d)&&(o[d]=p[d])}}function Ie(o){this.src=o,this.g={},this.h=0}Ie.prototype.add=function(o,u,d,p,A){const R=o.toString();o=this.g[R],o||(o=this.g[R]=[],this.h++);const N=jn(o,u,p,A);return N>-1?(u=o[N],d||(u.fa=!1)):(u=new vt(u,this.src,R,!!p,A),u.fa=d,o.push(u)),u};function kt(o,u){const d=u.type;if(d in o.g){var p=o.g[d],A=Array.prototype.indexOf.call(p,u,void 0),R;(R=A>=0)&&Array.prototype.splice.call(p,A,1),R&&(j(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function jn(o,u,d,p){for(let A=0;A<o.length;++A){const R=o[A];if(!R.da&&R.listener==u&&R.capture==!!d&&R.ha==p)return A}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),qn={};function dn(o,u,d,p,A){if(Array.isArray(u)){for(let R=0;R<u.length;R++)dn(o,u[R],d,p,A);return null}return d=Wc(d),o&&o[je]?o.J(u,d,c(p)?!!p.capture:!1,A):$n(o,u,d,!1,p,A)}function $n(o,u,d,p,A,R){if(!u)throw Error("Invalid event type");const N=c(A)?!!A.capture:!!A;let K=mo(o);if(K||(o[ce]=K=new Ie(o)),d=K.add(u,d,p,N,R),d.proxy)return d;if(p=Tr(),d.proxy=p,p.src=o,p.listener=d,o.addEventListener)b||(A=N),A===void 0&&(A=!1),o.addEventListener(u.toString(),p,A);else if(o.attachEvent)o.attachEvent(Hc(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Tr(){function o(d){return u.call(o.src,o.listener,d)}const u=Xm;return o}function fn(o,u,d,p,A){if(Array.isArray(u))for(var R=0;R<u.length;R++)fn(o,u[R],d,p,A);else p=c(p)?!!p.capture:!!p,d=Wc(d),o&&o[je]?(o=o.i,R=String(u).toString(),R in o.g&&(u=o.g[R],d=jn(u,d,p,A),d>-1&&(j(u[d]),Array.prototype.splice.call(u,d,1),u.length==0&&(delete o.g[R],o.h--)))):o&&(o=mo(o))&&(u=o.g[u.toString()],o=-1,u&&(o=jn(u,d,p,A)),(d=o>-1?u[o]:null)&&po(d))}function po(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[je])kt(u.i,o);else{var d=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(d,p,o.capture):u.detachEvent?u.detachEvent(Hc(d),p):u.addListener&&u.removeListener&&u.removeListener(p),(d=mo(u))?(kt(d,o),d.h==0&&(d.src=null,u[ce]=null)):j(o)}}}function Hc(o){return o in qn?qn[o]:qn[o]="on"+o}function Xm(o,u){if(o.da)o=!0;else{u=new ve(u,this);const d=o.listener,p=o.ha||o.src;o.fa&&po(o),o=d.call(p,u)}return o}function mo(o){return o=o[ce],o instanceof Ie?o:null}var go="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wc(o){return typeof o=="function"?o:(o[go]||(o[go]=function(u){return o.handleEvent(u)}),o[go])}function ke(){I.call(this),this.i=new Ie(this),this.M=this,this.G=null}m(ke,I),ke.prototype[je]=!0,ke.prototype.removeEventListener=function(o,u,d,p){fn(this,o,u,d,p)};function Me(o,u){var d,p=o.G;if(p)for(d=[];p;p=p.G)d.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new E(u,o);else if(u instanceof E)u.target=u.target||o;else{var A=u;u=new E(p,o),Ee(u,A)}A=!0;let R,N;if(d)for(N=d.length-1;N>=0;N--)R=u.g=d[N],A=xs(R,p,!0,u)&&A;if(R=u.g=o,A=xs(R,p,!0,u)&&A,A=xs(R,p,!1,u)&&A,d)for(N=0;N<d.length;N++)R=u.g=d[N],A=xs(R,p,!1,u)&&A}ke.prototype.N=function(){if(ke.Z.N.call(this),this.i){var o=this.i;for(const u in o.g){const d=o.g[u];for(let p=0;p<d.length;p++)j(d[p]);delete o.g[u],o.h--}}this.G=null},ke.prototype.J=function(o,u,d,p){return this.i.add(String(o),u,!1,d,p)},ke.prototype.K=function(o,u,d,p){return this.i.add(String(o),u,!0,d,p)};function xs(o,u,d,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();let A=!0;for(let R=0;R<u.length;++R){const N=u[R];if(N&&!N.da&&N.capture==d){const K=N.listener,_e=N.ha||N.src;N.fa&&kt(o.i,N),A=K.call(_e,p)!==!1&&A}}return A&&!p.defaultPrevented}function Zm(o,u){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:a.setTimeout(o,u||0)}function Kc(o){o.g=Zm(()=>{o.g=null,o.i&&(o.i=!1,Kc(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class eg extends I{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Kc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(o){I.call(this),this.h=o,this.g={}}m(br,I);var Qc=[];function Yc(o){hn(o.g,function(u,d){this.g.hasOwnProperty(d)&&po(u)},o),o.g={}}br.prototype.N=function(){br.Z.N.call(this),Yc(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _o=a.JSON.stringify,tg=a.JSON.parse,ng=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Jc(){}function Xc(){}var Ar={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yo(){E.call(this,"d")}m(yo,E);function wo(){E.call(this,"c")}m(wo,E);var pn={},Zc=null;function Ms(){return Zc=Zc||new ke}pn.Ia="serverreachability";function el(o){E.call(this,pn.Ia,o)}m(el,E);function Rr(o){const u=Ms();Me(u,new el(u))}pn.STAT_EVENT="statevent";function tl(o,u){E.call(this,pn.STAT_EVENT,o),this.stat=u}m(tl,E);function Le(o){const u=Ms();Me(u,new tl(u,o))}pn.Ja="timingevent";function nl(o,u){E.call(this,pn.Ja,o),this.size=u}m(nl,E);function Sr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},u)}function Cr(){this.g=!0}Cr.prototype.ua=function(){this.g=!1};function rg(o,u,d,p,A,R){o.info(function(){if(o.g)if(R){var N="",K=R.split("&");for(let re=0;re<K.length;re++){var _e=K[re].split("=");if(_e.length>1){const Te=_e[0];_e=_e[1];const ut=Te.split("_");N=ut.length>=2&&ut[1]=="type"?N+(Te+"="+_e+"&"):N+(Te+"=redacted&")}}}else N=null;else N=R;return"XMLHTTP REQ ("+p+") [attempt "+A+"]: "+u+`
`+d+`
`+N})}function sg(o,u,d,p,A,R,N){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+A+"]: "+u+`
`+d+`
`+R+" "+N})}function zn(o,u,d,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+og(o,d)+(p?" "+p:"")})}function ig(o,u){o.info(function(){return"TIMEOUT: "+u})}Cr.prototype.info=function(){};function og(o,u){if(!o.g)return u;if(!u)return null;try{const R=JSON.parse(u);if(R){for(o=0;o<R.length;o++)if(Array.isArray(R[o])){var d=R[o];if(!(d.length<2)){var p=d[1];if(Array.isArray(p)&&!(p.length<1)){var A=p[0];if(A!="noop"&&A!="stop"&&A!="close")for(let N=1;N<p.length;N++)p[N]=""}}}}return _o(R)}catch{return u}}var Ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},rl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},sl;function vo(){}m(vo,Jc),vo.prototype.g=function(){return new XMLHttpRequest},sl=new vo;function Pr(o){return encodeURIComponent(String(o))}function ag(o){var u=1;o=o.split(":");const d=[];for(;u>0&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function Dt(o,u,d,p){this.j=o,this.i=u,this.l=d,this.S=p||1,this.V=new br(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new il}function il(){this.i=null,this.g="",this.h=!1}var ol={},Eo={};function Io(o,u,d){o.M=1,o.A=Us(lt(u)),o.u=d,o.R=!0,al(o,null)}function al(o,u){o.F=Date.now(),Fs(o),o.B=lt(o.A);var d=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),vl(d.i,"t",p),o.C=0,d=o.j.L,o.h=new il,o.g=Fl(o.j,d?u:null,!o.u),o.P>0&&(o.O=new eg(h(o.Y,o,o.g),o.P)),u=o.V,d=o.g,p=o.ba;var A="readystatechange";Array.isArray(A)||(A&&(Qc[0]=A.toString()),A=Qc);for(let R=0;R<A.length;R++){const N=dn(d,A[R],p||u.handleEvent,!1,u.h||u);if(!N)break;u.g[N.key]=N}u=o.J?Ir(o.J):{},o.u?(o.v||(o.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,u)):(o.v="GET",o.g.ea(o.B,o.v,null,u)),Rr(),rg(o.i,o.v,o.B,o.l,o.S,o.u)}Dt.prototype.ba=function(o){o=o.target;const u=this.O;u&&Vt(o)==3?u.j():this.Y(o)},Dt.prototype.Y=function(o){try{if(o==this.g)e:{const K=Vt(this.g),_e=this.g.ya(),re=this.g.ca();if(!(K<3)&&(K!=3||this.g&&(this.h.h||this.g.la()||Sl(this.g)))){this.K||K!=4||_e==7||(_e==8||re<=0?Rr(3):Rr(2)),To(this);var u=this.g.ca();this.X=u;var d=cg(this);if(this.o=u==200,sg(this.i,this.v,this.B,this.l,this.S,K,u),this.o){if(this.U&&!this.L){t:{if(this.g){var p,A=this.g;if((p=A.g?A.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(p)){var R=p;break t}}R=null}if(o=R)zn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bo(this,o);else{this.o=!1,this.m=3,Le(12),mn(this),kr(this);break e}}if(this.R){o=!0;let Te;for(;!this.K&&this.C<d.length;)if(Te=lg(this,d),Te==Eo){K==4&&(this.m=4,Le(14),o=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(Te==ol){this.m=4,Le(15),zn(this.i,this.l,d,"[Invalid Chunk]"),o=!1;break}else zn(this.i,this.l,Te,null),bo(this,Te);if(cl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),K!=4||d.length!=0||this.h.h||(this.m=1,Le(16),o=!1),this.o=this.o&&o,!o)zn(this.i,this.l,d,"[Invalid Chunked Response]"),mn(this),kr(this);else if(d.length>0&&!this.W){this.W=!0;var N=this.j;N.g==this&&N.aa&&!N.P&&(N.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Oo(N),N.P=!0,Le(11))}}else zn(this.i,this.l,d,null),bo(this,d);K==4&&mn(this),this.o&&!this.K&&(K==4?Vl(this.j,this):(this.o=!1,Fs(this)))}else Tg(this.g),u==400&&d.indexOf("Unknown SID")>0?(this.m=3,Le(12)):(this.m=0,Le(13)),mn(this),kr(this)}}}catch{}};function cg(o){if(!cl(o))return o.g.la();const u=Sl(o.g);if(u==="")return"";let d="";const p=u.length,A=Vt(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return mn(o),kr(o),"";o.h.i=new a.TextDecoder}for(let R=0;R<p;R++)o.h.h=!0,d+=o.h.i.decode(u[R],{stream:!(A&&R==p-1)});return u.length=0,o.h.g+=d,o.C=0,o.h.g}function cl(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function lg(o,u){var d=o.C,p=u.indexOf(`
`,d);return p==-1?Eo:(d=Number(u.substring(d,p)),isNaN(d)?ol:(p+=1,p+d>u.length?Eo:(u=u.slice(p,p+d),o.C=p+d,u)))}Dt.prototype.cancel=function(){this.K=!0,mn(this)};function Fs(o){o.T=Date.now()+o.H,ll(o,o.H)}function ll(o,u){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Sr(h(o.aa,o),u)}function To(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Dt.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(ig(this.i,this.B),this.M!=2&&(Rr(),Le(17)),mn(this),this.m=2,kr(this)):ll(this,this.T-o)};function kr(o){o.j.I==0||o.K||Vl(o.j,o)}function mn(o){To(o);var u=o.O;u&&typeof u.dispose=="function"&&u.dispose(),o.O=null,Yc(o.V),o.g&&(u=o.g,o.g=null,u.abort(),u.dispose())}function bo(o,u){try{var d=o.j;if(d.I!=0&&(d.g==o||Ao(d.h,o))){if(!o.L&&Ao(d.h,o)&&d.I==3){try{var p=d.Ba.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var A=p;if(A[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<o.F)zs(d),qs(d);else break e;Do(d),Le(18)}}else d.xa=A[1],0<d.xa-d.K&&A[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Sr(h(d.Va,d),6e3));dl(d.h)<=1&&d.ta&&(d.ta=void 0)}else _n(d,11)}else if((o.L||d.g==o)&&zs(d),!w(u))for(A=d.Ba.g.parse(u),u=0;u<A.length;u++){let re=A[u];const Te=re[0];if(!(Te<=d.K))if(d.K=Te,re=re[1],d.I==2)if(re[0]=="c"){d.M=re[1],d.ba=re[2];const ut=re[3];ut!=null&&(d.ka=ut,d.j.info("VER="+d.ka));const yn=re[4];yn!=null&&(d.za=yn,d.j.info("SVER="+d.za));const xt=re[5];xt!=null&&typeof xt=="number"&&xt>0&&(p=1.5*xt,d.O=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;const Mt=o.g;if(Mt){const Hs=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hs){var R=p.h;R.g||Hs.indexOf("spdy")==-1&&Hs.indexOf("quic")==-1&&Hs.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Ro(R,R.h),R.h=null))}if(p.G){const No=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;No&&(p.wa=No,oe(p.J,p.G,No))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-o.F,d.j.info("Handshake RTT: "+d.T+"ms")),p=d;var N=o;if(p.na=Ll(p,p.L?p.ba:null,p.W),N.L){fl(p.h,N);var K=N,_e=p.O;_e&&(K.H=_e),K.D&&(To(K),Fs(K)),p.g=N}else Ol(p);d.i.length>0&&$s(d)}else re[0]!="stop"&&re[0]!="close"||_n(d,7);else d.I==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?_n(d,7):ko(d):re[0]!="noop"&&d.l&&d.l.qa(re),d.A=0)}}Rr(4)}catch{}}var ug=class{constructor(o,u){this.g=o,this.map=u}};function ul(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function hl(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function dl(o){return o.h?1:o.g?o.g.size:0}function Ao(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Ro(o,u){o.g?o.g.add(u):o.h=u}function fl(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}ul.prototype.cancel=function(){if(this.i=pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function pl(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const d of o.g.values())u=u.concat(d.G);return u}return T(o.i)}var ml=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hg(o,u){if(o){o=o.split("&");for(let d=0;d<o.length;d++){const p=o[d].indexOf("=");let A,R=null;p>=0?(A=o[d].substring(0,p),R=o[d].substring(p+1)):A=o[d],u(A,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Ot(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;o instanceof Ot?(this.l=o.l,Dr(this,o.j),this.o=o.o,this.g=o.g,Or(this,o.u),this.h=o.h,So(this,El(o.i)),this.m=o.m):o&&(u=String(o).match(ml))?(this.l=!1,Dr(this,u[1]||"",!0),this.o=Nr(u[2]||""),this.g=Nr(u[3]||"",!0),Or(this,u[4]),this.h=Nr(u[5]||"",!0),So(this,u[6]||"",!0),this.m=Nr(u[7]||"")):(this.l=!1,this.i=new xr(null,this.l))}Ot.prototype.toString=function(){const o=[];var u=this.j;u&&o.push(Vr(u,gl,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Vr(u,gl,!0),"@"),o.push(Pr(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&o.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Vr(d,d.charAt(0)=="/"?pg:fg,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Vr(d,gg)),o.join("")},Ot.prototype.resolve=function(o){const u=lt(this);let d=!!o.j;d?Dr(u,o.j):d=!!o.o,d?u.o=o.o:d=!!o.g,d?u.g=o.g:d=o.u!=null;var p=o.h;if(d)Or(u,o.u);else if(d=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var A=u.h.lastIndexOf("/");A!=-1&&(p=u.h.slice(0,A+1)+p)}if(A=p,A==".."||A==".")p="";else if(A.indexOf("./")!=-1||A.indexOf("/.")!=-1){p=A.lastIndexOf("/",0)==0,A=A.split("/");const R=[];for(let N=0;N<A.length;){const K=A[N++];K=="."?p&&N==A.length&&R.push(""):K==".."?((R.length>1||R.length==1&&R[0]!="")&&R.pop(),p&&N==A.length&&R.push("")):(R.push(K),p=!0)}p=R.join("/")}else p=A}return d?u.h=p:d=o.i.toString()!=="",d?So(u,El(o.i)):d=!!o.m,d&&(u.m=o.m),u};function lt(o){return new Ot(o)}function Dr(o,u,d){o.j=d?Nr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Or(o,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);o.u=u}else o.u=null}function So(o,u,d){u instanceof xr?(o.i=u,_g(o.i,o.l)):(d||(u=Vr(u,mg)),o.i=new xr(u,o.l))}function oe(o,u,d){o.i.set(u,d)}function Us(o){return oe(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Nr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Vr(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,dg),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function dg(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var gl=/[#\/\?@]/g,fg=/[#\?:]/g,pg=/[#\?]/g,mg=/[#\?@]/g,gg=/#/g;function xr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function gn(o){o.g||(o.g=new Map,o.h=0,o.i&&hg(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=xr.prototype,n.add=function(o,u){gn(this),this.i=null,o=Gn(this,o);let d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function _l(o,u){gn(o),u=Gn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function yl(o,u){return gn(o),u=Gn(o,u),o.g.has(u)}n.forEach=function(o,u){gn(this),this.g.forEach(function(d,p){d.forEach(function(A){o.call(u,A,p,this)},this)},this)};function wl(o,u){gn(o);let d=[];if(typeof u=="string")yl(o,u)&&(d=d.concat(o.g.get(Gn(o,u))));else for(o=Array.from(o.g.values()),u=0;u<o.length;u++)d=d.concat(o[u]);return d}n.set=function(o,u){return gn(this),this.i=null,o=Gn(this,o),yl(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=wl(this,o),o.length>0?String(o[0]):u):u};function vl(o,u,d){_l(o,u),d.length>0&&(o.i=null,o.g.set(Gn(o,u),T(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(let p=0;p<u.length;p++){var d=u[p];const A=Pr(d);d=wl(this,d);for(let R=0;R<d.length;R++){let N=A;d[R]!==""&&(N+="="+Pr(d[R])),o.push(N)}}return this.i=o.join("&")};function El(o){const u=new xr;return u.i=o.i,o.g&&(u.g=new Map(o.g),u.h=o.h),u}function Gn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function _g(o,u){u&&!o.j&&(gn(o),o.i=null,o.g.forEach(function(d,p){const A=p.toLowerCase();p!=A&&(_l(this,p),vl(this,A,d))},o)),o.j=u}function yg(o,u){const d=new Cr;if(a.Image){const p=new Image;p.onload=f(Nt,d,"TestLoadImage: loaded",!0,u,p),p.onerror=f(Nt,d,"TestLoadImage: error",!1,u,p),p.onabort=f(Nt,d,"TestLoadImage: abort",!1,u,p),p.ontimeout=f(Nt,d,"TestLoadImage: timeout",!1,u,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function wg(o,u){const d=new Cr,p=new AbortController,A=setTimeout(()=>{p.abort(),Nt(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(R=>{clearTimeout(A),R.ok?Nt(d,"TestPingServer: ok",!0,u):Nt(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(A),Nt(d,"TestPingServer: error",!1,u)})}function Nt(o,u,d,p,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),p(d)}catch{}}function vg(){this.g=new ng}function Co(o){this.i=o.Sb||null,this.h=o.ab||!1}m(Co,Jc),Co.prototype.g=function(){return new Bs(this.i,this.h)};function Bs(o,u){ke.call(this),this.H=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Bs,ke),n=Bs.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=u,this.readyState=1,Lr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(u.body=o),(this.H||a).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Mr(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Lr(this)),this.g&&(this.readyState=3,Lr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Il(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Il(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Mr(this):Lr(this),this.readyState==3&&Il(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,Mr(this))},n.Na=function(o){this.g&&(this.response=o,Mr(this))},n.ga=function(){this.g&&Mr(this)};function Mr(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Lr(o)}n.setRequestHeader=function(o,u){this.A.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function Lr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Tl(o){let u="";return hn(o,function(d,p){u+=p,u+=":",u+=d,u+=`\r
`}),u}function Po(o,u,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=Tl(d),typeof o=="string"?d!=null&&Pr(d):oe(o,u,d))}function le(o){ke.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(le,ke);var Eg=/^https?$/i,Ig=["POST","PUT"];n=le.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,u,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():sl.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(R){bl(this,R);return}if(o=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var A in p)d.set(A,p[A]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const R of p.keys())d.set(R,p.get(R));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(R=>R.toLowerCase()=="content-type"),A=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Ig,u,void 0)>=0)||p||A||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,N]of d)this.g.setRequestHeader(R,N);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(R){bl(this,R)}};function bl(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.o=5,Al(o),js(o)}function Al(o){o.A||(o.A=!0,Me(o,"complete"),Me(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,Me(this,"complete"),Me(this,"abort"),js(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),js(this,!0)),le.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Rl(this):this.Xa())},n.Xa=function(){Rl(this)};function Rl(o){if(o.h&&typeof i<"u"){if(o.v&&Vt(o)==4)setTimeout(o.Ca.bind(o),0);else if(Me(o,"readystatechange"),Vt(o)==4){o.h=!1;try{const R=o.ca();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var p;if(p=R===0){let N=String(o.D).match(ml)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),p=!Eg.test(N?N.toLowerCase():"")}d=p}if(d)Me(o,"complete"),Me(o,"success");else{o.o=6;try{var A=Vt(o)>2?o.g.statusText:""}catch{A=""}o.l=A+" ["+o.ca()+"]",Al(o)}}finally{js(o)}}}}function js(o,u){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const d=o.g;o.g=null,u||Me(o,"ready");try{d.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Vt(o){return o.g?o.g.readyState:0}n.ca=function(){try{return Vt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),tg(u)}};function Sl(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Tg(o){const u={};o=(o.g&&Vt(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(w(o[p]))continue;var d=ag(o[p]);const A=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const R=u[A]||[];u[A]=R,R.push(d)}Vs(u,function(p){return p.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fr(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function Cl(o){this.za=0,this.i=[],this.j=new Cr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fr("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fr("baseRetryDelayMs",5e3,o),this.Za=Fr("retryDelaySeedMs",1e4,o),this.Ta=Fr("forwardChannelMaxRetries",2,o),this.va=Fr("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new ul(o&&o.concurrentRequestLimit),this.Ba=new vg,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Cl.prototype,n.ka=8,n.I=1,n.connect=function(o,u,d,p){Le(0),this.W=o,this.H=u||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.J=Ll(this,null,this.W),$s(this)};function ko(o){if(Pl(o),o.I==3){var u=o.V++,d=lt(o.J);if(oe(d,"SID",o.M),oe(d,"RID",u),oe(d,"TYPE","terminate"),Ur(o,d),u=new Dt(o,o.j,u),u.M=2,u.A=Us(lt(d)),d=!1,a.navigator&&a.navigator.sendBeacon)try{d=a.navigator.sendBeacon(u.A.toString(),"")}catch{}!d&&a.Image&&(new Image().src=u.A,d=!0),d||(u.g=Fl(u.j,null),u.g.ea(u.A)),u.F=Date.now(),Fs(u)}Ml(o)}function qs(o){o.g&&(Oo(o),o.g.cancel(),o.g=null)}function Pl(o){qs(o),o.v&&(a.clearTimeout(o.v),o.v=null),zs(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function $s(o){if(!hl(o.h)&&!o.m){o.m=!0;var u=o.Ea;W||_(),Q||(W(),Q=!0),v.add(u,o),o.D=0}}function bg(o,u){return dl(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=u.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Sr(h(o.Ea,o,u),xl(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const A=new Dt(this,this.j,o);let R=this.o;if(this.U&&(R?(R=Ir(R),Ee(R,this.U)):R=this.U),this.u!==null||this.R||(A.J=R,R=null),this.S)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,u>4096){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Dl(this,A,u),d=lt(this.J),oe(d,"RID",o),oe(d,"CVER",22),this.G&&oe(d,"X-HTTP-Session-Id",this.G),Ur(this,d),R&&(this.R?u="headers="+Pr(Tl(R))+"&"+u:this.u&&Po(d,this.u,R)),Ro(this.h,A),this.Ra&&oe(d,"TYPE","init"),this.S?(oe(d,"$req",u),oe(d,"SID","null"),A.U=!0,Io(A,d,null)):Io(A,d,u),this.I=2}}else this.I==3&&(o?kl(this,o):this.i.length==0||hl(this.h)||kl(this))};function kl(o,u){var d;u?d=u.l:d=o.V++;const p=lt(o.J);oe(p,"SID",o.M),oe(p,"RID",d),oe(p,"AID",o.K),Ur(o,p),o.u&&o.o&&Po(p,o.u,o.o),d=new Dt(o,o.j,d,o.D+1),o.u===null&&(d.J=o.o),u&&(o.i=u.G.concat(o.i)),u=Dl(o,d,1e3),d.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Ro(o.h,d),Io(d,p,u)}function Ur(o,u){o.H&&hn(o.H,function(d,p){oe(u,p,d)}),o.l&&hn({},function(d,p){oe(u,p,d)})}function Dl(o,u,d){d=Math.min(o.i.length,d);const p=o.l?h(o.l.Ka,o.l,o):null;e:{var A=o.i;let K=-1;for(;;){const _e=["count="+d];K==-1?d>0?(K=A[0].g,_e.push("ofs="+K)):K=0:_e.push("ofs="+K);let re=!0;for(let Te=0;Te<d;Te++){var R=A[Te].g;const ut=A[Te].map;if(R-=K,R<0)K=Math.max(0,A[Te].g-100),re=!1;else try{R="req"+R+"_"||"";try{var N=ut instanceof Map?ut:Object.entries(ut);for(const[yn,xt]of N){let Mt=xt;c(xt)&&(Mt=_o(xt)),_e.push(R+yn+"="+encodeURIComponent(Mt))}}catch(yn){throw _e.push(R+"type="+encodeURIComponent("_badmap")),yn}}catch{p&&p(ut)}}if(re){N=_e.join("&");break e}}N=void 0}return o=o.i.splice(0,d),u.G=o,N}function Ol(o){if(!o.g&&!o.v){o.Y=1;var u=o.Da;W||_(),Q||(W(),Q=!0),v.add(u,o),o.A=0}}function Do(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Sr(h(o.Da,o),xl(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,Nl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Sr(h(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Le(10),qs(this),Nl(this))};function Oo(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Nl(o){o.g=new Dt(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var u=lt(o.na);oe(u,"RID","rpc"),oe(u,"SID",o.M),oe(u,"AID",o.K),oe(u,"CI",o.F?"0":"1"),!o.F&&o.ia&&oe(u,"TO",o.ia),oe(u,"TYPE","xmlhttp"),Ur(o,u),o.u&&o.o&&Po(u,o.u,o.o),o.O&&(o.g.H=o.O);var d=o.g;o=o.ba,d.M=1,d.A=Us(lt(u)),d.u=null,d.R=!0,al(d,o)}n.Va=function(){this.C!=null&&(this.C=null,qs(this),Do(this),Le(19))};function zs(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Vl(o,u){var d=null;if(o.g==u){zs(o),Oo(o),o.g=null;var p=2}else if(Ao(o.h,u))d=u.G,fl(o.h,u),p=1;else return;if(o.I!=0){if(u.o)if(p==1){d=u.u?u.u.length:0,u=Date.now()-u.F;var A=o.D;p=Ms(),Me(p,new nl(p,d)),$s(o)}else Ol(o);else if(A=u.m,A==3||A==0&&u.X>0||!(p==1&&bg(o,u)||p==2&&Do(o)))switch(d&&d.length>0&&(u=o.h,u.i=u.i.concat(d)),A){case 1:_n(o,5);break;case 4:_n(o,10);break;case 3:_n(o,6);break;default:_n(o,2)}}}function xl(o,u){let d=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(d*=2),d*u}function _n(o,u){if(o.j.info("Error code "+u),u==2){var d=h(o.bb,o),p=o.Ua;const A=!p;p=new Ot(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Dr(p,"https"),Us(p),A?yg(p.toString(),d):wg(p.toString(),d)}else Le(2);o.I=0,o.l&&o.l.pa(u),Ml(o),Pl(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Ml(o){if(o.I=0,o.ja=[],o.l){const u=pl(o.h);(u.length!=0||o.i.length!=0)&&(S(o.ja,u),S(o.ja,o.i),o.h.i.length=0,T(o.i),o.i.length=0),o.l.oa()}}function Ll(o,u,d){var p=d instanceof Ot?lt(d):new Ot(d);if(p.g!="")u&&(p.g=u+"."+p.g),Or(p,p.u);else{var A=a.location;p=A.protocol,u=u?u+"."+A.hostname:A.hostname,A=+A.port;const R=new Ot(null);p&&Dr(R,p),u&&(R.g=u),A&&Or(R,A),d&&(R.h=d),p=R}return d=o.G,u=o.wa,d&&u&&oe(p,d,u),oe(p,"VER",o.ka),Ur(o,p),p}function Fl(o,u,d){if(u&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Aa&&!o.ma?new le(new Co({ab:d})):new le(o.ma),u.Fa(o.L),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ul(){}n=Ul.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Gs(){}Gs.prototype.g=function(o,u){return new He(o,u)};function He(o,u){ke.call(this),this.g=new Cl(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(o?o["X-WebChannel-Client-Profile"]=u.sa:o={"X-WebChannel-Client-Profile":u.sa}),this.g.U=o,(o=u&&u.Qb)&&!w(o)&&(this.g.u=o),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!w(u)&&(this.g.G=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Hn(this)}m(He,ke),He.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},He.prototype.close=function(){ko(this.g)},He.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.v&&(d={},d.__data__=_o(o),o=d);u.i.push(new ug(u.Ya++,o)),u.I==3&&$s(u)},He.prototype.N=function(){this.g.l=null,delete this.j,ko(this.g),delete this.g,He.Z.N.call(this)};function Bl(o){yo.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}m(Bl,yo);function jl(){wo.call(this),this.status=1}m(jl,wo);function Hn(o){this.g=o}m(Hn,Ul),Hn.prototype.ra=function(){Me(this.g,"a")},Hn.prototype.qa=function(o){Me(this.g,new Bl(o))},Hn.prototype.pa=function(o){Me(this.g,new jl)},Hn.prototype.oa=function(){Me(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,He.prototype.send=He.prototype.o,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,Xd=function(){return new Gs},Jd=function(){return Ms()},Yd=pn,ma={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ls.NO_ERROR=0,Ls.TIMEOUT=8,Ls.HTTP_ERROR=6,si=Ls,rl.COMPLETE="complete",Qd=rl,Xc.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",ke.prototype.listen=ke.prototype.J,Hr=Xc,le.prototype.listenOnce=le.prototype.K,le.prototype.getLastError=le.prototype.Ha,le.prototype.getLastErrorCode=le.prototype.ya,le.prototype.getStatus=le.prototype.ca,le.prototype.getResponseJson=le.prototype.La,le.prototype.getResponseText=le.prototype.la,le.prototype.send=le.prototype.ea,le.prototype.setWithCredentials=le.prototype.Fa,Kd=le}).apply(typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{});class Oe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Oe.UNAUTHENTICATED=new Oe(null),Oe.GOOGLE_CREDENTIALS=new Oe("google-credentials-uid"),Oe.FIRST_PARTY=new Oe("first-party-uid"),Oe.MOCK_USER=new Oe("mock-user");let gr="12.9.0";function lv(n){gr=n}const Rn=new ji("@firebase/firestore");function Kn(){return Rn.logLevel}function M(n,...e){if(Rn.logLevel<=J.DEBUG){const t=e.map(Ha);Rn.debug(`Firestore (${gr}): ${n}`,...t)}}function St(n,...e){if(Rn.logLevel<=J.ERROR){const t=e.map(Ha);Rn.error(`Firestore (${gr}): ${n}`,...t)}}function Sn(n,...e){if(Rn.logLevel<=J.WARN){const t=e.map(Ha);Rn.warn(`Firestore (${gr}): ${n}`,...t)}}function Ha(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function z(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Zd(n,r,t)}function Zd(n,e,t){let r=`FIRESTORE (${gr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw St(r),new Error(r)}function te(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Zd(e,s,r)}function H(n,e){return n}const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends nt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bt{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ef{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Oe.UNAUTHENTICATED)))}shutdown(){}}class hv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class dv{constructor(e){this.t=e,this.currentUser=Oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){te(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new bt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new bt,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new bt)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string",31837,{l:r}),new ef(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string",2055,{h:e}),new Oe(e)}}class fv{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Oe.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class pv{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new fv(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Oe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mv{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,We(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){te(this.o===void 0,3512);const r=i=>{i.error!=null&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,M("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vu(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vu(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function gv(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Wa{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=gv(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function X(n,e){return n<e?-1:n>e?1:0}function ga(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return jo(s)===jo(i)?X(s,i):jo(s)?1:-1}return X(n.length,e.length)}const _v=55296,yv=57343;function jo(n){const e=n.charCodeAt(0);return e>=_v&&e<=yv}function cr(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}const Eu="__name__";class ht{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&z(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ht.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ht?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=ht.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return X(e.length,t.length)}static compareSegments(e,t){const r=ht.isNumericId(e),s=ht.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ht.extractNumericId(e).compare(ht.extractNumericId(t)):ga(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kt.fromString(e.substring(4,e.length-2))}}class ie extends ht{construct(e,t,r){return new ie(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new x(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new ie(t)}static emptyPath(){return new ie([])}}const wv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ce extends ht{construct(e,t,r){return new Ce(e,t,r)}static isValidIdentifier(e){return wv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ce.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Eu}static keyField(){return new Ce([Eu])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new x(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new x(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new x(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new x(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ce(t)}static emptyPath(){return new Ce([])}}class B{constructor(e){this.path=e}static fromPath(e){return new B(ie.fromString(e))}static fromName(e){return new B(ie.fromString(e).popFirst(5))}static empty(){return new B(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new B(new ie(e.slice()))}}function tf(n,e,t){if(!t)throw new x(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vv(n,e,t,r){if(e===!0&&r===!0)throw new x(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Iu(n){if(!B.isDocumentKey(n))throw new x(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Tu(n){if(B.isDocumentKey(n))throw new x(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nf(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qi(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z(12329,{type:typeof n})}function tt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qi(n);throw new x(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ge(n,e){const t={typeString:n};return e&&(t.value=e),t}function Es(n,e){if(!nf(n))throw new x(k.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(s&&typeof a!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new x(k.INVALID_ARGUMENT,t);return!0}const bu=-62135596800,Au=1e6;class se{static now(){return se.fromMillis(Date.now())}static fromDate(e){return se.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Au);return new se(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bu)throw new x(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Au}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Es(e,se._jsonSchema))return new se(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}se._jsonSchemaVersion="firestore/timestamp/1.0",se._jsonSchema={type:ge("string",se._jsonSchemaVersion),seconds:ge("number"),nanoseconds:ge("number")};class G{static fromTimestamp(e){return new G(e)}static min(){return new G(new se(0,0))}static max(){return new G(new se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const as=-1;function Ev(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=G.fromTimestamp(r===1e9?new se(t+1,0):new se(t,r));return new Jt(s,B.empty(),e)}function Iv(n){return new Jt(n.readTime,n.key,as)}class Jt{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Jt(G.min(),B.empty(),as)}static max(){return new Jt(G.max(),B.empty(),as)}}function Tv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:X(n.largestBatchId,e.largestBatchId))}const bv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Av{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function _r(n){if(n.code!==k.FAILED_PRECONDITION||n.message!==bv)throw n;M("LocalStore","Unexpectedly lost primary lease")}class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new D(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof D?t:D.resolve(t)}catch(t){return D.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):D.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):D.reject(t)}static resolve(e){return new D(((t,r)=>{t(e)}))}static reject(e){return new D(((t,r)=>{r(e)}))}static waitFor(e){return new D(((t,r)=>{let s=0,i=0,a=!1;e.forEach((c=>{++s,c.next((()=>{++i,a&&i===s&&t()}),(l=>r(l)))})),a=!0,i===s&&t()}))}static or(e){let t=D.resolve(!1);for(const r of e)t=t.next((s=>s?D.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,i)=>{r.push(t.call(this,s,i))})),this.waitFor(r)}static mapArray(e,t){return new D(((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let l=0;l<i;l++){const h=l;t(e[h]).next((f=>{a[h]=f,++c,c===i&&r(a)}),(f=>s(f)))}}))}static doWhile(e,t){return new D(((r,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):r()};i()}))}}function Rv(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yr(n){return n.name==="IndexedDbTransactionError"}class $i{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$i.ce=-1;const Ka=-1;function zi(n){return n==null}function Ei(n){return n===0&&1/n==-1/0}function Sv(n){return typeof n=="number"&&Number.isInteger(n)&&!Ei(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const rf="";function Cv(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ru(e)),e=Pv(n.get(t),e);return Ru(e)}function Pv(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case rf:t+="";break;default:t+=i}}return t}function Ru(n){return n+rf+""}function Su(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function on(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sf(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ae{constructor(e,t){this.comparator=e,this.root=t||Ae.EMPTY}insert(e,t){return new ae(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ae.BLACK,null,null))}remove(e){return new ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ae.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Js(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Js(this.root,e,this.comparator,!1)}getReverseIterator(){return new Js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Js(this.root,e,this.comparator,!0)}}class Js{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ae{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??Ae.RED,this.left=s??Ae.EMPTY,this.right=i??Ae.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new Ae(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ae.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ae.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ae.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ae.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}}Ae.EMPTY=null,Ae.RED=!0,Ae.BLACK=!1;Ae.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new Ae(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class we{constructor(e){this.comparator=e,this.data=new ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cu(this.data.getIterator())}getIteratorFrom(e){return new Cu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof we)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new we(this.comparator);return t.data=e,t}}class Cu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ke{constructor(e){this.fields=e,e.sort(Ce.comparator)}static empty(){return new Ke([])}unionWith(e){let t=new we(Ce.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ke(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cr(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class of extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pe{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new of("Invalid base64 string: "+i):i}})(e);return new Pe(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new Pe(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pe.EMPTY_BYTE_STRING=new Pe("");const kv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xt(n){if(te(!!n,39018),typeof n=="string"){let e=0;const t=kv.exec(n);if(te(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:de(n.seconds),nanos:de(n.nanos)}}function de(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Zt(n){return typeof n=="string"?Pe.fromBase64String(n):Pe.fromUint8Array(n)}const af="server_timestamp",cf="__type__",lf="__previous_value__",uf="__local_write_time__";function Qa(n){return(n?.mapValue?.fields||{})[cf]?.stringValue===af}function Gi(n){const e=n.mapValue.fields[lf];return Qa(e)?Gi(e):e}function cs(n){const e=Xt(n.mapValue.fields[uf].timestampValue);return new se(e.seconds,e.nanos)}class Dv{constructor(e,t,r,s,i,a,c,l,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=f,this.apiKey=m}}const Ii="(default)";class ls{constructor(e,t){this.projectId=e,this.database=t||Ii}static empty(){return new ls("","")}get isDefaultDatabase(){return this.database===Ii}isEqual(e){return e instanceof ls&&e.projectId===this.projectId&&e.database===this.database}}function Ov(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new x(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ls(n.options.projectId,e)}const hf="__type__",Nv="__max__",Xs={mapValue:{}},df="__vector__",Ti="value";function en(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qa(n)?4:xv(n)?9007199254740991:Vv(n)?10:11:z(28295,{value:n})}function wt(n,e){if(n===e)return!0;const t=en(n);if(t!==en(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cs(n).isEqual(cs(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Xt(s.timestampValue),c=Xt(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return Zt(s.bytesValue).isEqual(Zt(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return de(s.geoPointValue.latitude)===de(i.geoPointValue.latitude)&&de(s.geoPointValue.longitude)===de(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return de(s.integerValue)===de(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=de(s.doubleValue),c=de(i.doubleValue);return a===c?Ei(a)===Ei(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return cr(n.arrayValue.values||[],e.arrayValue.values||[],wt);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Su(a)!==Su(c))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!wt(a[l],c[l])))return!1;return!0})(n,e);default:return z(52216,{left:n})}}function us(n,e){return(n.values||[]).find((t=>wt(t,e)))!==void 0}function lr(n,e){if(n===e)return 0;const t=en(n),r=en(e);if(t!==r)return X(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return X(n.booleanValue,e.booleanValue);case 2:return(function(i,a){const c=de(i.integerValue||i.doubleValue),l=de(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(n,e);case 3:return Pu(n.timestampValue,e.timestampValue);case 4:return Pu(cs(n),cs(e));case 5:return ga(n.stringValue,e.stringValue);case 6:return(function(i,a){const c=Zt(i),l=Zt(a);return c.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(i,a){const c=i.split("/"),l=a.split("/");for(let h=0;h<c.length&&h<l.length;h++){const f=X(c[h],l[h]);if(f!==0)return f}return X(c.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,a){const c=X(de(i.latitude),de(a.latitude));return c!==0?c:X(de(i.longitude),de(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ku(n.arrayValue,e.arrayValue);case 10:return(function(i,a){const c=i.fields||{},l=a.fields||{},h=c[Ti]?.arrayValue,f=l[Ti]?.arrayValue,m=X(h?.values?.length||0,f?.values?.length||0);return m!==0?m:ku(h,f)})(n.mapValue,e.mapValue);case 11:return(function(i,a){if(i===Xs.mapValue&&a===Xs.mapValue)return 0;if(i===Xs.mapValue)return 1;if(a===Xs.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),h=a.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){const g=ga(l[m],f[m]);if(g!==0)return g;const T=lr(c[l[m]],h[f[m]]);if(T!==0)return T}return X(l.length,f.length)})(n.mapValue,e.mapValue);default:throw z(23264,{he:t})}}function Pu(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return X(n,e);const t=Xt(n),r=Xt(e),s=X(t.seconds,r.seconds);return s!==0?s:X(t.nanos,r.nanos)}function ku(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=lr(t[s],r[s]);if(i)return i}return X(t.length,r.length)}function ur(n){return _a(n)}function _a(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Xt(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Zt(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return B.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=_a(i);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${_a(t.fields[a])}`;return s+"}"})(n.mapValue):z(61005,{value:n})}function ii(n){switch(en(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gi(n);return e?16+ii(e):16;case 5:return 2*n.stringValue.length;case 6:return Zt(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+ii(i)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return on(r.fields,((i,a)=>{s+=i.length+ii(a)})),s})(n.mapValue);default:throw z(13486,{value:n})}}function Du(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ya(n){return!!n&&"integerValue"in n}function Ya(n){return!!n&&"arrayValue"in n}function Ou(n){return!!n&&"nullValue"in n}function Nu(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oi(n){return!!n&&"mapValue"in n}function Vv(n){return(n?.mapValue?.fields||{})[hf]?.stringValue===df}function Jr(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return on(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Jr(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jr(n.arrayValue.values[t]);return e}return{...n}}function xv(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Nv}class ze{constructor(e){this.value=e}static empty(){return new ze({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jr(t)}setAll(e){let t=Ce.emptyPath(),r={},s=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=c.popLast()}a?r[c.lastSegment()]=Jr(a):s.push(c.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());oi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];oi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){on(t,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new ze(Jr(this.value))}}function ff(n){const e=[];return on(n.fields,((t,r)=>{const s=new Ce([t]);if(oi(r)){const i=ff(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)})),new Ke(e)}class Ne{constructor(e,t,r,s,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Ne(e,0,G.min(),G.min(),G.min(),ze.empty(),0)}static newFoundDocument(e,t,r,s){return new Ne(e,1,t,G.min(),r,s,0)}static newNoDocument(e,t){return new Ne(e,2,t,G.min(),G.min(),ze.empty(),0)}static newUnknownDocument(e,t){return new Ne(e,3,t,G.min(),G.min(),ze.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ze.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ze.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ne&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ne(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bi{constructor(e,t){this.position=e,this.inclusive=t}}function Vu(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],a=n.position[s];if(i.field.isKeyField()?r=B.comparator(B.fromName(a.referenceValue),t.key):r=lr(a,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function xu(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wt(n.position[t],e.position[t]))return!1;return!0}class hs{constructor(e,t="asc"){this.field=e,this.dir=t}}function Mv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class pf{}class me extends pf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Fv(e,t,r):t==="array-contains"?new jv(e,r):t==="in"?new qv(e,r):t==="not-in"?new $v(e,r):t==="array-contains-any"?new zv(e,r):new me(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Uv(e,r):new Bv(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(lr(t,this.value)):t!==null&&en(this.value)===en(t)&&this.matchesComparison(lr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class at extends pf{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new at(e,t)}matches(e){return mf(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mf(n){return n.op==="and"}function gf(n){return Lv(n)&&mf(n)}function Lv(n){for(const e of n.filters)if(e instanceof at)return!1;return!0}function wa(n){if(n instanceof me)return n.field.canonicalString()+n.op.toString()+ur(n.value);if(gf(n))return n.filters.map((e=>wa(e))).join(",");{const e=n.filters.map((t=>wa(t))).join(",");return`${n.op}(${e})`}}function _f(n,e){return n instanceof me?(function(r,s){return s instanceof me&&r.op===s.op&&r.field.isEqual(s.field)&&wt(r.value,s.value)})(n,e):n instanceof at?(function(r,s){return s instanceof at&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,c)=>i&&_f(a,s.filters[c])),!0):!1})(n,e):void z(19439)}function yf(n){return n instanceof me?(function(t){return`${t.field.canonicalString()} ${t.op} ${ur(t.value)}`})(n):n instanceof at?(function(t){return t.op.toString()+" {"+t.getFilters().map(yf).join(" ,")+"}"})(n):"Filter"}class Fv extends me{constructor(e,t,r){super(e,t,r),this.key=B.fromName(r.referenceValue)}matches(e){const t=B.comparator(e.key,this.key);return this.matchesComparison(t)}}class Uv extends me{constructor(e,t){super(e,"in",t),this.keys=wf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Bv extends me{constructor(e,t){super(e,"not-in",t),this.keys=wf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wf(n,e){return(e.arrayValue?.values||[]).map((t=>B.fromName(t.referenceValue)))}class jv extends me{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ya(t)&&us(t.arrayValue,this.value)}}class qv extends me{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&us(this.value.arrayValue,t)}}class $v extends me{constructor(e,t){super(e,"not-in",t)}matches(e){if(us(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!us(this.value.arrayValue,t)}}class zv extends me{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ya(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>us(this.value.arrayValue,r)))}}class Gv{constructor(e,t=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function Mu(n,e=null,t=[],r=[],s=null,i=null,a=null){return new Gv(n,e,t,r,s,i,a)}function Ja(n){const e=H(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>wa(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),zi(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ur(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ur(r))).join(",")),e.Te=t}return e.Te}function Xa(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Mv(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_f(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xu(n.startAt,e.startAt)&&xu(n.endAt,e.endAt)}function va(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class wr{constructor(e,t=null,r=[],s=[],i=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Hv(n,e,t,r,s,i,a,c){return new wr(n,e,t,r,s,i,a,c)}function Za(n){return new wr(n)}function Lu(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Wv(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function vf(n){return n.collectionGroup!==null}function Xr(n){const e=H(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new we(Ce.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new hs(i,r))})),t.has(Ce.keyField().canonicalString())||e.Ie.push(new hs(Ce.keyField(),r))}return e.Ie}function pt(n){const e=H(n);return e.Ee||(e.Ee=Kv(e,Xr(n))),e.Ee}function Kv(n,e){if(n.limitType==="F")return Mu(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new hs(s.field,i)}));const t=n.endAt?new bi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bi(n.startAt.position,n.startAt.inclusive):null;return Mu(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ea(n,e){const t=n.filters.concat([e]);return new wr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Qv(n,e){const t=n.explicitOrderBy.concat([e]);return new wr(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Ia(n,e,t){return new wr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hi(n,e){return Xa(pt(n),pt(e))&&n.limitType===e.limitType}function Ef(n){return`${Ja(pt(n))}|lt:${n.limitType}`}function Qn(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>yf(s))).join(", ")}]`),zi(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>ur(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>ur(s))).join(",")),`Target(${r})`})(pt(n))}; limitType=${n.limitType})`}function Wi(n,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):B.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(n,e)&&(function(r,s){for(const i of Xr(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(a,c,l){const h=Vu(a,c,l);return a.inclusive?h<=0:h<0})(r.startAt,Xr(r),s)||r.endAt&&!(function(a,c,l){const h=Vu(a,c,l);return a.inclusive?h>=0:h>0})(r.endAt,Xr(r),s))})(n,e)}function Yv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function If(n){return(e,t)=>{let r=!1;for(const s of Xr(n)){const i=Jv(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Jv(n,e,t){const r=n.field.isKeyField()?B.comparator(e.key,t.key):(function(i,a,c){const l=a.data.field(i),h=c.data.field(i);return l!==null&&h!==null?lr(l,h):z(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z(19790,{direction:n.dir})}}class Mn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){on(this.inner,((t,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return sf(this.inner)}size(){return this.innerSize}}const Xv=new ae(B.comparator);function Ct(){return Xv}const Tf=new ae(B.comparator);function Wr(...n){let e=Tf;for(const t of n)e=e.insert(t.key,t);return e}function bf(n){let e=Tf;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function In(){return Zr()}function Af(){return Zr()}function Zr(){return new Mn((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Zv=new ae(B.comparator),eE=new we(B.comparator);function Z(...n){let e=eE;for(const t of n)e=e.add(t);return e}const tE=new we(X);function nE(){return tE}function ec(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ei(e)?"-0":e}}function Rf(n){return{integerValue:""+n}}function rE(n,e){return Sv(e)?Rf(e):ec(n,e)}class Ki{constructor(){this._=void 0}}function sE(n,e,t){return n instanceof ds?(function(s,i){const a={fields:{[cf]:{stringValue:af},[uf]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Qa(i)&&(i=Gi(i)),i&&(a.fields[lf]=i),{mapValue:a}})(t,e):n instanceof fs?Cf(n,e):n instanceof ps?Pf(n,e):(function(s,i){const a=Sf(s,i),c=Fu(a)+Fu(s.Ae);return ya(a)&&ya(s.Ae)?Rf(c):ec(s.serializer,c)})(n,e)}function iE(n,e,t){return n instanceof fs?Cf(n,e):n instanceof ps?Pf(n,e):t}function Sf(n,e){return n instanceof Ai?(function(r){return ya(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class ds extends Ki{}class fs extends Ki{constructor(e){super(),this.elements=e}}function Cf(n,e){const t=kf(e);for(const r of n.elements)t.some((s=>wt(s,r)))||t.push(r);return{arrayValue:{values:t}}}class ps extends Ki{constructor(e){super(),this.elements=e}}function Pf(n,e){let t=kf(e);for(const r of n.elements)t=t.filter((s=>!wt(s,r)));return{arrayValue:{values:t}}}class Ai extends Ki{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Fu(n){return de(n.integerValue||n.doubleValue)}function kf(n){return Ya(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class oE{constructor(e,t){this.field=e,this.transform=t}}function aE(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof fs&&s instanceof fs||r instanceof ps&&s instanceof ps?cr(r.elements,s.elements,wt):r instanceof Ai&&s instanceof Ai?wt(r.Ae,s.Ae):r instanceof ds&&s instanceof ds})(n.transform,e.transform)}class cE{constructor(e,t){this.version=e,this.transformResults=t}}class Ue{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ue}static exists(e){return new Ue(void 0,e)}static updateTime(e){return new Ue(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ai(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Qi{}function Df(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yi(n.key,Ue.none()):new Is(n.key,n.data,Ue.none());{const t=n.data,r=ze.empty();let s=new we(Ce.comparator);for(let i of e.fields)if(!s.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new an(n.key,r,new Ke(s.toArray()),Ue.none())}}function lE(n,e,t){n instanceof Is?(function(s,i,a){const c=s.value.clone(),l=Bu(s.fieldTransforms,i,a.transformResults);c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof an?(function(s,i,a){if(!ai(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Bu(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(Of(s)),l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function es(n,e,t,r){return n instanceof Is?(function(i,a,c,l){if(!ai(i.precondition,a))return c;const h=i.value.clone(),f=ju(i.fieldTransforms,l,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof an?(function(i,a,c,l){if(!ai(i.precondition,a))return c;const h=ju(i.fieldTransforms,l,a),f=a.data;return f.setAll(Of(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(n,e,t,r):(function(i,a,c){return ai(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function uE(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=Sf(r.transform,s||null);i!=null&&(t===null&&(t=ze.empty()),t.set(r.field,i))}return t||null}function Uu(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&cr(r,s,((i,a)=>aE(i,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Is extends Qi{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class an extends Qi{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Of(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Bu(n,e,t){const r=new Map;te(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const i=n[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,iE(a,c,t[s]))}return r}function ju(n,e,t){const r=new Map;for(const s of n){const i=s.transform,a=t.data.field(s.field);r.set(s.field,sE(i,a,e))}return r}class Yi extends Qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hE extends Qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dE{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&lE(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=es(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=es(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Af();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=t.has(s.key)?null:c;const l=Df(a,c);l!==null&&r.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(G.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Z())}isEqual(e){return this.batchId===e.batchId&&cr(this.mutations,e.mutations,((t,r)=>Uu(t,r)))&&cr(this.baseMutations,e.baseMutations,((t,r)=>Uu(t,r)))}}class tc{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return Zv})();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new tc(e,t,r,s)}}class fE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class pE{constructor(e,t){this.count=e,this.unchangedNames=t}}var pe,ee;function mE(n){switch(n){case k.OK:return z(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return z(15467,{code:n})}}function Nf(n){if(n===void 0)return St("GRPC error has no .code"),k.UNKNOWN;switch(n){case pe.OK:return k.OK;case pe.CANCELLED:return k.CANCELLED;case pe.UNKNOWN:return k.UNKNOWN;case pe.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case pe.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case pe.INTERNAL:return k.INTERNAL;case pe.UNAVAILABLE:return k.UNAVAILABLE;case pe.UNAUTHENTICATED:return k.UNAUTHENTICATED;case pe.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case pe.NOT_FOUND:return k.NOT_FOUND;case pe.ALREADY_EXISTS:return k.ALREADY_EXISTS;case pe.PERMISSION_DENIED:return k.PERMISSION_DENIED;case pe.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case pe.ABORTED:return k.ABORTED;case pe.OUT_OF_RANGE:return k.OUT_OF_RANGE;case pe.UNIMPLEMENTED:return k.UNIMPLEMENTED;case pe.DATA_LOSS:return k.DATA_LOSS;default:return z(39323,{code:n})}}(ee=pe||(pe={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";function gE(){return new TextEncoder}const _E=new Kt([4294967295,4294967295],0);function qu(n){const e=gE().encode(n),t=new Wd;return t.update(e),new Uint8Array(t.digest())}function $u(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Kt([t,r],0),new Kt([s,i],0)]}class nc{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Kr(`Invalid padding: ${t}`);if(r<0)throw new Kr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Kr(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Kt.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Kt.fromNumber(r)));return s.compare(_E)===1&&(s=new Kt([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=qu(e),[r,s]=$u(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new nc(i,s,t);return r.forEach((c=>a.insert(c))),a}insert(e){if(this.ge===0)return;const t=qu(e),[r,s]=$u(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.be(a)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Kr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ji{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ts.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ji(G.min(),s,new ae(X),Ct(),Z())}}class Ts{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ts(r,t,Z(),Z(),Z())}}class ci{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class Vf{constructor(e,t){this.targetId=e,this.Ce=t}}class xf{constructor(e,t,r=Pe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class zu{constructor(){this.ve=0,this.Fe=Gu(),this.Me=Pe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Z(),t=Z(),r=Z();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:z(38017,{changeType:i})}})),new Ts(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=Gu()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,te(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class yE{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ct(),this.He=Zs(),this.Je=Zs(),this.Ze=new ae(X)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:z(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(va(i))if(r===0){const a=new B(i.path);this.et(t,a,Ne.newNoDocument(a,G.min()))}else te(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const c=this.ut(e),l=c?this.ct(c,e,a):1;if(l!==0){this.it(t);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let a,c;try{a=Zt(r).toUint8Array()}catch(l){if(l instanceof of)return Sn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new nc(a,s,i)}catch(l){return Sn(l instanceof Kr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(t,i,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((i,a)=>{const c=this.ot(a);if(c){if(i.current&&va(c.target)){const l=new B(c.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Ne.newNoDocument(l,e))}i.Be&&(t.set(a,i.ke()),i.Ke())}}));let r=Z();this.Je.forEach(((i,a)=>{let c=!0;a.forEachWhile((l=>{const h=this.ot(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(e)));const s=new Ji(e,t,this.Ze,this.je,r);return this.je=Ct(),this.He=Zs(),this.Je=Zs(),this.Ze=new ae(X),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new zu,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new we(X),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new we(X),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||M("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zu),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zs(){return new ae(B.comparator)}function Gu(){return new ae(B.comparator)}const wE={asc:"ASCENDING",desc:"DESCENDING"},vE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EE={and:"AND",or:"OR"};class IE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ta(n,e){return n.useProto3Json||zi(e)?e:{value:e}}function Ri(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mf(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function TE(n,e){return Ri(n,e.toTimestamp())}function mt(n){return te(!!n,49232),G.fromTimestamp((function(t){const r=Xt(t);return new se(r.seconds,r.nanos)})(n))}function rc(n,e){return ba(n,e).canonicalString()}function ba(n,e){const t=(function(s){return new ie(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Lf(n){const e=ie.fromString(n);return te(qf(e),10190,{key:e.toString()}),e}function Aa(n,e){return rc(n.databaseId,e.path)}function qo(n,e){const t=Lf(e);if(t.get(1)!==n.databaseId.projectId)throw new x(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(Uf(t))}function Ff(n,e){return rc(n.databaseId,e)}function bE(n){const e=Lf(n);return e.length===4?ie.emptyPath():Uf(e)}function Ra(n){return new ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Uf(n){return te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Hu(n,e,t){return{name:Aa(n,e),fields:t.value.mapValue.fields}}function AE(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:z(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(te(f===void 0||typeof f=="string",58123),Pe.fromBase64String(f||"")):(te(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Pe.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){const f=h.code===void 0?k.UNKNOWN:Nf(h.code);return new x(f,h.message||"")})(a);t=new xf(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qo(n,r.document.name),i=mt(r.document.updateTime),a=r.document.createTime?mt(r.document.createTime):G.min(),c=new ze({mapValue:{fields:r.document.fields}}),l=Ne.newFoundDocument(s,i,a,c),h=r.targetIds||[],f=r.removedTargetIds||[];t=new ci(h,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qo(n,r.document),i=r.readTime?mt(r.readTime):G.min(),a=Ne.newNoDocument(s,i),c=r.removedTargetIds||[];t=new ci([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qo(n,r.document),i=r.removedTargetIds||[];t=new ci([],i,s,null)}else{if(!("filter"in e))return z(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new pE(s,i),c=r.targetId;t=new Vf(c,a)}}return t}function RE(n,e){let t;if(e instanceof Is)t={update:Hu(n,e.key,e.value)};else if(e instanceof Yi)t={delete:Aa(n,e.key)};else if(e instanceof an)t={update:Hu(n,e.key,e.data),updateMask:xE(e.fieldMask)};else{if(!(e instanceof hE))return z(16599,{dt:e.type});t={verify:Aa(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(i,a){const c=a.transform;if(c instanceof ds)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof fs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ps)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ai)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw z(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:TE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:z(27497)})(n,e.precondition)),t}function SE(n,e){return n&&n.length>0?(te(e!==void 0,14353),n.map((t=>(function(s,i){let a=s.updateTime?mt(s.updateTime):mt(i);return a.isEqual(G.min())&&(a=mt(i)),new cE(a,s.transformResults||[])})(t,e)))):[]}function CE(n,e){return{documents:[Ff(n,e.path)]}}function PE(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Ff(n,s);const i=(function(h){if(h.length!==0)return jf(at.create(h,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const a=(function(h){if(h.length!==0)return h.map((f=>(function(g){return{field:Yn(g.field),direction:OE(g.dir)}})(f)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=Ta(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:s}}function kE(n){let e=bE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){te(r===1,65062);const f=t.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=(function(m){const g=Bf(m);return g instanceof at&&gf(g)?g.getFilters():[g]})(t.where));let a=[];t.orderBy&&(a=(function(m){return m.map((g=>(function(S){return new hs(Jn(S.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(g)))})(t.orderBy));let c=null;t.limit&&(c=(function(m){let g;return g=typeof m=="object"?m.value:m,zi(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(m){const g=!!m.before,T=m.values||[];return new bi(T,g)})(t.startAt));let h=null;return t.endAt&&(h=(function(m){const g=!m.before,T=m.values||[];return new bi(T,g)})(t.endAt)),Hv(e,s,a,i,c,"F",l,h)}function DE(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Bf(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Jn(t.unaryFilter.field);return me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Jn(t.unaryFilter.field);return me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Jn(t.unaryFilter.field);return me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Jn(t.unaryFilter.field);return me.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z(61313);default:return z(60726)}})(n):n.fieldFilter!==void 0?(function(t){return me.create(Jn(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return z(58110);default:return z(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return at.create(t.compositeFilter.filters.map((r=>Bf(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return z(1026)}})(t.compositeFilter.op))})(n):z(30097,{filter:n})}function OE(n){return wE[n]}function NE(n){return vE[n]}function VE(n){return EE[n]}function Yn(n){return{fieldPath:n.canonicalString()}}function Jn(n){return Ce.fromServerFormat(n.fieldPath)}function jf(n){return n instanceof me?(function(t){if(t.op==="=="){if(Nu(t.value))return{unaryFilter:{field:Yn(t.field),op:"IS_NAN"}};if(Ou(t.value))return{unaryFilter:{field:Yn(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Nu(t.value))return{unaryFilter:{field:Yn(t.field),op:"IS_NOT_NAN"}};if(Ou(t.value))return{unaryFilter:{field:Yn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yn(t.field),op:NE(t.op),value:t.value}}})(n):n instanceof at?(function(t){const r=t.getFilters().map((s=>jf(s)));return r.length===1?r[0]:{compositeFilter:{op:VE(t.op),filters:r}}})(n):z(54877,{filter:n})}function xE(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function qf(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function $f(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class zt{constructor(e,t,r,s,i=G.min(),a=G.min(),c=Pe.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new zt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zt(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ME{constructor(e){this.yt=e}}function LE(n){const e=kE({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ia(e,e.limit,"L"):e}class FE{constructor(){this.Sn=new UE}addToCollectionParentIndex(e,t){return this.Sn.add(t),D.resolve()}getCollectionParents(e,t){return D.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return D.resolve()}deleteFieldIndex(e,t){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,t){return D.resolve()}getDocumentsMatchingTarget(e,t){return D.resolve(null)}getIndexType(e,t){return D.resolve(0)}getFieldIndexes(e,t){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,t){return D.resolve(Jt.min())}getMinOffsetFromCollectionGroup(e,t){return D.resolve(Jt.min())}updateCollectionGroup(e,t,r){return D.resolve()}updateIndexEntries(e,t){return D.resolve()}}class UE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new we(ie.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new we(ie.comparator)).toArray()}}const Wu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zf=41943040;class $e{static withCacheSize(e){return new $e(e,$e.DEFAULT_COLLECTION_PERCENTILE,$e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}$e.DEFAULT_COLLECTION_PERCENTILE=10,$e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$e.DEFAULT=new $e(zf,$e.DEFAULT_COLLECTION_PERCENTILE,$e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$e.DISABLED=new $e(-1,0,0);class hr{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new hr(0)}static ar(){return new hr(-1)}}const Ku="LruGarbageCollector",BE=1048576;function Qu([n,e],[t,r]){const s=X(n,t);return s===0?X(e,r):s}class jE{constructor(e){this.Pr=e,this.buffer=new we(Qu),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Qu(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){M(Ku,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yr(t)?M(Ku,"Ignoring IndexedDB error during garbage collection: ",t):await _r(t)}await this.Ar(3e5)}))}}class $E{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return D.resolve($i.ce);const r=new jE(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(M("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(Wu)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(M("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wu):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,i,a,c,l,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(M("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s)))).next((m=>(r=m,c=Date.now(),this.removeTargets(e,r,t)))).next((m=>(i=m,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((m=>(h=Date.now(),Kn()<=J.DEBUG&&M("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${m} documents in `+(h-l)+`ms
Total Duration: ${h-f}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m}))))}}function zE(n,e){return new $E(n,e)}class GE{constructor(){this.changes=new Mn((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ne.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?D.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class WE{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&es(r.mutation,s,Ke.empty(),se.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Z()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Z()){const s=In();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((i=>{let a=Wr();return i.forEach(((c,l)=>{a=a.insert(c,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=In();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Z())))}populateOverlays(e,t,r){const s=[];return r.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,r,s){let i=Ct();const a=Zr(),c=(function(){return Zr()})();return t.forEach(((l,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof an)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),es(f.mutation,h,f.mutation.getFieldMask(),se.now())):a.set(h.key,Ke.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((h,f)=>a.set(h,f))),t.forEach(((h,f)=>c.set(h,new HE(f,a.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=Zr();let s=new ae(((a,c)=>a-c)),i=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const c of a)c.keys().forEach((l=>{const h=t.get(l);if(h===null)return;let f=r.get(l)||Ke.empty();f=c.applyToLocalView(h,f),r.set(l,f);const m=(s.get(c.batchId)||Z()).add(l);s=s.insert(c.batchId,m)}))})).next((()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),h=l.key,f=l.value,m=Af();f.forEach((g=>{if(!i.has(g)){const T=Df(t.get(g),r.get(g));T!==null&&m.set(g,T),i=i.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return D.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return Wv(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):D.resolve(In());let c=as,l=i;return a.next((h=>D.forEach(h,((f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?D.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{l=l.insert(f,g)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,l,h,Z()))).next((f=>({batchId:c,changes:bf(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next((r=>{let s=Wr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let a=Wr();return this.indexManager.getCollectionParents(e,i).next((c=>D.forEach(c,(l=>{const h=(function(m,g){return new wr(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next((f=>{f.forEach(((m,g)=>{a=a.insert(m,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s)))).next((a=>{i.forEach(((l,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,Ne.newInvalidDocument(f)))}));let c=Wr();return a.forEach(((l,h)=>{const f=i.get(l);f!==void 0&&es(f.mutation,h,Ke.empty(),se.now()),Wi(t,h)&&(c=c.insert(l,h))})),c}))}}class KE{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return D.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:mt(s.createTime)}})(t)),D.resolve()}getNamedQuery(e,t){return D.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:LE(s.bundledQuery),readTime:mt(s.readTime)}})(t)),D.resolve()}}class QE{constructor(){this.overlays=new ae(B.comparator),this.Lr=new Map}getOverlay(e,t){return D.resolve(this.overlays.get(t))}getOverlays(e,t){const r=In();return D.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,i)=>{this.bt(e,t,i)})),D.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(r)),D.resolve()}getOverlaysForCollection(e,t,r){const s=In(),i=t.length+1,a=new B(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return D.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new ae(((h,f)=>h-f));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=In(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=In(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((h,f)=>c.set(h,f))),!(c.size()>=s)););return D.resolve(c)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new fE(t,r));let i=this.Lr.get(t);i===void 0&&(i=Z(),this.Lr.set(t,i)),this.Lr.set(t,i.add(r.key))}}class YE{constructor(){this.sessionToken=Pe.EMPTY_BYTE_STRING}getSessionToken(e){return D.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,D.resolve()}}class sc{constructor(){this.kr=new we(be.Kr),this.qr=new we(be.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new be(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new be(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new B(new ie([])),r=new be(t,e),s=new be(t,e+1),i=[];return this.qr.forEachInRange([r,s],(a=>{this.Wr(a),i.push(a.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new B(new ie([])),r=new be(t,e),s=new be(t,e+1);let i=Z();return this.qr.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const t=new be(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class be{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return B.comparator(e.key,t.key)||X(e.Hr,t.Hr)}static Ur(e,t){return X(e.Hr,t.Hr)||B.comparator(e.key,t.key)}}class JE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new we(be.Kr)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new dE(i,t,r,s);this.mutationQueue.push(a);for(const c of s)this.Jr=this.Jr.add(new be(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return D.resolve(a)}lookupMutationBatch(e,t){return D.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?Ka:this.Yn-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new be(t,0),s=new be(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],(a=>{const c=this.Zr(a.Hr);i.push(c)})),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new we(X);return t.forEach((s=>{const i=new be(s,0),a=new be(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],(c=>{r=r.add(c.Hr)}))})),D.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;B.isDocumentKey(i)||(i=i.child(""));const a=new be(new B(i),0);let c=new we(X);return this.Jr.forEachWhile((l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(l.Hr)),!0)}),a),D.resolve(this.Yr(c))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){te(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return D.forEach(t.mutations,(s=>{const i=new be(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new be(t,0),s=this.Jr.firstAfterOrEqual(r);return D.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class XE{constructor(e){this.ti=e,this.docs=(function(){return new ae(B.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,a=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return D.resolve(r?r.document.mutableCopy():Ne.newInvalidDocument(t))}getEntries(e,t){let r=Ct();return t.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ne.newInvalidDocument(s))})),D.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=Ct();const a=t.path,c=new B(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:h,value:{document:f}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Tv(Iv(f),r)<=0||(s.has(f.key)||Wi(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(e,t,r,s){z(9500)}ni(e,t){return D.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new ZE(this)}getSize(e){return D.resolve(this.size)}}class ZE extends GE{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),D.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class eI{constructor(e){this.persistence=e,this.ri=new Mn((t=>Ja(t)),Xa),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.ii=0,this.si=new sc,this.targetCount=0,this.oi=hr._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),D.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new hr(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,D.resolve()}updateTargetData(e,t){return this.lr(t),D.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.ri.forEach(((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),D.waitFor(i).next((()=>s))}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return D.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),D.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),D.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),D.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return D.resolve(r)}containsKey(e,t){return D.resolve(this.si.containsKey(t))}}class Gf{constructor(e,t){this._i={},this.overlays={},this.ai=new $i(0),this.ui=!1,this.ui=!0,this.ci=new YE,this.referenceDelegate=e(this),this.li=new eI(this),this.indexManager=new FE,this.remoteDocumentCache=(function(s){return new XE(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new ME(t),this.Pi=new KE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new JE(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){M("MemoryPersistence","Starting transaction:",e);const s=new tI(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((i=>this.referenceDelegate.Ii(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(e,t){return D.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class tI extends Av{constructor(e){super(),this.currentSequenceNumber=e}}class ic{constructor(e){this.persistence=e,this.Ri=new sc,this.Ai=null}static Vi(e){return new ic(e)}get di(){if(this.Ai)return this.Ai;throw z(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),D.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),D.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.di.add(i.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.di,(r=>{const s=B.fromPath(r);return this.mi(e,s).next((i=>{i||t.removeEntry(s,G.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return D.or([()=>D.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Si{constructor(e,t){this.persistence=e,this.fi=new Mn((r=>Cv(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=zE(this,t)}static Vi(e,t){return new Si(e,t)}Ti(){}Ii(e){return D.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return D.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((i=>i?D.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,(a=>this.wr(e,a,t).next((c=>{c||(r++,i.removeEntry(a,G.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),D.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),D.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),D.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),D.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ii(e.data.value)),t}wr(e,t,r){return D.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return D.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class oc{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Z(),s=Z();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new oc(e,t.fromCache,r,s)}}class nI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return qy()?8:Rv(xe())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.gs(e,t).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ps(e,t,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new nI;return this.ys(e,t,a).next((c=>{if(i.result=c,this.As)return this.ws(e,t,a,c.size)}))})).next((()=>i.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Kn()<=J.DEBUG&&M("QueryEngine","SDK will not create cache indexes for query:",Qn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),D.resolve()):(Kn()<=J.DEBUG&&M("QueryEngine","Query:",Qn(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Kn()<=J.DEBUG&&M("QueryEngine","The SDK decides to create cache indexes for query:",Qn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pt(t))):D.resolve())}gs(e,t){if(Lu(t))return D.resolve(null);let r=pt(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Ia(t,null,"F"),r=pt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const a=Z(...i);return this.fs.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const h=this.bs(t,c);return this.Ss(t,h,a,l.readTime)?this.gs(e,Ia(t,null,"F")):this.Ds(e,h,t,l)}))))})))))}ps(e,t,r,s){return Lu(t)||s.isEqual(G.min())?D.resolve(null):this.fs.getDocuments(e,r).next((i=>{const a=this.bs(t,i);return this.Ss(t,a,r,s)?D.resolve(null):(Kn()<=J.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qn(t)),this.Ds(e,a,t,Ev(s,as)).next((c=>c)))}))}bs(e,t){let r=new we(If(e));return t.forEach(((s,i)=>{Wi(e,i)&&(r=r.add(i))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,t,r){return Kn()<=J.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",Qn(t)),this.fs.getDocumentsMatchingQuery(e,t,Jt.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((i=>(t.forEach((a=>{i=i.insert(a.key,a)})),i)))}}const ac="LocalStore",sI=3e8;class iI{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new ae(X),this.Fs=new Mn((i=>Ja(i)),Xa),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WE(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function oI(n,e,t,r){return new iI(n,e,t,r)}async function Hf(n,e){const t=H(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],c=[];let l=Z();for(const h of s){a.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}for(const h of i){c.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next((h=>({Ns:h,removedBatchIds:a,addedBatchIds:c})))}))}))}function aI(n,e){const t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=t.xs.newChangeBuffer({trackRemovals:!0});return(function(c,l,h,f){const m=h.batch,g=m.keys();let T=D.resolve();return g.forEach((S=>{T=T.next((()=>f.getEntry(l,S))).next((C=>{const P=h.docVersions.get(S);te(P!==null,48541),C.version.compareTo(P)<0&&(m.applyToRemoteDocument(C,h),C.isValidDocument()&&(C.setReadTime(h.commitVersion),f.addEntry(C)))}))})),T.next((()=>c.mutationQueue.removeMutationBatch(l,m)))})(t,r,e,i).next((()=>i.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=Z();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function Wf(n){const e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function cI(n,e){const t=H(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const c=[];e.targetChanges.forEach(((f,m)=>{const g=s.get(m);if(!g)return;c.push(t.li.removeMatchingKeys(i,f.removedDocuments,m).next((()=>t.li.addMatchingKeys(i,f.addedDocuments,m))));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?T=T.withResumeToken(Pe.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),s=s.insert(m,T),(function(C,P,O){return C.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=sI?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(g,T,f)&&c.push(t.li.updateTargetData(i,T))}));let l=Ct(),h=Z();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(lI(i,a,e.documentUpdates).next((f=>{l=f.Bs,h=f.Ls}))),!r.isEqual(G.min())){const f=t.li.getLastRemoteSnapshotVersion(i).next((m=>t.li.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return D.waitFor(c).next((()=>a.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,l,h))).next((()=>l))})).then((i=>(t.vs=s,i)))}function lI(n,e,t){let r=Z(),s=Z();return t.forEach((i=>r=r.add(i))),e.getEntries(n,r).next((i=>{let a=Ct();return t.forEach(((c,l)=>{const h=i.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(G.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):M(ac,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)})),{Bs:a,Ls:s}}))}function uI(n,e){const t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ka),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function hI(n,e){const t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((i=>i?(s=i,D.resolve(s)):t.li.allocateTargetId(r).next((a=>(s=new zt(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Sa(n,e,t){const r=H(n),s=r.vs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!yr(a))throw a;M(ac,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Yu(n,e,t){const r=H(n);let s=G.min(),i=Z();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,h,f){const m=H(l),g=m.Fs.get(f);return g!==void 0?D.resolve(m.vs.get(g)):m.li.getTargetData(h,f)})(r,a,pt(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,c.targetId).next((l=>{i=l}))})).next((()=>r.Cs.getDocumentsMatchingQuery(a,e,t?s:G.min(),t?i:Z()))).next((c=>(dI(r,Yv(e),c),{documents:c,ks:i})))))}function dI(n,e,t){let r=n.Ms.get(e)||G.min();t.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),n.Ms.set(e,r)}class Ju{constructor(){this.activeTargetIds=nE()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fI{constructor(){this.vo=new Ju,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ju,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pI{Mo(e){}shutdown(){}}const Xu="ConnectivityMonitor";class Zu{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){M(Xu,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){M(Xu,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ei=null;function Ca(){return ei===null?ei=(function(){return 268435456+Math.round(2147483648*Math.random())})():ei++,"0x"+ei.toString(16)}const $o="RestConnection",mI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class gI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Ii?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,i){const a=Ca(),c=this.Qo(e,t.toUriEncodedString());M($o,`Sending RPC '${e}' ${a}:`,c,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,s,i);const{host:h}=new URL(c),f=rn(h);return this.zo(e,c,l,r,f).then((m=>(M($o,`Received RPC '${e}' ${a}: `,m),m)),(m=>{throw Sn($o,`RPC '${e}' ${a} failed with error: `,m,"url: ",c,"request:",r),m}))}jo(e,t,r,s,i,a){return this.Wo(e,t,r,s,i)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}Qo(e,t){const r=mI[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class _I{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const De="WebChannelConnection",qr=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Zn extends gI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Zn.c_){const e=Jd();qr(e,Yd.STAT_EVENT,(t=>{t.stat===ma.PROXY?M(De,"STAT_EVENT: detected buffering proxy"):t.stat===ma.NOPROXY&&M(De,"STAT_EVENT: detected no buffering proxy")})),Zn.c_=!0}}zo(e,t,r,s,i){const a=Ca();return new Promise(((c,l)=>{const h=new Kd;h.setWithCredentials(!0),h.listenOnce(Qd.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case si.NO_ERROR:const m=h.getResponseJson();M(De,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),c(m);break;case si.TIMEOUT:M(De,`RPC '${e}' ${a} timed out`),l(new x(k.DEADLINE_EXCEEDED,"Request time out"));break;case si.HTTP_ERROR:const g=h.getStatus();if(M(De,`RPC '${e}' ${a} failed with status:`,g,"response text:",h.getResponseText()),g>0){let T=h.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T?.error;if(S&&S.status&&S.message){const C=(function(O){const V=O.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(V)>=0?V:k.UNKNOWN})(S.status);l(new x(C,S.message))}else l(new x(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new x(k.UNAVAILABLE,"Connection failed."));break;default:z(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{M(De,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(s);M(De,`RPC '${e}' ${a} sending request:`,s),h.send(t,"POST",f,r,15)}))}T_(e,t,r){const s=Ca(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=i.join("");M(De,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,g=!1;const T=new _I({Ho:S=>{g?M(De,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(m||(M(De,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),M(De,`RPC '${e}' stream ${s} sending:`,S),f.send(S))},Jo:()=>f.close()});return qr(f,Hr.EventType.OPEN,(()=>{g||(M(De,`RPC '${e}' stream ${s} transport opened.`),T.i_())})),qr(f,Hr.EventType.CLOSE,(()=>{g||(g=!0,M(De,`RPC '${e}' stream ${s} transport closed`),T.o_(),this.E_(f))})),qr(f,Hr.EventType.ERROR,(S=>{g||(g=!0,Sn(De,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),T.o_(new x(k.UNAVAILABLE,"The operation could not be completed")))})),qr(f,Hr.EventType.MESSAGE,(S=>{if(!g){const C=S.data[0];te(!!C,16349);const P=C,O=P?.error||P[0]?.error;if(O){M(De,`RPC '${e}' stream ${s} received error:`,O);const V=O.status;let L=(function(Q){const v=pe[Q];if(v!==void 0)return Nf(v)})(V),q=O.message;V==="NOT_FOUND"&&q.includes("database")&&q.includes("does not exist")&&q.includes(this.databaseId.database)&&Sn(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),L===void 0&&(L=k.INTERNAL,q="Unknown error status: "+V+" with message "+O.message),g=!0,T.o_(new x(L,q)),f.close()}else M(De,`RPC '${e}' stream ${s} received:`,C),T.__(C)}})),Zn.u_(),setTimeout((()=>{T.s_()}),0),T}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Xd()}}function yI(n){return new Zn(n)}function zo(){return typeof document<"u"?document:null}function Xi(n){return new IE(n,!0)}Zn.c_=!1;class Kf{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&M("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const eh="PersistentStream";class Qf{constructor(e,t,r,s,i,a,c,l){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kf(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(St(t.toString()),St("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new x(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return M(eh,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(M(eh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wI extends Qf{constructor(e,t,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=AE(this.serializer,e),r=(function(i){if(!("targetChange"in i))return G.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?G.min():a.readTime?mt(a.readTime):G.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Ra(this.serializer),t.addTarget=(function(i,a){let c;const l=a.target;if(c=va(l)?{documents:CE(i,l)}:{query:PE(i,l).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Mf(i,a.resumeToken);const h=Ta(i,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(G.min())>0){c.readTime=Ri(i,a.snapshotVersion.toTimestamp());const h=Ta(i,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=DE(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Ra(this.serializer),t.removeTarget=e,this.K_(t)}}class vI extends Qf{constructor(e,t,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=SE(e.writeResults,e.commitTime),r=mt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Ra(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>RE(this.serializer,r)))};this.K_(t)}}class EI{}class II extends EI{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new x(k.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,ba(t,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new x(k.UNKNOWN,i.toString())}))}jo(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.jo(e,ba(t,r),s,a,c,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new x(k.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function TI(n,e,t,r){return new II(n,e,t,r)}class bI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(St(t),this.aa=!1):M("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Cn="RemoteStore";class AI{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((a=>{r.enqueueAndForget((async()=>{Ln(this)&&(M(Cn,"Restarting streams for network reachability change."),await(async function(l){const h=H(l);h.Ea.add(4),await bs(h),h.Va.set("Unknown"),h.Ea.delete(4),await Zi(h)})(this))}))})),this.Va=new bI(r,s)}}async function Zi(n){if(Ln(n))for(const e of n.Ra)await e(!0)}async function bs(n){for(const e of n.Ra)await e(!1)}function Yf(n,e){const t=H(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),hc(t)?uc(t):vr(t).O_()&&lc(t,e))}function cc(n,e){const t=H(n),r=vr(t);t.Ia.delete(e),r.O_()&&Jf(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ln(t)&&t.Va.set("Unknown"))}function lc(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vr(n).Z_(e)}function Jf(n,e){n.da.$e(e),vr(n).X_(e)}function uc(n){n.da=new yE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),vr(n).start(),n.Va.ua()}function hc(n){return Ln(n)&&!vr(n).x_()&&n.Ia.size>0}function Ln(n){return H(n).Ea.size===0}function Xf(n){n.da=void 0}async function RI(n){n.Va.set("Online")}async function SI(n){n.Ia.forEach(((e,t)=>{lc(n,e)}))}async function CI(n,e){Xf(n),hc(n)?(n.Va.ha(e),uc(n)):n.Va.set("Unknown")}async function PI(n,e,t){if(n.Va.set("Online"),e instanceof xf&&e.state===2&&e.cause)try{await(async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.da.removeTarget(c))})(n,e)}catch(r){M(Cn,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ci(n,r)}else if(e instanceof ci?n.da.Xe(e):e instanceof Vf?n.da.st(e):n.da.tt(e),!t.isEqual(G.min()))try{const r=await Wf(n.localStore);t.compareTo(r)>=0&&await(function(i,a){const c=i.da.Tt(a);return c.targetChanges.forEach(((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(l.resumeToken,a))}})),c.targetMismatches.forEach(((l,h)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(Pe.EMPTY_BYTE_STRING,f.snapshotVersion)),Jf(i,l);const m=new zt(f.target,l,h,f.sequenceNumber);lc(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){M(Cn,"Failed to raise snapshot:",r),await Ci(n,r)}}async function Ci(n,e,t){if(!yr(e))throw e;n.Ea.add(1),await bs(n),n.Va.set("Offline"),t||(t=()=>Wf(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{M(Cn,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Zi(n)}))}function Zf(n,e){return e().catch((t=>Ci(n,t,e)))}async function eo(n){const e=H(n),t=tn(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ka;for(;kI(e);)try{const s=await uI(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,DI(e,s)}catch(s){await Ci(e,s)}ep(e)&&tp(e)}function kI(n){return Ln(n)&&n.Ta.length<10}function DI(n,e){n.Ta.push(e);const t=tn(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function ep(n){return Ln(n)&&!tn(n).x_()&&n.Ta.length>0}function tp(n){tn(n).start()}async function OI(n){tn(n).ra()}async function NI(n){const e=tn(n);for(const t of n.Ta)e.ea(t.mutations)}async function VI(n,e,t){const r=n.Ta.shift(),s=tc.from(r,e,t);await Zf(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await eo(n)}async function xI(n,e){e&&tn(n).Y_&&await(async function(r,s){if((function(a){return mE(a)&&a!==k.ABORTED})(s.code)){const i=r.Ta.shift();tn(r).B_(),await Zf(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await eo(r)}})(n,e),ep(n)&&tp(n)}async function th(n,e){const t=H(n);t.asyncQueue.verifyOperationInProgress(),M(Cn,"RemoteStore received new credentials");const r=Ln(t);t.Ea.add(3),await bs(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Zi(t)}async function MI(n,e){const t=H(n);e?(t.Ea.delete(2),await Zi(t)):e||(t.Ea.add(2),await bs(t),t.Va.set("Unknown"))}function vr(n){return n.ma||(n.ma=(function(t,r,s){const i=H(t);return i.sa(),new wI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Zo:RI.bind(null,n),Yo:SI.bind(null,n),t_:CI.bind(null,n),J_:PI.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),hc(n)?uc(n):n.Va.set("Unknown")):(await n.ma.stop(),Xf(n))}))),n.ma}function tn(n){return n.fa||(n.fa=(function(t,r,s){const i=H(t);return i.sa(),new vI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:OI.bind(null,n),t_:xI.bind(null,n),ta:NI.bind(null,n),na:VI.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await eo(n)):(await n.fa.stop(),n.Ta.length>0&&(M(Cn,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class dc{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const a=Date.now()+r,c=new dc(e,t,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fc(n,e){if(St("AsyncQueue",`${e}: ${n}`),yr(n))return new x(k.UNAVAILABLE,`${e}: ${n}`);throw n}class er{static emptySet(e){return new er(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||B.comparator(t.key,r.key):(t,r)=>B.comparator(t.key,r.key),this.keyedMap=Wr(),this.sortedSet=new ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof er)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new er;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class nh{constructor(){this.ga=new ae(B.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):z(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class dr{constructor(e,t,r,s,i,a,c,l,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,s,i){const a=[];return t.forEach((c=>{a.push({type:0,doc:c})})),new dr(e,t,er.emptySet(t),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class LI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class FI{constructor(){this.queries=rh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=H(t),i=s.queries;s.queries=rh(),i.forEach(((a,c)=>{for(const l of c.ba)l.onError(r)}))})(this,new x(k.ABORTED,"Firestore shutting down"))}}function rh(){return new Mn((n=>Ef(n)),Hi)}async function np(n,e){const t=H(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new LI,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const c=fc(a,`Initialization of query '${Qn(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,i),i.ba.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&pc(t)}async function rp(n,e){const t=H(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function UI(n,e){const t=H(n);let r=!1;for(const s of e){const i=s.query,a=t.queries.get(i);if(a){for(const c of a.ba)c.Fa(s)&&(r=!0);a.wa=s}}r&&pc(t)}function BI(n,e,t){const r=H(n),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(t);r.queries.delete(e)}function pc(n){n.Ca.forEach((e=>{e.next()}))}var Pa,sh;(sh=Pa||(Pa={})).Ma="default",sh.Cache="cache";class sp{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new dr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=dr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pa.Cache}}class ip{constructor(e){this.key=e}}class op{constructor(e){this.key=e}}class jI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Z(),this.mutatedKeys=Z(),this.eu=If(e),this.tu=new er(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new nh,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,m)=>{const g=s.get(f),T=Wi(this.query,m)?m:null,S=!!g&&this.mutatedKeys.has(g.key),C=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let P=!1;g&&T?g.data.isEqual(T.data)?S!==C&&(r.track({type:3,doc:T}),P=!0):this.su(g,T)||(r.track({type:2,doc:T}),P=!0,(l&&this.eu(T,l)>0||h&&this.eu(T,h)<0)&&(c=!0)):!g&&T?(r.track({type:0,doc:T}),P=!0):g&&!T&&(r.track({type:1,doc:g}),P=!0,(l||h)&&(c=!0)),P&&(T?(a=a.add(T),i=C?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Ss:c,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((f,m)=>(function(T,S){const C=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z(20277,{Vt:P})}};return C(T)-C(S)})(f.type,m.type)||this.eu(f.doc,m.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],l=this.Ya.size===0&&this.current&&!s?1:0,h=l!==this.Xa;return this.Xa=l,a.length!==0||h?{snapshot:new dr(this.query,e.tu,i,a,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nh,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Z(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new op(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new ip(r))})),t}cu(e){this.Za=e.ks,this.Ya=Z();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return dr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const mc="SyncEngine";class qI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $I{constructor(e){this.key=e,this.hu=!1}}class zI{constructor(e,t,r,s,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Mn((c=>Ef(c)),Hi),this.Iu=new Map,this.Eu=new Set,this.Ru=new ae(B.comparator),this.Au=new Map,this.Vu=new sc,this.du={},this.mu=new Map,this.fu=hr.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GI(n,e,t=!0){const r=dp(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ap(r,e,t,!0),s}async function HI(n,e){const t=dp(n);await ap(t,e,!0,!1)}async function ap(n,e,t,r){const s=await hI(n.localStore,pt(e)),i=s.targetId,a=n.sharedClientState.addLocalQueryTarget(i,t);let c;return r&&(c=await WI(n,e,i,a==="current",s.resumeToken)),n.isPrimaryClient&&t&&Yf(n.remoteStore,s),c}async function WI(n,e,t,r,s){n.pu=(m,g,T)=>(async function(C,P,O,V){let L=P.view.ru(O);L.Ss&&(L=await Yu(C.localStore,P.query,!1).then((({documents:v})=>P.view.ru(v,L))));const q=V&&V.targetChanges.get(P.targetId),W=V&&V.targetMismatches.get(P.targetId)!=null,Q=P.view.applyChanges(L,C.isPrimaryClient,q,W);return oh(C,P.targetId,Q.au),Q.snapshot})(n,m,g,T);const i=await Yu(n.localStore,e,!0),a=new jI(e,i.ks),c=a.ru(i.documents),l=Ts.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),h=a.applyChanges(c,n.isPrimaryClient,l);oh(n,t,h.au);const f=new qI(e,t,a);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function KI(n,e,t){const r=H(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!Hi(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Sa(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&cc(r.remoteStore,s.targetId),ka(r,s.targetId)})).catch(_r)):(ka(r,s.targetId),await Sa(r.localStore,s.targetId,!0))}async function QI(n,e){const t=H(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cc(t.remoteStore,r.targetId))}async function YI(n,e,t){const r=rT(n);try{const s=await(function(a,c){const l=H(a),h=se.now(),f=c.reduce(((T,S)=>T.add(S.key)),Z());let m,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let S=Ct(),C=Z();return l.xs.getEntries(T,f).next((P=>{S=P,S.forEach(((O,V)=>{V.isValidDocument()||(C=C.add(O))}))})).next((()=>l.localDocuments.getOverlayedDocuments(T,S))).next((P=>{m=P;const O=[];for(const V of c){const L=uE(V,m.get(V.key).overlayedDocument);L!=null&&O.push(new an(V.key,L,ff(L.value.mapValue),Ue.exists(!0)))}return l.mutationQueue.addMutationBatch(T,h,O,c)})).next((P=>{g=P;const O=P.applyToLocalDocumentSet(m,C);return l.documentOverlayCache.saveOverlays(T,P.batchId,O)}))})).then((()=>({batchId:g.batchId,changes:bf(m)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(a,c,l){let h=a.du[a.currentUser.toKey()];h||(h=new ae(X)),h=h.insert(c,l),a.du[a.currentUser.toKey()]=h})(r,s.batchId,t),await As(r,s.changes),await eo(r.remoteStore)}catch(s){const i=fc(s,"Failed to persist write");t.reject(i)}}async function cp(n,e){const t=H(n);try{const r=await cI(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const a=t.Au.get(i);a&&(te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?te(a.hu,14607):s.removedDocuments.size>0&&(te(a.hu,42227),a.hu=!1))})),await As(t,r,e)}catch(r){await _r(r)}}function ih(n,e,t){const r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(a,c){const l=H(a);l.onlineState=c;let h=!1;l.queries.forEach(((f,m)=>{for(const g of m.ba)g.va(c)&&(h=!0)})),h&&pc(l)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JI(n,e,t){const r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new ae(B.comparator);a=a.insert(i,Ne.newNoDocument(i,G.min()));const c=Z().add(i),l=new Ji(G.min(),new Map,new ae(X),a,c);await cp(r,l),r.Ru=r.Ru.remove(i),r.Au.delete(e),gc(r)}else await Sa(r.localStore,e,!1).then((()=>ka(r,e,t))).catch(_r)}async function XI(n,e){const t=H(n),r=e.batch.batchId;try{const s=await aI(t.localStore,e);up(t,r,null),lp(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await As(t,s)}catch(s){await _r(s)}}async function ZI(n,e,t){const r=H(n);try{const s=await(function(a,c){const l=H(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return l.mutationQueue.lookupMutationBatch(h,c).next((m=>(te(m!==null,37113),f=m.keys(),l.mutationQueue.removeMutationBatch(h,m)))).next((()=>l.mutationQueue.performConsistencyCheck(h))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(h,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>l.localDocuments.getDocuments(h,f)))}))})(r.localStore,e);up(r,e,t),lp(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await As(r,s)}catch(s){await _r(s)}}function lp(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function up(n,e,t){const r=H(n);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function ka(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||hp(n,r)}))}function hp(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(cc(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),gc(n))}function oh(n,e,t){for(const r of t)r instanceof ip?(n.Vu.addReference(r.key,e),eT(n,r)):r instanceof op?(M(mc,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||hp(n,r.key)):z(19791,{wu:r})}function eT(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(M(mc,"New document in limbo: "+t),n.Eu.add(r),gc(n))}function gc(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new B(ie.fromString(e)),r=n.fu.next();n.Au.set(r,new $I(t)),n.Ru=n.Ru.insert(t,r),Yf(n.remoteStore,new zt(pt(Za(t.path)),r,"TargetPurposeLimboResolution",$i.ce))}}async function As(n,e,t){const r=H(n),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{a.push(r.pu(l,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const f=h?!h.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(h){s.push(h);const f=oc.Es(l.targetId,h);i.push(f)}})))})),await Promise.all(a),r.Pu.J_(s),await(async function(l,h){const f=H(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>D.forEach(h,(g=>D.forEach(g.Ts,(T=>f.persistence.referenceDelegate.addReference(m,g.targetId,T))).next((()=>D.forEach(g.Is,(T=>f.persistence.referenceDelegate.removeReference(m,g.targetId,T)))))))))}catch(m){if(!yr(m))throw m;M(ac,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const T=f.vs.get(g),S=T.snapshotVersion,C=T.withLastLimboFreeSnapshotVersion(S);f.vs=f.vs.insert(g,C)}}})(r.localStore,i))}async function tT(n,e){const t=H(n);if(!t.currentUser.isEqual(e)){M(mc,"User change. New user:",e.toKey());const r=await Hf(t.localStore,e);t.currentUser=e,(function(i,a){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new x(k.CANCELLED,a))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await As(t,r.Ns)}}function nT(n,e){const t=H(n),r=t.Au.get(e);if(r&&r.hu)return Z().add(r.key);{let s=Z();const i=t.Iu.get(e);if(!i)return s;for(const a of i){const c=t.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function dp(n){const e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JI.bind(null,e),e.Pu.J_=UI.bind(null,e.eventManager),e.Pu.yu=BI.bind(null,e.eventManager),e}function rT(n){const e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZI.bind(null,e),e}class Pi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xi(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return oI(this.persistence,new rI,e.initialUser,this.serializer)}Cu(e){return new Gf(ic.Vi,this.serializer)}Du(e){return new fI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pi.provider={build:()=>new Pi};class sT extends Pi{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){te(this.persistence.referenceDelegate instanceof Si,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qE(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?$e.withCacheSize(this.cacheSizeBytes):$e.DEFAULT;return new Gf((r=>Si.Vi(r,t)),this.serializer)}}class Da{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ih(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tT.bind(null,this.syncEngine),await MI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FI})()}createDatastore(e){const t=Xi(e.databaseInfo.databaseId),r=yI(e.databaseInfo);return TI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,i,a,c){return new AI(r,s,i,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>ih(this.syncEngine,t,0)),(function(){return Zu.v()?new Zu:new pI})())}createSyncEngine(e,t){return(function(s,i,a,c,l,h,f){const m=new zI(s,i,a,c,l,h);return f&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=H(t);M(Cn,"RemoteStore shutting down."),r.Ea.add(5),await bs(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Da.provider={build:()=>new Da};class fp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):St("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const nn="FirestoreClient";class iT{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=Oe.UNAUTHENTICATED,this.clientId=Wa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{M(nn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(M(nn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=fc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Go(n,e){n.asyncQueue.verifyOperationInProgress(),M(nn,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Hf(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ah(n,e){n.asyncQueue.verifyOperationInProgress();const t=await oT(n);M(nn,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>th(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>th(e.remoteStore,s))),n._onlineComponents=e}async function oT(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){M(nn,"Using user provided OfflineComponentProvider");try{await Go(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Sn("Error using user provided cache. Falling back to memory cache: "+t),await Go(n,new Pi)}}else M(nn,"Using default OfflineComponentProvider"),await Go(n,new sT(void 0));return n._offlineComponents}async function pp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(M(nn,"Using user provided OnlineComponentProvider"),await ah(n,n._uninitializedComponentsProvider._online)):(M(nn,"Using default OnlineComponentProvider"),await ah(n,new Da))),n._onlineComponents}function aT(n){return pp(n).then((e=>e.syncEngine))}async function mp(n){const e=await pp(n),t=e.eventManager;return t.onListen=GI.bind(null,e.syncEngine),t.onUnlisten=KI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QI.bind(null,e.syncEngine),t}function cT(n,e,t={}){const r=new bt;return n.asyncQueue.enqueueAndForget((async()=>(function(i,a,c,l,h){const f=new fp({next:g=>{f.Nu(),a.enqueueAndForget((()=>rp(i,m)));const T=g.docs.has(c);!T&&g.fromCache?h.reject(new x(k.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&l&&l.source==="server"?h.reject(new x(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new sp(Za(c.path),f,{includeMetadataChanges:!0,Ka:!0});return np(i,m)})(await mp(n),n.asyncQueue,e,t,r))),r.promise}function lT(n,e,t={}){const r=new bt;return n.asyncQueue.enqueueAndForget((async()=>(function(i,a,c,l,h){const f=new fp({next:g=>{f.Nu(),a.enqueueAndForget((()=>rp(i,m))),g.fromCache&&l.source==="server"?h.reject(new x(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new sp(c,f,{includeMetadataChanges:!0,Ka:!0});return np(i,m)})(await mp(n),n.asyncQueue,e,t,r))),r.promise}function uT(n,e){const t=new bt;return n.asyncQueue.enqueueAndForget((async()=>YI(await aT(n),e,t))),t.promise}function gp(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const hT="ComponentProvider",ch=new Map;function dT(n,e,t,r,s){return new Dv(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,gp(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}const _p="firestore.googleapis.com",lh=!0;class uh{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new x(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_p,this.ssl=lh}else this.host=e.host,this.ssl=e.ssl??lh;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zf;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BE)throw new x(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gp(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new x(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new x(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new x(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class to{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new uv;switch(r.type){case"firstParty":return new pv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=ch.get(t);r&&(M(hT,"Removing Datastore"),ch.delete(t),r.terminate())})(this),Promise.resolve()}}function fT(n,e,t,r={}){n=tt(n,to);const s=rn(e),i=n._getSettings(),a={...i,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&($a(`https://${c}`),za("Firestore",!0)),i.host!==_p&&i.host!==c&&Sn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!Yt(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Oe.MOCK_USER;else{h=Ld(r.mockUserToken,n._app?.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new x(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Oe(m)}n._authCredentials=new hv(new ef(h,f))}}class Fn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fn(this.firestore,e,this._query)}}class fe{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fe(this.firestore,e,this._key)}toJSON(){return{type:fe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Es(t,fe._jsonSchema))return new fe(e,r||null,new B(ie.fromString(t.referencePath)))}}fe._jsonSchemaVersion="firestore/documentReference/1.0",fe._jsonSchema={type:ge("string",fe._jsonSchemaVersion),referencePath:ge("string")};class Qt extends Fn{constructor(e,t,r){super(e,t,Za(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fe(this.firestore,null,new B(e))}withConverter(e){return new Qt(this.firestore,e,this._path)}}function ki(n,e,...t){if(n=ne(n),tf("collection","path",e),n instanceof to){const r=ie.fromString(e,...t);return Tu(r),new Qt(n,null,r)}{if(!(n instanceof fe||n instanceof Qt))throw new x(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ie.fromString(e,...t));return Tu(r),new Qt(n.firestore,null,r)}}function ms(n,e,...t){if(n=ne(n),arguments.length===1&&(e=Wa.newId()),tf("doc","path",e),n instanceof to){const r=ie.fromString(e,...t);return Iu(r),new fe(n,null,new B(r))}{if(!(n instanceof fe||n instanceof Qt))throw new x(k.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ie.fromString(e,...t));return Iu(r),new fe(n.firestore,n instanceof Qt?n.converter:null,new B(r))}}const hh="AsyncQueue";class dh{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kf(this,"async_queue_retry"),this._c=()=>{const r=zo();r&&M(hh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=zo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=zo();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new bt;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!yr(e))throw e;M(hh,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,St("INTERNAL UNHANDLED ERROR: ",fh(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=dc.createAndSchedule(this,e,t,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&z(47125,{Pc:fh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function fh(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class cn extends to{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new dh,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dh(e),this._firestoreClient=void 0,await e}}}function pT(n,e){const t=typeof n=="object"?n:vs(),r=typeof n=="string"?n:Ii,s=sn(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Vd("firestore");i&&fT(s,...i)}return s}function no(n){if(n._terminated)throw new x(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mT(n),n._firestoreClient}function mT(n){const e=n._freezeSettings(),t=dT(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new iT(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(n._componentsProvider))}class Ze{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ze(Pe.fromBase64String(e))}catch(t){throw new x(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ze(Pe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ze._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Es(e,Ze._jsonSchema))return Ze.fromBase64String(e.bytes)}}Ze._jsonSchemaVersion="firestore/bytes/1.0",Ze._jsonSchema={type:ge("string",Ze._jsonSchemaVersion),bytes:ge("string")};class ro{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ce(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class so{constructor(e){this._methodName=e}}class gt{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gt._jsonSchemaVersion}}static fromJSON(e){if(Es(e,gt._jsonSchema))return new gt(e.latitude,e.longitude)}}gt._jsonSchemaVersion="firestore/geoPoint/1.0",gt._jsonSchema={type:ge("string",gt._jsonSchemaVersion),latitude:ge("number"),longitude:ge("number")};class it{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:it._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Es(e,it._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new it(e.vectorValues);throw new x(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}it._jsonSchemaVersion="firestore/vectorValue/1.0",it._jsonSchema={type:ge("string",it._jsonSchemaVersion),vectorValues:ge("object")};const gT=/^__.*__$/;class _T{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new an(e,this.data,this.fieldMask,t,this.fieldTransforms):new Is(e,this.data,t,this.fieldTransforms)}}class yp{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new an(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wp(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{dataSource:n})}}class _c{constructor(e,t,r,s,i,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new _c({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Di(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(wp(this.dataSource)&&gT.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class yT{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Xi(e)}createContext(e,t,r,s=!1){return new _c({dataSource:e,methodName:t,targetDoc:r,path:Ce.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rs(n){const e=n._freezeSettings(),t=Xi(n._databaseId);return new yT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yc(n,e,t,r,s,i={}){const a=n.createContext(i.merge||i.mergeFields?2:0,e,t,s);vc("Data must be an object, but it was:",a,r);const c=Ip(r,a);let l,h;if(i.merge)l=new Ke(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=fr(e,m,t);if(!a.contains(g))throw new x(k.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Ap(f,g)||f.push(g)}l=new Ke(f),h=a.fieldTransforms.filter((m=>l.covers(m.field)))}else l=null,h=a.fieldTransforms;return new _T(new ze(c),l,h)}class io extends so{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof io}}class wc extends so{_toFieldTransform(e){return new oE(e.path,new ds)}isEqual(e){return e instanceof wc}}function vp(n,e,t,r){const s=n.createContext(1,e,t);vc("Data must be an object, but it was:",s,r);const i=[],a=ze.empty();on(r,((l,h)=>{const f=bp(e,l,t);h=ne(h);const m=s.childContextForFieldPath(f);if(h instanceof io)i.push(f);else{const g=Ss(h,m);g!=null&&(i.push(f),a.set(f,g))}}));const c=new Ke(i);return new yp(a,c,s.fieldTransforms)}function Ep(n,e,t,r,s,i){const a=n.createContext(1,e,t),c=[fr(e,r,t)],l=[s];if(i.length%2!=0)throw new x(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(fr(e,i[g])),l.push(i[g+1]);const h=[],f=ze.empty();for(let g=c.length-1;g>=0;--g)if(!Ap(h,c[g])){const T=c[g];let S=l[g];S=ne(S);const C=a.childContextForFieldPath(T);if(S instanceof io)h.push(T);else{const P=Ss(S,C);P!=null&&(h.push(T),f.set(T,P))}}const m=new Ke(h);return new yp(f,m,a.fieldTransforms)}function wT(n,e,t,r=!1){return Ss(t,n.createContext(r?4:3,e))}function Ss(n,e){if(Tp(n=ne(n)))return vc("Unsupported field value:",e,n),Ip(n,e);if(n instanceof so)return(function(r,s){if(!wp(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const c of r){let l=Ss(c,s.childContextForArray(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}})(n,e)}return(function(r,s){if((r=ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=se.fromDate(r);return{timestampValue:Ri(s.serializer,i)}}if(r instanceof se){const i=new se(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ri(s.serializer,i)}}if(r instanceof gt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ze)return{bytesValue:Mf(s.serializer,r._byteString)};if(r instanceof fe){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rc(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof it)return(function(a,c){const l=a instanceof it?a.toArray():a;return{mapValue:{fields:{[hf]:{stringValue:df},[Ti]:{arrayValue:{values:l.map((f=>{if(typeof f!="number")throw c.createError("VectorValues must only contain numeric values.");return ec(c.serializer,f)}))}}}}}})(r,s);if($f(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${qi(r)}`)})(n,e)}function Ip(n,e){const t={};return sf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):on(n,((r,s)=>{const i=Ss(s,e.childContextForField(r));i!=null&&(t[r]=i)})),{mapValue:{fields:t}}}function Tp(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof se||n instanceof gt||n instanceof Ze||n instanceof fe||n instanceof so||n instanceof it||$f(n))}function vc(n,e,t){if(!Tp(t)||!nf(t)){const r=qi(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function fr(n,e,t){if((e=ne(e))instanceof ro)return e._internalPath;if(typeof e=="string")return bp(n,e);throw Di("Field path arguments must be of type string or ",n,!1,void 0,t)}const vT=new RegExp("[~\\*/\\[\\]]");function bp(n,e,t){if(e.search(vT)>=0)throw Di(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ro(...e.split("."))._internalPath}catch{throw Di(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Di(n,e,t,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new x(k.INVALID_ARGUMENT,c+n+l)}function Ap(n,e){return n.some((t=>t.isEqual(e)))}class ET{convertValue(e,t="none"){switch(en(e)){case 0:return null;case 1:return e.booleanValue;case 2:return de(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return on(e,((s,i)=>{r[s]=this.convertValue(i,t)})),r}convertVectorValue(e){const t=e.fields?.[Ti].arrayValue?.values?.map((r=>de(r.doubleValue)));return new it(t)}convertGeoPoint(e){return new gt(de(e.latitude),de(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gi(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cs(e));default:return null}}convertTimestamp(e){const t=Xt(e);return new se(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ie.fromString(e);te(qf(r),9688,{name:e});const s=new ls(r.get(1),r.get(3)),i=new B(r.popFirst(5));return s.isEqual(t)||St(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}class Rp extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ze(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fe(this.firestore,null,t)}}function YC(){return new wc("serverTimestamp")}const ph="@firebase/firestore",mh="4.11.0";class Sp{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(fr("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class IT extends Sp{data(){return super.data()}}function TT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ec{}class Cp extends Ec{}function bT(n,e,...t){let r=[];e instanceof Ec&&r.push(e),r=r.concat(t),(function(i){const a=i.filter((l=>l instanceof Tc)).length,c=i.filter((l=>l instanceof Ic)).length;if(a>1||a>0&&c>0)throw new x(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Ic extends Cp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ic(e,t,r)}_apply(e){const t=this._parse(e);return Pp(e._query,t),new Fn(e.firestore,e.converter,Ea(e._query,t))}_parse(e){const t=Rs(e.firestore);return(function(i,a,c,l,h,f,m){let g;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new x(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){_h(m,f);const S=[];for(const C of m)S.push(gh(l,i,C));g={arrayValue:{values:S}}}else g=gh(l,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||_h(m,f),g=wT(c,a,m,f==="in"||f==="not-in");return me.create(h,f,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Tc extends Ec{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tc(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:at.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,i){let a=s;const c=i.getFlattenedFilters();for(const l of c)Pp(a,l),a=Ea(a,l)})(e._query,t),new Fn(e.firestore,e.converter,Ea(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bc extends Cp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bc(e,t)}_apply(e){const t=(function(s,i,a){if(s.startAt!==null)throw new x(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new x(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hs(i,a)})(e._query,this._field,this._direction);return new Fn(e.firestore,e.converter,Qv(e._query,t))}}function AT(n,e="asc"){const t=e,r=fr("orderBy",n);return bc._create(r,t)}function gh(n,e,t){if(typeof(t=ne(t))=="string"){if(t==="")throw new x(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vf(e)&&t.indexOf("/")!==-1)throw new x(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ie.fromString(t));if(!B.isDocumentKey(r))throw new x(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Du(n,new B(r))}if(t instanceof fe)return Du(n,t._key);throw new x(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qi(t)}.`)}function _h(n,e){if(!Array.isArray(n)||n.length===0)throw new x(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pp(n,e){const t=(function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new x(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ac(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Qr{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bn extends Sp{constructor(e,t,r,s,i,a){super(e,t,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new li(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fr("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new x(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=bn._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}bn._jsonSchemaVersion="firestore/documentSnapshot/1.0",bn._jsonSchema={type:ge("string",bn._jsonSchemaVersion),bundleSource:ge("string","DocumentSnapshot"),bundleName:ge("string"),bundle:ge("string")};class li extends bn{data(e={}){return super.data(e)}}class tr{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Qr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new li(this._firestore,this._userDataWriter,r.key,r,new Qr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((c=>{const l=new li(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Qr(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new li(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Qr(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:RT(c.type),doc:l,oldIndex:h,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new x(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wa.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z(61501,{type:n})}}tr._jsonSchemaVersion="firestore/querySnapshot/1.0",tr._jsonSchema={type:ge("string",tr._jsonSchemaVersion),bundleSource:ge("string","QuerySnapshot"),bundleName:ge("string"),bundle:ge("string")};class ST{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rs(e)}set(e,t,r){this._verifyNotCommitted();const s=Ho(e,this._firestore),i=Ac(s.converter,t,r),a=yc(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,Ue.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const i=Ho(e,this._firestore);let a;return a=typeof(t=ne(t))=="string"||t instanceof ro?Ep(this._dataReader,"WriteBatch.update",i._key,t,r,s):vp(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(a.toMutation(i._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ho(e,this._firestore);return this._mutations=this._mutations.concat(new Yi(t._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new x(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ho(n,e){if((n=ne(n)).firestore!==e)throw new x(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function yh(n){n=tt(n,fe);const e=tt(n.firestore,cn),t=no(e);return cT(t,n._key).then((r=>kT(e,n,r)))}function wh(n){n=tt(n,Fn);const e=tt(n.firestore,cn),t=no(e),r=new Rp(e);return TT(n._query),lT(t,n._query).then((s=>new tr(e,r,n,s)))}function CT(n,e,t){n=tt(n,fe);const r=tt(n.firestore,cn),s=Ac(n.converter,e,t),i=Rs(r);return Cs(r,[yc(i,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Ue.none())])}function kp(n,e,t,...r){n=tt(n,fe);const s=tt(n.firestore,cn),i=Rs(s);let a;return a=typeof(e=ne(e))=="string"||e instanceof ro?Ep(i,"updateDoc",n._key,e,t,r):vp(i,"updateDoc",n._key,e),Cs(s,[a.toMutation(n._key,Ue.exists(!0))])}function Dp(n){return Cs(tt(n.firestore,cn),[new Yi(n._key,Ue.none())])}function PT(n,e){const t=tt(n.firestore,cn),r=ms(n),s=Ac(n.converter,e),i=Rs(n.firestore);return Cs(t,[yc(i,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then((()=>r))}function Cs(n,e){const t=no(n);return uT(t,e)}function kT(n,e,t){const r=t.docs.get(e._key),s=new Rp(n);return new bn(n,s,e._key,r,new Qr(t.hasPendingWrites,t.fromCache),e.converter)}function JC(n){return n=tt(n,cn),no(n),new ST(n,(e=>Cs(n,e)))}(function(e,t=!0){lv(xn),ot(new et("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new cn(new dv(r.getProvider("auth-internal")),new mv(a,r.getProvider("app-check-internal")),Ov(a,s),a);return i={useFetchStreams:t,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Ge(ph,mh,e),Ge(ph,mh,"esm2020")})();var DT="firebase",OT="12.9.0";Ge(DT,OT,"app");const Op="@firebase/installations",Rc="0.6.19";const Np=1e4,Vp=`w:${Rc}`,xp="FIS_v2",NT="https://firebaseinstallations.googleapis.com/v1",VT=3600*1e3,xT="installations",MT="Installations";const LT={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Pn=new Vn(xT,MT,LT);function Mp(n){return n instanceof nt&&n.code.includes("request-failed")}function Lp({projectId:n}){return`${NT}/projects/${n}/installations`}function Fp(n){return{token:n.token,requestStatus:2,expiresIn:UT(n.expiresIn),creationTime:Date.now()}}async function Up(n,e){const r=(await e.json()).error;return Pn.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Bp({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function FT(n,{refreshToken:e}){const t=Bp(n);return t.append("Authorization",BT(e)),t}async function jp(n){const e=await n();return e.status>=500&&e.status<600?n():e}function UT(n){return Number(n.replace("s","000"))}function BT(n){return`${xp} ${n}`}async function jT({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Lp(n),s=Bp(n),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={fid:t,authVersion:xp,appId:n.appId,sdkVersion:Vp},c={method:"POST",headers:s,body:JSON.stringify(a)},l=await jp(()=>fetch(r,c));if(l.ok){const h=await l.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:Fp(h.authToken)}}else throw await Up("Create Installation",l)}function qp(n){return new Promise(e=>{setTimeout(e,n)})}function qT(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const $T=/^[cdef][\w-]{21}$/,Oa="";function zT(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=GT(n);return $T.test(t)?t:Oa}catch{return Oa}}function GT(n){return qT(n).substr(0,22)}function oo(n){return`${n.appName}!${n.appId}`}const $p=new Map;function zp(n,e){const t=oo(n);Gp(t,e),HT(t,e)}function Gp(n,e){const t=$p.get(n);if(t)for(const r of t)r(e)}function HT(n,e){const t=WT();t&&t.postMessage({key:n,fid:e}),KT()}let Tn=null;function WT(){return!Tn&&"BroadcastChannel"in self&&(Tn=new BroadcastChannel("[Firebase] FID Change"),Tn.onmessage=n=>{Gp(n.data.key,n.data.fid)}),Tn}function KT(){$p.size===0&&Tn&&(Tn.close(),Tn=null)}const QT="firebase-installations-database",YT=1,kn="firebase-installations-store";let Wo=null;function Sc(){return Wo||(Wo=$d(QT,YT,{upgrade:(n,e)=>{e===0&&n.createObjectStore(kn)}})),Wo}async function Oi(n,e){const t=oo(n),s=(await Sc()).transaction(kn,"readwrite"),i=s.objectStore(kn),a=await i.get(t);return await i.put(e,t),await s.done,(!a||a.fid!==e.fid)&&zp(n,e.fid),e}async function Hp(n){const e=oo(n),r=(await Sc()).transaction(kn,"readwrite");await r.objectStore(kn).delete(e),await r.done}async function ao(n,e){const t=oo(n),s=(await Sc()).transaction(kn,"readwrite"),i=s.objectStore(kn),a=await i.get(t),c=e(a);return c===void 0?await i.delete(t):await i.put(c,t),await s.done,c&&(!a||a.fid!==c.fid)&&zp(n,c.fid),c}async function Cc(n){let e;const t=await ao(n.appConfig,r=>{const s=JT(r),i=XT(n,s);return e=i.registrationPromise,i.installationEntry});return t.fid===Oa?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function JT(n){const e=n||{fid:zT(),registrationStatus:0};return Wp(e)}function XT(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Pn.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=ZT(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:eb(n)}:{installationEntry:e}}async function ZT(n,e){try{const t=await jT(n,e);return Oi(n.appConfig,t)}catch(t){throw Mp(t)&&t.customData.serverCode===409?await Hp(n.appConfig):await Oi(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function eb(n){let e=await vh(n.appConfig);for(;e.registrationStatus===1;)await qp(100),e=await vh(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Cc(n);return r||t}return e}function vh(n){return ao(n,e=>{if(!e)throw Pn.create("installation-not-found");return Wp(e)})}function Wp(n){return tb(n)?{fid:n.fid,registrationStatus:0}:n}function tb(n){return n.registrationStatus===1&&n.registrationTime+Np<Date.now()}async function nb({appConfig:n,heartbeatServiceProvider:e},t){const r=rb(n,t),s=FT(n,t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={installation:{sdkVersion:Vp,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},l=await jp(()=>fetch(r,c));if(l.ok){const h=await l.json();return Fp(h)}else throw await Up("Generate Auth Token",l)}function rb(n,{fid:e}){return`${Lp(n)}/${e}/authTokens:generate`}async function Pc(n,e=!1){let t;const r=await ao(n.appConfig,i=>{if(!Kp(i))throw Pn.create("not-registered");const a=i.authToken;if(!e&&ob(a))return i;if(a.requestStatus===1)return t=sb(n,e),i;{if(!navigator.onLine)throw Pn.create("app-offline");const c=cb(i);return t=ib(n,c),c}});return t?await t:r.authToken}async function sb(n,e){let t=await Eh(n.appConfig);for(;t.authToken.requestStatus===1;)await qp(100),t=await Eh(n.appConfig);const r=t.authToken;return r.requestStatus===0?Pc(n,e):r}function Eh(n){return ao(n,e=>{if(!Kp(e))throw Pn.create("not-registered");const t=e.authToken;return lb(t)?{...e,authToken:{requestStatus:0}}:e})}async function ib(n,e){try{const t=await nb(n,e),r={...e,authToken:t};return await Oi(n.appConfig,r),t}catch(t){if(Mp(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Hp(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Oi(n.appConfig,r)}throw t}}function Kp(n){return n!==void 0&&n.registrationStatus===2}function ob(n){return n.requestStatus===2&&!ab(n)}function ab(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+VT}function cb(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function lb(n){return n.requestStatus===1&&n.requestTime+Np<Date.now()}async function ub(n){const e=n,{installationEntry:t,registrationPromise:r}=await Cc(e);return r?r.catch(console.error):Pc(e).catch(console.error),t.fid}async function hb(n,e=!1){const t=n;return await db(t),(await Pc(t,e)).token}async function db(n){const{registrationPromise:e}=await Cc(n);e&&await e}function fb(n){if(!n||!n.options)throw Ko("App Configuration");if(!n.name)throw Ko("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Ko(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Ko(n){return Pn.create("missing-app-config-values",{valueName:n})}const Qp="installations",pb="installations-internal",mb=n=>{const e=n.getProvider("app").getImmediate(),t=fb(e),r=sn(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},gb=n=>{const e=n.getProvider("app").getImmediate(),t=sn(e,Qp).getImmediate();return{getId:()=>ub(t),getToken:s=>hb(t,s)}};function _b(){ot(new et(Qp,mb,"PUBLIC")),ot(new et(pb,gb,"PRIVATE"))}_b();Ge(Op,Rc);Ge(Op,Rc,"esm2020");const Ni="analytics",yb="firebase_id",wb="origin",vb=60*1e3,Eb="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",kc="https://www.googletagmanager.com/gtag/js";const Be=new ji("@firebase/analytics");const Ib={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ye=new Vn("analytics","Analytics",Ib);function Tb(n){if(!n.startsWith(kc)){const e=Ye.create("invalid-gtag-resource",{gtagURL:n});return Be.warn(e.message),""}return n}function Yp(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function bb(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Ab(n,e){const t=bb("firebase-js-sdk-policy",{createScriptURL:Tb}),r=document.createElement("script"),s=`${kc}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Rb(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function Sb(n,e,t,r,s,i){const a=r[s];try{if(a)await e[a];else{const l=(await Yp(t)).find(h=>h.measurementId===s);l&&await e[l.appId]}}catch(c){Be.error(c)}n("config",s,i)}async function Cb(n,e,t,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await Yp(t);for(const l of a){const h=c.find(m=>m.measurementId===l),f=h&&e[h.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),n("event",r,s||{})}catch(i){Be.error(i)}}function Pb(n,e,t,r){async function s(i,...a){try{if(i==="event"){const[c,l]=a;await Cb(n,e,t,c,l)}else if(i==="config"){const[c,l]=a;await Sb(n,e,t,r,c,l)}else if(i==="consent"){const[c,l]=a;n("consent",c,l)}else if(i==="get"){const[c,l,h]=a;n("get",c,l,h)}else if(i==="set"){const[c]=a;n("set",c)}else n(i,...a)}catch(c){Be.error(c)}}return s}function kb(n,e,t,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=Pb(i,n,e,t),{gtagCore:i,wrappedGtag:window[s]}}function Db(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(kc)&&t.src.includes(n))return t;return null}const Ob=30,Nb=1e3;class Vb{constructor(e={},t=Nb){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Jp=new Vb;function xb(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Mb(n){const{appId:e,apiKey:t}=n,r={method:"GET",headers:xb(t)},s=Eb.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let a="";try{const c=await i.json();c.error?.message&&(a=c.error.message)}catch{}throw Ye.create("config-fetch-failed",{httpStatus:i.status,responseMessage:a})}return i.json()}async function Lb(n,e=Jp,t){const{appId:r,apiKey:s,measurementId:i}=n.options;if(!r)throw Ye.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Ye.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Bb;return setTimeout(async()=>{c.abort()},vb),Xp({appId:r,apiKey:s,measurementId:i},a,c,e)}async function Xp(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=Jp){const{appId:i,measurementId:a}=n;try{await Fb(r,e)}catch(c){if(a)return Be.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:a};throw c}try{const c=await Mb(n);return s.deleteThrottleMetadata(i),c}catch(c){const l=c;if(!Ub(l)){if(s.deleteThrottleMetadata(i),a)return Be.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:a};throw c}const h=Number(l?.customData?.httpStatus)===503?uu(t,s.intervalMillis,Ob):uu(t,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:t+1};return s.setThrottleMetadata(i,f),Be.debug(`Calling attemptFetch again in ${h} millis`),Xp(n,f,r,s)}}function Fb(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(i),r(Ye.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Ub(n){if(!(n instanceof nt)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Bb{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function jb(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const i=await e,a={...r,send_to:i};n("event",t,a)}}async function qb(n,e,t,r){if(r&&r.global){const s={};for(const i of Object.keys(t))s[`user_properties.${i}`]=t[i];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:t})}}async function $b(){if(Ud())try{await Bd()}catch(n){return Be.warn(Ye.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Be.warn(Ye.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function zb(n,e,t,r,s,i,a){const c=Lb(n);c.then(g=>{t[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&Be.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Be.error(g)),e.push(c);const l=$b().then(g=>{if(g)return r.getId()}),[h,f]=await Promise.all([c,l]);Db(i)||Ab(i,h.measurementId),s("js",new Date);const m=a?.config??{};return m[wb]="firebase",m.update=!0,f!=null&&(m[yb]=f),s("config",h.measurementId,m),h.measurementId}class Gb{constructor(e){this.app=e}_delete(){return delete nr[this.app.options.appId],Promise.resolve()}}let nr={},Ih=[];const Th={};let Qo="dataLayer",Hb="gtag",bh,Dc,Ah=!1;function Wb(){const n=[];if(Fd()&&n.push("This is a browser extension environment."),$y()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=Ye.create("invalid-analytics-context",{errorInfo:e});Be.warn(t.message)}}function Kb(n,e,t){Wb();const r=n.options.appId;if(!r)throw Ye.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Be.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ye.create("no-api-key");if(nr[r]!=null)throw Ye.create("already-exists",{id:r});if(!Ah){Rb(Qo);const{wrappedGtag:i,gtagCore:a}=kb(nr,Ih,Th,Qo,Hb);Dc=i,bh=a,Ah=!0}return nr[r]=zb(n,Ih,Th,e,bh,Qo,t),new Gb(n)}function Qb(n=vs()){n=ne(n);const e=sn(n,Ni);return e.isInitialized()?e.getImmediate():Yb(n)}function Yb(n,e={}){const t=sn(n,Ni);if(t.isInitialized()){const s=t.getImmediate();if(Yt(e,t.getOptions()))return s;throw Ye.create("already-initialized")}return t.initialize({options:e})}function Jb(n,e,t){n=ne(n),qb(Dc,nr[n.app.options.appId],e,t).catch(r=>Be.error(r))}function Xb(n,e,t,r){n=ne(n),jb(Dc,nr[n.app.options.appId],e,t,r).catch(s=>Be.error(s))}const Rh="@firebase/analytics",Sh="0.10.19";function Zb(){ot(new et(Ni,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Kb(r,s,t)},"PUBLIC")),ot(new et("analytics-internal",n,"PRIVATE")),Ge(Rh,Sh),Ge(Rh,Sh,"esm2020");function n(e){try{const t=e.getProvider(Ni).getImmediate();return{logEvent:(r,s,i)=>Xb(t,r,s,i),setUserProperties:(r,s)=>Jb(t,r,s)}}catch(t){throw Ye.create("interop-component-reg-failed",{reason:t})}}}Zb();function Zp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eA=Zp,em=new Vn("auth","Firebase",Zp());const Vi=new ji("@firebase/auth");function tA(n,...e){Vi.logLevel<=J.WARN&&Vi.warn(`Auth (${xn}): ${n}`,...e)}function ui(n,...e){Vi.logLevel<=J.ERROR&&Vi.error(`Auth (${xn}): ${n}`,...e)}function ct(n,...e){throw Oc(n,...e)}function _t(n,...e){return Oc(n,...e)}function tm(n,e,t){const r={...eA(),[e]:t};return new Vn("auth","Firebase",r).create(e,{appName:n.name})}function At(n){return tm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Oc(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return em.create(n,...e)}function $(n,e,...t){if(!n)throw Oc(e,...t)}function It(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ui(e),new Error(e)}function Pt(n,e){n||It(e)}function Na(){return typeof self<"u"&&self.location?.href||""}function nA(){return Ch()==="http:"||Ch()==="https:"}function Ch(){return typeof self<"u"&&self.location?.protocol||null}function rA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nA()||Fd()||"connection"in navigator)?navigator.onLine:!0}function sA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Ps{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pt(t>e,"Short delay should be less than long delay!"),this.isMobile=Ly()||By()}get(){return rA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nc(n,e){Pt(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class nm{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;It("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;It("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;It("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const oA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aA=new Ps(3e4,6e4);function ln(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function un(n,e,t,r,s={}){return rm(n,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=ws({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:l,...i};return Uy()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&rn(n.emulatorConfig.host)&&(h.credentials="include"),nm.fetch()(await sm(n,n.config.apiHost,t,c),h)})}async function rm(n,e,t){n._canInitEmulator=!1;const r={...iA,...e};try{const s=new lA(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw ti(n,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ti(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw ti(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw ti(n,"user-disabled",a);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw tm(n,f,h);ct(n,f)}}catch(s){if(s instanceof nt)throw s;ct(n,"network-request-failed",{message:String(s)})}}async function ks(n,e,t,r,s={}){const i=await un(n,e,t,r,s);return"mfaPendingCredential"in i&&ct(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function sm(n,e,t,r){const s=`${e}${t}?${r}`,i=n,a=i.config.emulator?Nc(n.config,s):`${n.config.apiScheme}://${s}`;return oA.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function cA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_t(this.auth,"network-request-failed")),aA.get())})}}function ti(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=_t(n,e,r);return s.customData._tokenResponse=t,s}function Ph(n){return n!==void 0&&n.enterprise!==void 0}class uA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hA(n,e){return un(n,"GET","/v2/recaptchaConfig",ln(n,e))}async function dA(n,e){return un(n,"POST","/v1/accounts:delete",e)}async function xi(n,e){return un(n,"POST","/v1/accounts:lookup",e)}function ts(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fA(n,e=!1){const t=ne(n),r=await t.getIdToken(e),s=Vc(r);$(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i?.sign_in_provider;return{claims:s,token:r,authTime:ts(Yo(s.auth_time)),issuedAtTime:ts(Yo(s.iat)),expirationTime:ts(Yo(s.exp)),signInProvider:a||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Yo(n){return Number(n)*1e3}function Vc(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ui("JWT malformed, contained fewer than 3 sections"),null;try{const s=Od(t);return s?JSON.parse(s):(ui("Failed to decode base64 JWT payload"),null)}catch(s){return ui("Caught error parsing JWT payload as JSON",s?.toString()),null}}function kh(n){const e=Vc(n);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function gs(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof nt&&pA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function pA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class mA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Va{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ts(this.lastLoginAt),this.creationTime=ts(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Mi(n){const e=n.auth,t=await n.getIdToken(),r=await gs(n,xi(e,{idToken:t}));$(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=s.providerUserInfo?.length?im(s.providerUserInfo):[],a=_A(n.providerData,i),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Va(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function gA(n){const e=ne(n);await Mi(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _A(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function im(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function yA(n,e){const t=await rm(n,{},async()=>{const r=ws({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,a=await sm(n,s,"/v1/token",`key=${i}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return n.emulatorConfig&&rn(n.emulatorConfig.host)&&(l.credentials="include"),nm.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wA(n,e){return un(n,"POST","/v2/accounts:revokeToken",ln(n,e))}class rr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$(e.length!==0,"internal-error");const t=kh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await yA(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,a=new rr;return r&&($(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&($(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&($(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rr,this.toJSON())}_performRefresh(){return It("not implemented")}}function Ft(n,e){$(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class st{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new mA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Va(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await gs(this,this.stsTokenManager.getToken(this.auth,e));return $(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fA(this,e)}reload(){return gA(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new st({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Mi(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(We(this.auth.app))return Promise.reject(At(this.auth));const e=await this.getIdToken();return await gs(this,dA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,a=t.photoURL??void 0,c=t.tenantId??void 0,l=t._redirectEventId??void 0,h=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:T,providerData:S,stsTokenManager:C}=t;$(m&&C,e,"internal-error");const P=rr.fromJSON(this.name,C);$(typeof m=="string",e,"internal-error"),Ft(r,e.name),Ft(s,e.name),$(typeof g=="boolean",e,"internal-error"),$(typeof T=="boolean",e,"internal-error"),Ft(i,e.name),Ft(a,e.name),Ft(c,e.name),Ft(l,e.name),Ft(h,e.name),Ft(f,e.name);const O=new st({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:T,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:P,createdAt:h,lastLoginAt:f});return S&&Array.isArray(S)&&(O.providerData=S.map(V=>({...V}))),l&&(O._redirectEventId=l),O}static async _fromIdTokenResponse(e,t,r=!1){const s=new rr;s.updateFromServerResponse(t);const i=new st({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Mi(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];$(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?im(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!i?.length,c=new rr;c.updateFromIdToken(r);const l=new st({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Va(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,h),l}}const Dh=new Map;function Tt(n){Pt(n instanceof Function,"Expected a class definition");let e=Dh.get(n);return e?(Pt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Dh.set(n,e),e)}class om{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}om.type="NONE";const Oh=om;function hi(n,e,t){return`firebase:${n}:${e}:${t}`}class sr{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=hi(this.userKey,s.apiKey,i),this.fullPersistenceKey=hi("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xi(this.auth,{idToken:e}).catch(()=>{});return t?st._fromGetAccountInfoResponse(this.auth,t,e):null}return st._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new sr(Tt(Oh),e,r);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Tt(Oh);const a=hi(r,e.config.apiKey,e.name);let c=null;for(const h of t)try{const f=await h._get(a);if(f){let m;if(typeof f=="string"){const g=await xi(e,{idToken:f}).catch(()=>{});if(!g)break;m=await st._fromGetAccountInfoResponse(e,g,f)}else m=st._fromJSON(e,f);h!==i&&(c=m),i=h;break}}catch{}const l=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new sr(i,e,r):(i=l[0],c&&await i._set(a,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==i)try{await h._remove(a)}catch{}})),new sr(i,e,r))}}function Nh(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(um(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(am(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dm(e))return"Blackberry";if(fm(e))return"Webos";if(cm(e))return"Safari";if((e.includes("chrome/")||lm(e))&&!e.includes("edge/"))return"Chrome";if(hm(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function am(n=xe()){return/firefox\//i.test(n)}function cm(n=xe()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lm(n=xe()){return/crios\//i.test(n)}function um(n=xe()){return/iemobile/i.test(n)}function hm(n=xe()){return/android/i.test(n)}function dm(n=xe()){return/blackberry/i.test(n)}function fm(n=xe()){return/webos/i.test(n)}function xc(n=xe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function vA(n=xe()){return xc(n)&&!!window.navigator?.standalone}function EA(){return jy()&&document.documentMode===10}function pm(n=xe()){return xc(n)||hm(n)||fm(n)||dm(n)||/windows phone/i.test(n)||um(n)}function mm(n,e=[]){let t;switch(n){case"Browser":t=Nh(xe());break;case"Worker":t=`${Nh(xe())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xn}/${r}`}class IA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((a,c)=>{try{const l=e(i);a(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function TA(n,e={}){return un(n,"GET","/v2/passwordPolicy",ln(n,e))}const bA=6;class AA{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class RA{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vh(this),this.idTokenSubscription=new Vh(this),this.beforeStateQueue=new IA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=em,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tt(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await sr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xi(this,{idToken:e}),r=await st._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(We(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,a=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mi(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(We(this.app))return Promise.reject(At(this));const t=e?ne(e):null;return t&&$(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return We(this.app)?Promise.reject(At(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return We(this.app)?Promise.reject(At(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TA(this),t=new AA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await wA(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tt(e)||this._popupRedirectResolver;$(t,this,"argument-error"),this.redirectPersistenceManager=await sr.create(this,[Tt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if($(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,s);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(We(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Un(n){return ne(n)}class Vh{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ky(t=>this.observer=t)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let co={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SA(n){co=n}function gm(n){return co.loadJS(n)}function CA(){return co.recaptchaEnterpriseScript}function PA(){return co.gapiScript}function kA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class DA{constructor(){this.enterprise=new OA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class OA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const NA="recaptcha-enterprise",_m="NO_RECAPTCHA";class VA{constructor(e){this.type=NA,this.auth=Un(e)}async verify(e="verify",t=!1){async function r(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{hA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new uA(l);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,a(h.siteKey)}}).catch(l=>{c(l)})})}function s(i,a,c){const l=window.grecaptcha;Ph(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(h=>{a(h)}).catch(()=>{a(_m)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DA().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!t&&Ph(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=CA();l.length!==0&&(l+=c),gm(l).then(()=>{s(c,i,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}async function xh(n,e,t,r=!1,s=!1){const i=new VA(n);let a;if(s)a=_m;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function xa(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await xh(n,e,t,t==="getOobCode");return r(n,i)}else return r(n,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await xh(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(i)})}function xA(n,e){const t=sn(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Yt(i,e??{}))return s;ct(s,"already-initialized")}return t.initialize({options:e})}function MA(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Tt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function LA(n,e,t){const r=Un(n);$(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=ym(e),{host:a,port:c}=FA(e),l=c===null?"":`:${c}`,h={url:`${i}//${a}${l}/`},f=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){$(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),$(Yt(h,r.config.emulator)&&Yt(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,rn(a)?($a(`${i}//${a}${l}`),za("Auth",!0)):UA()}function ym(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function FA(n){const e=ym(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Mh(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Mh(a)}}}function Mh(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function UA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Mc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return It("not implemented")}_getIdTokenResponse(e){return It("not implemented")}_linkToIdToken(e,t){return It("not implemented")}_getReauthenticationResolver(e){return It("not implemented")}}async function BA(n,e){return un(n,"POST","/v1/accounts:signUp",e)}async function jA(n,e){return ks(n,"POST","/v1/accounts:signInWithPassword",ln(n,e))}async function qA(n,e){return ks(n,"POST","/v1/accounts:signInWithEmailLink",ln(n,e))}async function $A(n,e){return ks(n,"POST","/v1/accounts:signInWithEmailLink",ln(n,e))}class _s extends Mc{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new _s(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new _s(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xa(e,t,"signInWithPassword",jA);case"emailLink":return qA(e,{email:this._email,oobCode:this._password});default:ct(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xa(e,r,"signUpPassword",BA);case"emailLink":return $A(e,{idToken:t,email:this._email,oobCode:this._password});default:ct(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ir(n,e){return ks(n,"POST","/v1/accounts:signInWithIdp",ln(n,e))}const zA="http://localhost";class Dn extends Mc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Dn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ct("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const a=new Dn(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return ir(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ir(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ir(e,t)}buildRequest(){const e={requestUri:zA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ws(t)}return e}}function GA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HA(n){const e=zr(Gr(n)).link,t=e?zr(Gr(e)).deep_link_id:null,r=zr(Gr(n)).deep_link_id;return(r?zr(Gr(r)).link:null)||r||t||e||n}class Lc{constructor(e){const t=zr(Gr(e)),r=t.apiKey??null,s=t.oobCode??null,i=GA(t.mode??null);$(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=HA(e);try{return new Lc(t)}catch{return null}}}class Er{constructor(){this.providerId=Er.PROVIDER_ID}static credential(e,t){return _s._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Lc.parseLink(t);return $(r,"argument-error"),_s._fromEmailAndCode(e,r.code,r.tenantId)}}Er.PROVIDER_ID="password";Er.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Er.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class wm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ds extends wm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ut extends Ds{constructor(){super("facebook.com")}static credential(e){return Dn._fromParams({providerId:Ut.PROVIDER_ID,signInMethod:Ut.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ut.credentialFromTaggedObject(e)}static credentialFromError(e){return Ut.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ut.credential(e.oauthAccessToken)}catch{return null}}}Ut.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ut.PROVIDER_ID="facebook.com";class Bt extends Ds{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Dn._fromParams({providerId:Bt.PROVIDER_ID,signInMethod:Bt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bt.credentialFromTaggedObject(e)}static credentialFromError(e){return Bt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Bt.credential(t,r)}catch{return null}}}Bt.GOOGLE_SIGN_IN_METHOD="google.com";Bt.PROVIDER_ID="google.com";class jt extends Ds{constructor(){super("github.com")}static credential(e){return Dn._fromParams({providerId:jt.PROVIDER_ID,signInMethod:jt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jt.credentialFromTaggedObject(e)}static credentialFromError(e){return jt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jt.credential(e.oauthAccessToken)}catch{return null}}}jt.GITHUB_SIGN_IN_METHOD="github.com";jt.PROVIDER_ID="github.com";class qt extends Ds{constructor(){super("twitter.com")}static credential(e,t){return Dn._fromParams({providerId:qt.PROVIDER_ID,signInMethod:qt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qt.credentialFromTaggedObject(e)}static credentialFromError(e){return qt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qt.credential(t,r)}catch{return null}}}qt.TWITTER_SIGN_IN_METHOD="twitter.com";qt.PROVIDER_ID="twitter.com";async function WA(n,e){return ks(n,"POST","/v1/accounts:signUp",ln(n,e))}class On{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await st._fromIdTokenResponse(e,r,s),a=Lh(r);return new On({user:i,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Lh(r);return new On({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Lh(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Li extends nt{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Li.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Li(e,t,r,s)}}function vm(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Li._fromErrorAndOperation(n,i,e,r):i})}async function KA(n,e,t=!1){const r=await gs(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return On._forOperation(n,"link",r)}async function QA(n,e,t=!1){const{auth:r}=n;if(We(r.app))return Promise.reject(At(r));const s="reauthenticate";try{const i=await gs(n,vm(r,s,e,n),t);$(i.idToken,r,"internal-error");const a=Vc(i.idToken);$(a,r,"internal-error");const{sub:c}=a;return $(n.uid===c,r,"user-mismatch"),On._forOperation(n,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&ct(r,"user-mismatch"),i}}async function Em(n,e,t=!1){if(We(n.app))return Promise.reject(At(n));const r="signIn",s=await vm(n,r,e),i=await On._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}async function YA(n,e){return Em(Un(n),e)}async function Im(n){const e=Un(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XC(n,e,t){if(We(n.app))return Promise.reject(At(n));const r=Un(n),a=await xa(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WA).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Im(n),l}),c=await On._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function ZC(n,e,t){return We(n.app)?Promise.reject(At(n)):YA(ne(n),Er.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Im(n),r})}function JA(n,e,t,r){return ne(n).onIdTokenChanged(e,t,r)}function XA(n,e,t){return ne(n).beforeAuthStateChanged(e,t)}function eP(n,e,t,r){return ne(n).onAuthStateChanged(e,t,r)}function tP(n){return ne(n).signOut()}const Fi="__sak";class Tm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fi,"1"),this.storage.removeItem(Fi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ZA=1e3,eR=10;class bm extends Tm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);EA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eR):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},ZA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bm.type="LOCAL";const tR=bm;class Am extends Tm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Am.type="SESSION";const Rm=Am;function nR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class lo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new lo(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,a=this.handlersMap[s];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async h=>h(t.origin,i)),l=await nR(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lo.receivers=[];function Fc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class rR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,l)=>{const h=Fc("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function yt(){return window}function sR(n){yt().location.href=n}function Sm(){return typeof yt().WorkerGlobalScope<"u"&&typeof yt().importScripts=="function"}async function iR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oR(){return navigator?.serviceWorker?.controller||null}function aR(){return Sm()?self:null}const Cm="firebaseLocalStorageDb",cR=1,Ui="firebaseLocalStorage",Pm="fbase_key";class Os{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function uo(n,e){return n.transaction([Ui],e?"readwrite":"readonly").objectStore(Ui)}function lR(){const n=indexedDB.deleteDatabase(Cm);return new Os(n).toPromise()}function Ma(){const n=indexedDB.open(Cm,cR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ui,{keyPath:Pm})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ui)?e(r):(r.close(),await lR(),e(await Ma()))})})}async function Fh(n,e,t){const r=uo(n,!0).put({[Pm]:e,value:t});return new Os(r).toPromise()}async function uR(n,e){const t=uo(n,!1).get(e),r=await new Os(t).toPromise();return r===void 0?null:r.value}function Uh(n,e){const t=uo(n,!0).delete(e);return new Os(t).toPromise()}const hR=800,dR=3;class km{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ma(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>dR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lo._getInstance(aR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await iR(),!this.activeServiceWorker)return;this.sender=new rR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ma();return await Fh(e,Fi,"1"),await Uh(e,Fi),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Fh(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>uR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Uh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=uo(s,!1).getAll();return new Os(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}km.type="LOCAL";const fR=km;new Ps(3e4,6e4);function pR(n,e){return e?Tt(e):($(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Uc extends Mc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ir(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ir(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ir(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mR(n){return Em(n.auth,new Uc(n),n.bypassAuthState)}function gR(n){const{auth:e,user:t}=n;return $(t,e,"internal-error"),QA(t,new Uc(n),n.bypassAuthState)}async function _R(n){const{auth:e,user:t}=n;return $(t,e,"internal-error"),KA(t,new Uc(n),n.bypassAuthState)}class Dm{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mR;case"linkViaPopup":case"linkViaRedirect":return _R;case"reauthViaPopup":case"reauthViaRedirect":return gR;default:ct(this.auth,"internal-error")}}resolve(e){Pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yR=new Ps(2e3,1e4);class Xn extends Dm{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Xn.currentPopupAction&&Xn.currentPopupAction.cancel(),Xn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $(e,this.auth,"internal-error"),e}async onExecution(){Pt(this.filter.length===1,"Popup operations only handle one event");const e=Fc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_t(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_t(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xn.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_t(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yR.get())};e()}}Xn.currentPopupAction=null;const wR="pendingRedirect",di=new Map;class vR extends Dm{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=di.get(this.auth._key());if(!e){try{const r=await ER(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}di.set(this.auth._key(),e)}return this.bypassAuthState||di.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ER(n,e){const t=bR(e),r=TR(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function IR(n,e){di.set(n._key(),e)}function TR(n){return Tt(n._redirectPersistence)}function bR(n){return hi(wR,n.config.apiKey,n.name)}async function AR(n,e,t=!1){if(We(n.app))return Promise.reject(At(n));const r=Un(n),s=pR(r,e),a=await new vR(r,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const RR=600*1e3;class SR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Om(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(_t(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bh(e))}saveEventToCache(e){this.cachedEventUids.add(Bh(e)),this.lastProcessedEventTime=Date.now()}}function Bh(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Om({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function CR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Om(n);default:return!1}}async function PR(n,e={}){return un(n,"GET","/v1/projects",e)}const kR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DR=/^https?/;async function OR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await PR(n);for(const t of e)try{if(NR(t))return}catch{}ct(n,"unauthorized-domain")}function NR(n){const e=Na(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!DR.test(t))return!1;if(kR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const VR=new Ps(3e4,6e4);function jh(){const n=yt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xR(n){return new Promise((e,t)=>{function r(){jh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jh(),t(_t(n,"network-request-failed"))},timeout:VR.get()})}if(yt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(yt().gapi?.load)r();else{const s=kA("iframefcb");return yt()[s]=()=>{gapi.load?r():t(_t(n,"network-request-failed"))},gm(`${PA()}?onload=${s}`).catch(i=>t(i))}}).catch(e=>{throw fi=null,e})}let fi=null;function MR(n){return fi=fi||xR(n),fi}const LR=new Ps(5e3,15e3),FR="__/auth/iframe",UR="emulator/auth/iframe",BR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qR(n){const e=n.config;$(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Nc(e,UR):`https://${n.config.authDomain}/${FR}`,r={apiKey:e.apiKey,appName:n.name,v:xn},s=jR.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${ws(r).slice(1)}`}async function $R(n){const e=await MR(n),t=yt().gapi;return $(t,n,"internal-error"),e.open({where:document.body,url:qR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=_t(n,"network-request-failed"),c=yt().setTimeout(()=>{i(a)},LR.get());function l(){yt().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(a)})}))}const zR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GR=500,HR=600,WR="_blank",KR="http://localhost";class qh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QR(n,e,t,r=GR,s=HR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...zR,width:r.toString(),height:s.toString(),top:i,left:a},h=xe().toLowerCase();t&&(c=lm(h)?WR:t),am(h)&&(e=e||KR,l.scrollbars="yes");const f=Object.entries(l).reduce((g,[T,S])=>`${g}${T}=${S},`,"");if(vA(h)&&c!=="_self")return YR(e||"",c),new qh(null);const m=window.open(e||"",c,f);$(m,n,"popup-blocked");try{m.focus()}catch{}return new qh(m)}function YR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const JR="__/auth/handler",XR="emulator/auth/handler",ZR=encodeURIComponent("fac");async function $h(n,e,t,r,s,i){$(n.config.authDomain,n,"auth-domain-config-required"),$(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:xn,eventId:s};if(e instanceof wm){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Wy(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(e instanceof Ds){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await n._getAppCheckToken(),h=l?`#${ZR}=${encodeURIComponent(l)}`:"";return`${eS(n)}?${ws(c).slice(1)}${h}`}function eS({config:n}){return n.emulator?Nc(n,XR):`https://${n.authDomain}/${JR}`}const Jo="webStorageSupport";class tS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rm,this._completeRedirectFn=AR,this._overrideRedirectResult=IR}async _openPopup(e,t,r,s){Pt(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await $h(e,t,r,Na(),s);return QR(e,i,Fc())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await $h(e,t,r,Na(),s);return sR(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(Pt(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await $R(e),r=new SR(e);return t.register("authEvent",s=>($(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jo,{type:Jo},s=>{const i=s?.[0]?.[Jo];i!==void 0&&t(!!i),ct(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=OR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pm()||cm()||xc()}}const nS=tS;var zh="@firebase/auth",Gh="1.12.0";class rS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sS(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iS(n){ot(new et("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;$(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mm(n)},h=new RA(r,s,i,l);return MA(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ot(new et("auth-internal",e=>{const t=Un(e.getProvider("auth").getImmediate());return(r=>new rS(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ge(zh,Gh,sS(n)),Ge(zh,Gh,"esm2020")}const oS=300,aS=Md("authIdTokenMaxAge")||oS;let Hh=null;const cS=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>aS)return;const s=t?.token;Hh!==s&&(Hh=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lS(n=vs()){const e=sn(n,"auth");if(e.isInitialized())return e.getImmediate();const t=xA(n,{popupRedirectResolver:nS,persistence:[fR,tR,Rm]}),r=Md("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=cS(i.toString());XA(t,a,()=>a(t.currentUser)),JA(t,c=>a(c))}}const s=Nd("auth");return s&&LA(t,`http://${s}`),t}function uS(){return document.getElementsByTagName("head")?.[0]??document}SA({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=_t("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",uS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iS("Browser");const Nm="firebasestorage.googleapis.com",Vm="storageBucket",hS=120*1e3,dS=600*1e3;class he extends nt{constructor(e,t,r=0){super(Xo(e),`Firebase Storage: ${t} (${Xo(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,he.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xo(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ue;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ue||(ue={}));function Xo(n){return"storage/"+n}function Bc(){const n="An unknown error occurred, please check the error payload for server response.";return new he(ue.UNKNOWN,n)}function fS(n){return new he(ue.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function pS(n){return new he(ue.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mS(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new he(ue.UNAUTHENTICATED,n)}function gS(){return new he(ue.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _S(n){return new he(ue.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function yS(){return new he(ue.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wS(){return new he(ue.CANCELED,"User canceled the upload/download.")}function vS(n){return new he(ue.INVALID_URL,"Invalid URL '"+n+"'.")}function ES(n){return new he(ue.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function IS(){return new he(ue.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Vm+"' property when initializing the app?")}function TS(){return new he(ue.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bS(){return new he(ue.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function AS(n){return new he(ue.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function La(n){return new he(ue.INVALID_ARGUMENT,n)}function xm(){return new he(ue.APP_DELETED,"The Firebase app was deleted.")}function RS(n){return new he(ue.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ns(n,e){return new he(ue.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function $r(n){throw new he(ue.INTERNAL_ERROR,"Internal error: "+n)}class Qe{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Qe.makeFromUrl(e,t)}catch{return new Qe(e,"")}if(r.path==="")return r;throw ES(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function h(q){q.path_=decodeURIComponent(q.path)}const f="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",T=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),S={bucket:1,path:3},C=t===Nm?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",O=new RegExp(`^https?://${C}/${s}/${P}`,"i"),L=[{regex:c,indices:l,postModify:i},{regex:T,indices:S,postModify:h},{regex:O,indices:{bucket:1,path:2},postModify:h}];for(let q=0;q<L.length;q++){const W=L[q],Q=W.regex.exec(e);if(Q){const v=Q[W.indices.bucket];let _=Q[W.indices.path];_||(_=""),r=new Qe(v,_),W.postModify(r);break}}if(r==null)throw vS(e);return r}}class SS{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function CS(n,e,t){let r=1,s=null,i=null,a=!1,c=0;function l(){return c===2}let h=!1;function f(...P){h||(h=!0,e.apply(null,P))}function m(P){s=setTimeout(()=>{s=null,n(T,l())},P)}function g(){i&&clearTimeout(i)}function T(P,...O){if(h){g();return}if(P){g(),f.call(null,P,...O);return}if(l()||a){g(),f.call(null,P,...O);return}r<64&&(r*=2);let L;c===1?(c=2,L=0):L=(r+Math.random())*1e3,m(L)}let S=!1;function C(P){S||(S=!0,g(),!h&&(s!==null?(P||(c=2),clearTimeout(s),m(0)):P||(c=1)))}return m(0),i=setTimeout(()=>{a=!0,C(!0)},t),C}function PS(n){n(!1)}function kS(n){return n!==void 0}function DS(n){return typeof n=="object"&&!Array.isArray(n)}function jc(n){return typeof n=="string"||n instanceof String}function Wh(n){return qc()&&n instanceof Blob}function qc(){return typeof Blob<"u"}function Kh(n,e,t,r){if(r<e)throw La(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw La(`Invalid value for '${n}'. Expected ${t} or less.`)}function ho(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Mm(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var An;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(An||(An={}));function OS(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}class NS{constructor(e,t,r,s,i,a,c,l,h,f,m,g=!0,T=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,C)=>{this.resolve_=S,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ni(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const l=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===An.NO_ERROR,l=i.getStatus();if(!c||OS(l,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===An.ABORT;r(!1,new ni(!1,null,f));return}const h=this.successCodes_.indexOf(l)!==-1;r(!0,new ni(h,i))})},t=(r,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(c,c.getResponse());kS(l)?i(l):i()}catch(l){a(l)}else if(c!==null){const l=Bc();l.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,l)):a(l)}else if(s.canceled){const l=this.appDelete_?xm():wS();a(l)}else{const l=yS();a(l)}};this.canceled_?t(!1,new ni(!1,null,!0)):this.backoffId_=CS(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&PS(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ni{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function VS(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function xS(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function MS(n,e){e&&(n["X-Firebase-GMPID"]=e)}function LS(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function FS(n,e,t,r,s,i,a=!0,c=!1){const l=Mm(n.urlParams),h=n.url+l,f=Object.assign({},n.headers);return MS(f,e),VS(f,t),xS(f,i),LS(f,r),new NS(h,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,a,c)}function US(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BS(...n){const e=US();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(qc())return new Blob(n);throw new he(ue.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jS(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function qS(n){if(typeof atob>"u")throw AS("base-64");return atob(n)}const ft={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zo{constructor(e,t){this.data=e,this.contentType=t||null}}function $S(n,e){switch(n){case ft.RAW:return new Zo(Lm(e));case ft.BASE64:case ft.BASE64URL:return new Zo(Fm(n,e));case ft.DATA_URL:return new Zo(GS(e),HS(e))}throw Bc()}function Lm(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=n.charCodeAt(++t);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function zS(n){let e;try{e=decodeURIComponent(n)}catch{throw ns(ft.DATA_URL,"Malformed data URL.")}return Lm(e)}function Fm(n,e){switch(n){case ft.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ns(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ft.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ns(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=qS(e)}catch(s){throw s.message.includes("polyfill")?s:ns(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class Um{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ns(ft.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=WS(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function GS(n){const e=new Um(n);return e.base64?Fm(ft.BASE64,e.rest):zS(e.rest)}function HS(n){return new Um(n).contentType}function WS(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class $t{constructor(e,t){let r=0,s="";Wh(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(Wh(this.data_)){const r=this.data_,s=jS(r,e,t);return s===null?null:new $t(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new $t(r,!0)}}static getBlob(...e){if(qc()){const t=e.map(r=>r instanceof $t?r.data_:r);return new $t(BS.apply(null,t))}else{const t=e.map(a=>jc(a)?$S(ft.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return t.forEach(a=>{for(let c=0;c<a.length;c++)s[i++]=a[c]}),new $t(s,!0)}}uploadData(){return this.data_}}function Bm(n){let e;try{e=JSON.parse(n)}catch{return null}return DS(e)?e:null}function KS(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function QS(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function jm(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function YS(n,e){return e}class Fe{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||YS}}let ri=null;function JS(n){return!jc(n)||n.length<2?n:jm(n)}function qm(){if(ri)return ri;const n=[];n.push(new Fe("bucket")),n.push(new Fe("generation")),n.push(new Fe("metageneration")),n.push(new Fe("name","fullPath",!0));function e(i,a){return JS(a)}const t=new Fe("name");t.xform=e,n.push(t);function r(i,a){return a!==void 0?Number(a):a}const s=new Fe("size");return s.xform=r,n.push(s),n.push(new Fe("timeCreated")),n.push(new Fe("updated")),n.push(new Fe("md5Hash",null,!0)),n.push(new Fe("cacheControl",null,!0)),n.push(new Fe("contentDisposition",null,!0)),n.push(new Fe("contentEncoding",null,!0)),n.push(new Fe("contentLanguage",null,!0)),n.push(new Fe("contentType",null,!0)),n.push(new Fe("metadata","customMetadata",!0)),ri=n,ri}function XS(n,e){function t(){const r=n.bucket,s=n.fullPath,i=new Qe(r,s);return e._makeStorageReference(i)}Object.defineProperty(n,"ref",{get:t})}function ZS(n,e,t){const r={};r.type="file";const s=t.length;for(let i=0;i<s;i++){const a=t[i];r[a.local]=a.xform(r,e[a.server])}return XS(r,n),r}function $m(n,e,t){const r=Bm(e);return r===null?null:ZS(n,r,t)}function eC(n,e,t,r){const s=Bm(e);if(s===null||!jc(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(h=>{const f=n.bucket,m=n.fullPath,g="/b/"+a(f)+"/o/"+a(m),T=ho(g,t,r),S=Mm({alt:"media",token:h});return T+S})[0]}function tC(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(t[i.server]=n[i.local])}return JSON.stringify(t)}class $c{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function zm(n){if(!n)throw Bc()}function nC(n,e){function t(r,s){const i=$m(n,s,e);return zm(i!==null),i}return t}function rC(n,e){function t(r,s){const i=$m(n,s,e);return zm(i!==null),eC(i,s,n.host,n._protocol)}return t}function Gm(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=gS():s=mS():t.getStatus()===402?s=pS(n.bucket):t.getStatus()===403?s=_S(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Hm(n){const e=Gm(n);function t(r,s){let i=e(r,s);return r.getStatus()===404&&(i=fS(n.path)),i.serverResponse=s.serverResponse,i}return t}function sC(n,e,t){const r=e.fullServerUrl(),s=ho(r,n.host,n._protocol),i="GET",a=n.maxOperationRetryTime,c=new $c(s,i,rC(n,t),a);return c.errorHandler=Hm(e),c}function iC(n,e){const t=e.fullServerUrl(),r=ho(t,n.host,n._protocol),s="DELETE",i=n.maxOperationRetryTime;function a(l,h){}const c=new $c(r,s,a,i);return c.successCodes=[200,204],c.errorHandler=Hm(e),c}function oC(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function aC(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=oC(null,e)),r}function cC(n,e,t,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let L="";for(let q=0;q<2;q++)L=L+Math.random().toString().slice(2);return L}const l=c();a["Content-Type"]="multipart/related; boundary="+l;const h=aC(e,r,s),f=tC(h,t),m="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,g=`\r
--`+l+"--",T=$t.getBlob(m,r,g);if(T===null)throw TS();const S={name:h.fullPath},C=ho(i,n.host,n._protocol),P="POST",O=n.maxUploadRetryTime,V=new $c(C,P,nC(n,t),O);return V.urlParams=S,V.headers=a,V.body=T.uploadData(),V.errorHandler=Gm(e),V}class lC{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=An.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=An.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=An.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,i){if(this.sent_)throw $r("cannot .send() more than once");if(rn(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $r("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $r("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $r("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $r("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class uC extends lC{initXhr(){this.xhr_.responseType="text"}}function zc(){return new uC}class Nn{constructor(e,t){this._service=e,t instanceof Qe?this._location=t:this._location=Qe.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Nn(e,t)}get root(){const e=new Qe(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jm(this._location.path)}get storage(){return this._service}get parent(){const e=KS(this._location.path);if(e===null)return null;const t=new Qe(this._location.bucket,e);return new Nn(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw RS(e)}}function hC(n,e,t){n._throwIfRoot("uploadBytes");const r=cC(n.storage,n._location,qm(),new $t(e,!0),t);return n.storage.makeRequestWithTokens(r,zc).then(s=>({metadata:s,ref:n}))}function dC(n){n._throwIfRoot("getDownloadURL");const e=sC(n.storage,n._location,qm());return n.storage.makeRequestWithTokens(e,zc).then(t=>{if(t===null)throw bS();return t})}function fC(n){n._throwIfRoot("deleteObject");const e=iC(n.storage,n._location);return n.storage.makeRequestWithTokens(e,zc)}function pC(n,e){const t=QS(n._location.path,e),r=new Qe(n._location.bucket,t);return new Nn(n.storage,r)}function mC(n){return/^[A-Za-z]+:\/\//.test(n)}function gC(n,e){return new Nn(n,e)}function Wm(n,e){if(n instanceof Gc){const t=n;if(t._bucket==null)throw IS();const r=new Nn(t,t._bucket);return e!=null?Wm(r,e):r}else return e!==void 0?pC(n,e):n}function _C(n,e){if(e&&mC(e)){if(n instanceof Gc)return gC(n,e);throw La("To use ref(service, url), the first argument must be a Storage instance.")}else return Wm(n,e)}function Qh(n,e){const t=e?.[Vm];return t==null?null:Qe.makeFromBucketSpec(t,n)}function yC(n,e,t,r={}){n.host=`${e}:${t}`;const s=rn(e);s&&($a(`https://${n.host}/b`),za("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Ld(i,n.app.options.projectId))}class Gc{constructor(e,t,r,s,i,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=Nm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hS,this._maxUploadRetryTime=dS,this._requests=new Set,s!=null?this._bucket=Qe.makeFromBucketSpec(s,this._host):this._bucket=Qh(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qe.makeFromBucketSpec(this._url,e):this._bucket=Qh(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kh("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kh("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(We(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Nn(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new SS(xm());{const a=FS(e,this._appId,r,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Yh="@firebase/storage",Jh="0.14.0";const Km="storage";function nP(n,e,t){return n=ne(n),hC(n,e,t)}function rP(n){return n=ne(n),dC(n)}function wC(n){return n=ne(n),fC(n)}function vC(n,e){return n=ne(n),_C(n,e)}function EC(n=vs(),e){n=ne(n);const r=sn(n,Km).getImmediate({identifier:e}),s=Vd("storage");return s&&IC(r,...s),r}function IC(n,e,t,r={}){yC(n,e,t,r)}function TC(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Gc(t,r,s,e,xn)}function bC(){ot(new et(Km,TC,"PUBLIC").setMultipleInstances(!0)),Ge(Yh,Jh,""),Ge(Yh,Jh,"esm2020")}bC();const AC={apiKey:"AIzaSyCY074fG5q10VeGc-s_73uM1Ragklabl9U",authDomain:"ryan-react-2ace0.firebaseapp.com",projectId:"ryan-react-2ace0",storageBucket:"ryan-react-2ace0.firebasestorage.app",messagingSenderId:"146016822888",appId:"1:146016822888:web:31c9c2a9b5c69723e67ddd",measurementId:"G-0T67BPN7XT"},fo=Xw().length?vs():zd(AC),Ns=pT(fo),sP=lS(fo),RC=EC(fo);typeof window<"u"&&Qb(fo);const Qm=async n=>{const e=vC(RC,n);await wC(e)},SC=async(n,e="new")=>{const t=ki(Ns,"posts"),r=bT(t,AT("createdAt","desc")),s=await wh(r),i=[];for(const a of s.docs){const c=a.data(),h=(await wh(ki(a.ref,"likes"))).docs.map(f=>f.id);i.push({id:a.id,title:c.title,content:c.content,projectLink:c.projectLink,imageUrl:c.imageUrl,likeCount:c.likeCount||h.length,name:c.name,createdAt:c.createdAt.toDate(),isLiked:n?h.includes(n):!1,userId:c.userId})}return e==="new"?i.sort((a,c)=>c.createdAt.getTime()-a.createdAt.getTime()):e==="popular"&&i.sort((a,c)=>c.likeCount-a.likeCount),i},iP=async(n,e)=>{const t={...n,userId:e,createdAt:se.now(),likeCount:0},r=await PT(ki(Ns,"posts"),t);return{...t,id:r.id,likeCount:0,isLiked:!1}},oP=async(n,e,t)=>{const r=ms(Ns,"posts",n);if(e.imageUrl&&t.imageUrl!==e.imageUrl)try{await Qm(e.imageUrl)}catch(s){console.warn("   ",s)}await kp(r,t)},aP=async n=>{if(n.imageUrl)try{await Qm(n.imageUrl)}catch(t){console.warn("  ",t)}const e=ms(Ns,"posts",n.id);await Dp(e)},cP=async(n,e)=>{if(!e)return;const t=ms(Ns,"posts",n),r=ms(ki(t,"likes"),e),s=await yh(r),i=await yh(t);if(!i.exists())return;let c=i.data().likeCount||0;s.exists()?(await Dp(r),c--):(await CT(r,{createdAt:se.now()}),c++),await kp(t,{likeCount:c})},CC=qe(0),PC=qe("new"),kC=.5*1024*1024,DC=["image/jpeg","image/png","image/webp"],lP=Ay(n=>({queryKey:["posts",n(PC),n(CC),n(Yg)],queryFn:async({queryKey:e})=>{const[,t,,r]=e;return await SC(r?.uid,t)}})),OC="/react_leaning/assets/bronze-B42Ok8GS.png",NC="/react_leaning/assets/silver-BqgWu_5d.png",VC="/react_leaning/assets/gold-CoW9W6W-.png",xC="/react_leaning/assets/platinum-CuV9BZUp.png",MC="/react_leaning/assets/diamond-Cm62xbzR.png",uP=n=>n.length===0?null:n[0].id,hP=n=>n.length===0?null:n[n.length-1].id,dP=(n,e)=>{const t=n.find(i=>i.id===e);if(!t)return null;const r=n.find(i=>i.section===t.section&&i.order===t.order+1);if(r)return r.id;const s=n.find(i=>i.section===t.section+1&&i.order===0);return s?s.id:null},fP=(n,e)=>{const t=n.find(i=>i.id===e);if(!t)return null;const r=n.find(i=>i.section===t.section&&i.order===t.order-1);if(r)return r.id;const s=n.filter(i=>i.section===t.section-1).sort((i,a)=>a.order-i.order);return s.length>0?s[0].id:null},pP=n=>{switch(n){case 1:return"Section 1 : What is React?";case 2:return"Section 2 : Basic React Concepts";case 3:return"Section 3 : State";case 4:return"Section 4 : Props";case 5:return"Section 5 : Events";case 6:return"Section 6 : Lists / Objects";case 7:return"Section 7 : Forms";case 8:return"Section 8 : Todo List Project";case 9:return"*Bonus : Lifecycle";default:return""}},mP=n=>{const e=Object.values(n.reduce((t,r)=>(t[r.section]||(t[r.section]=[]),t[r.section].push(r),t),{}));return e.forEach(t=>{t.sort((r,s)=>r.order-s.order)}),e},gP=(n,e)=>e?e.contentStatus.has(n.id):!1,_P=(n,e)=>{const t=n.split(",,").map(a=>a.trim().toLowerCase()),r=e.trim().toLowerCase(),s=t.some(a=>a===r),i=t[0]||"";return{isCorrect:s,firstCorrectAnswer:i}},yP=n=>DC.includes(n.type)?n.size>kC?"5MB":null:"JPEG, PNG, WEBP ",Ym={Bronze:{nextGrade:"Silver",minExp:0,maxExp:500,color:"text-orange-800",badge:OC},Silver:{nextGrade:"Gold",minExp:500,maxExp:1200,color:"text-slate-400",badge:NC},Gold:{nextGrade:"Platinum",minExp:1200,maxExp:2800,color:"text-yellow-500",badge:VC},Platinum:{nextGrade:"Diamond",minExp:2800,maxExp:5e3,color:"text-purple-400",badge:xC},Diamond:{nextGrade:"Max",minExp:5e3,maxExp:5e3,color:"text-blue-400",badge:MC}},wP=n=>n>=5e3?"Diamond":n>=2800?"Platinum":n>=1200?"Gold":n>=500?"Silver":"Bronze",vP=n=>Ym[n],EP=(n,e)=>{const t=Ym[n];if(n==="Diamond")return 100;const r=e,s=t.maxExp,i=Math.min(Math.max(r/s*100,0),100);return console.log(`Grade: ${n}, Exp: ${e}, Progress: ${i}%`),i};var LC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],FC=LC.reduce((n,e)=>{const t=Ed(`Primitive.${e}`),r=Re.forwardRef((s,i)=>{const{asChild:a,...c}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),or.jsx(l,{...c,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),UC="Label",Jm=Re.forwardRef((n,e)=>or.jsx(FC.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Jm.displayName=UC;var BC=Jm;function IP({className:n,...e}){return or.jsx(BC,{"data-slot":"label",className:wd("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}export{wP as $,lP as A,HC as B,aP as C,cP as D,oP as E,iP as F,Ed as G,zC as H,Sg as I,Qg as J,CT as K,IP as L,ms as M,Ns as N,ZC as O,XC as P,sP as Q,eP as R,j_ as S,tP as T,ki as U,wh as V,JC as W,Dp as X,kp as Y,PT as Z,YC as _,wd as a,bT as a0,AT as a1,yh as a2,Yg as b,sd as c,uP as d,$C as e,Ay as f,vP as g,qe as h,W_ as i,EP as j,fP as k,dP as l,hP as m,_P as n,mP as o,pP as p,gP as q,CC as r,qC as s,vC as t,GC as u,yP as v,RC as w,nP as x,rP as y,PC as z};
